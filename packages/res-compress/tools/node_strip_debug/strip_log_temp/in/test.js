window.__require=function t(e,n,a){function o(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){return o(e[r][1][t]||t)},u,u.exports,t,e,n,a)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<a.length;r++)o(a[r]);return o}({Actions:[function(t,e,n){"use strict";cc._RF.push(e,"3686e8lT31Ecbq2FXF5SOWq","Actions"),Object.defineProperty(n,"__esModule",{value:!0}),n.Actions=void 0;var a=t("./Shake"),o=function(){function t(){}return t.downward=function(t,e){return cc.moveBy(e/t,cc.v2(0,-e))},t.upward=function(t,e,n){void 0===n&&(n=0);var a=e/t;return cc.moveBy(a,cc.v2(0,e),n)},t.cycleAction=function(t,e,n,a,o,i,r,s){void 0===r&&(r=0),void 0===s&&(s=0);var c=Math.abs(a),l=[];l.push(t(c/o,e+a)),s>0&&l.push(cc.delayTime(s));for(var u=0;u<i;u++){var p=c-u*r,h=2*p/o,f=p;a>0?u%2==0&&(f=-f):u%2==1&&(f=-f),l.push(t(h,e+f)),s>0&&u%2==1&&l.push(cc.delayTime(s))}var m=c-(i-1)*r;return a>0?i%2==0&&(m=-m):i%2==1&&(m=-m),l.push(t(Math.abs(n-(e+m))/o,n)),cc.sequence(l)},t.delayTimeCall=function(t,e){return cc.sequence(cc.delayTime(t),cc.callFunc(e))},t.scheduleCall=function(t,e){return"function"==typeof e?cc.repeatForever(cc.sequence(cc.delayTime(t),cc.callFunc(e))):cc.repeatForever(cc.sequence(cc.delayTime(t),e))},t.highlightAction=function(t){return cc.sequence([cc.scaleTo(.1,1.4),cc.callFunc(function(){t&&t()}),cc.scaleTo(.07,.8),cc.scaleTo(.07,1.1),cc.scaleTo(.07,.9),cc.scaleTo(.07,1)])},t.flutterAction=function(){var t=cc.sequence([cc.moveBy(.6,cc.v2(0,0)),cc.moveBy(1,cc.v2(0,84))]),e=cc.sequence([cc.scaleTo(.1,.8),cc.scaleTo(.1,1)]),n=cc.sequence([cc.fadeTo(.8,255),cc.fadeTo(.8,0)]);return cc.spawn(t,e,n)},t.shakeAction=function(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=5),void 0===n&&(n=5),a.Shake.create(t,e,n)},t}();n.Actions=o,cc._RF.pop()},{"./Shake":"Shake"}],AdaptaterManager:[function(t,e,n){"use strict";cc._RF.push(e,"be794miClJANaDN6bJJI5+M","AdaptaterManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.AdaptaterManagerInstance=n.AdaptaterManager=void 0;var r=t("../../Singleton/Singleton"),s=t("../../Utils/Logger"),c=t("../../../GameLogic/SDK/SDKManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.designSize=new cc.Size(720,1280),e.nodeMap=new Map,e.contents=null,e.contentwidth=0,e.contentheight=0,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.OnInit=function(t){this.contents=t,cc.view.setDesignResolutionSize(this.designSize.width,this.designSize.height,cc.ResolutionPolicy.SHOW_ALL),this.contentwidth=this.designSize.width,this.contentheight=this.designSize.height,this.designResolution=cc.view.getDesignResolutionSize(),this.InitSafeArea(),this.resize(),cc.view.setResizeCallback(this.resize.bind(this))},e.prototype.start=function(){},e.prototype.adapterBackGround=function(t,e){if(e){var n=e.getContentSize(),a=Math.min(t.width/this.designResolution.width,t.height/this.designResolution.height),o=n.width*a,i=n.height*a;t.width/t.height<.5&&(a=t.width/this.designResolution.width),e.scale=Math.max(t.width/o,t.height/i)}else s.Logger.logView("\u9002\u914d\u8282\u70b9\u4e3anull")},e.prototype.resize=function(){var t=this,e=cc.view.getCanvasSize();this.nodeMap.forEach(function(n){t.adapterBackGround(e,n)});for(var n=Math.min(e.width/this.contentwidth,e.height/this.contentheight),a=this.contentwidth*n,o=this.contentheight*n,i=0;i<this.contents.length;i++)(h=this.contents[i]).width=this.contentwidth*(e.width/a),h.height=this.contentheight*(e.height/o);var r=cc.view.getVisibleSize(),s=cc.v2(0,0),c=r.width/2+(this.safeResolution.x-this.safeResolution.width/2);s.add(cc.v2(c/2,0));var l=r.width/2-(this.safeResolution.x+this.safeResolution.width/2);s.sub(cc.v2(l/2,0));var u=r.height/2-(this.safeResolution.y+this.safeResolution.height/2);s.sub(cc.v2(0,u/2));var p=r.height/2+(this.safeResolution.y-this.safeResolution.height/2);for(s.add(cc.v2(0,p/2)),i=0;i<this.contents.length;i++){var h;(h=this.contents[i]).width=h.width-c-l,h.height=h.height-u-p,h.setPosition(s)}},e.prototype.InitSafeArea=function(){switch(cc.sys.platform){case cc.sys.MOBILE_BROWSER:this.safeResolution=new cc.Rect(0,0,this.designResolution.width,this.designResolution.height);break;case cc.sys.ANDROID||cc.sys.IPHONE:case cc.sys.WECHAT_GAME:this.safeResolution=c.SDKInstance.getHeightAndWidth();break;default:this.safeResolution=new cc.Rect(0,0,this.designResolution.width,this.designResolution.height)}},e.prototype.RegistNode=function(t){if(!this.nodeMap.has(t)){this.nodeMap.set(t,t);var e=cc.view.getCanvasSize();this.adapterBackGround(e,t)}},e.prototype.UnRegistNode=function(t){this.nodeMap.has(t)&&this.nodeMap.delete(t)},e.prototype.getCurrentUISize=function(){return this.contents&&this.contents.length>1?this.contents[0].getContentSize():null},i([u],e)}(r.Singleton));n.AdaptaterManager=p,n.AdaptaterManagerInstance=p.GetInstance(p),cc._RF.pop()},{"../../../GameLogic/SDK/SDKManager":"SDKManager","../../Singleton/Singleton":"Singleton","../../Utils/Logger":"Logger"}],AnimPos:[function(t,e,n){"use strict";cc._RF.push(e,"4c752Kl+F9NLKqec6PNcsla","AnimPos");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="x",e.value=0,e.duration=1,e}return o(e,t),e.prototype.onLoad=function(){this.oldPos=this.node.position.clone(),this.targetPos=this.oldPos.clone(),"x"==this.key?this.targetPos.x=this.value:"y"==this.key?this.targetPos.y=this.value:this.targetPos.z=this.value,this.node.active=!1},e.prototype.playAnim=function(t){var e=this;void 0===t&&(t=null),cc.Tween.stopAllByTarget(this.node),this.node.position=this.oldPos,cc.tween(this.node).to(this.duration,{position:this.targetPos}).call(function(){t&&t.apply(e)}).start()},i([c],e.prototype,"key",void 0),i([c],e.prototype,"value",void 0),i([c],e.prototype,"duration",void 0),i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],AppPool:[function(t,e,n){"use strict";cc._RF.push(e,"d66b8R78aRK+b2Srs1hqi0R","AppPool");var a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.AppPool=void 0;var o=t("../Utils/Utils"),i=t("../Utils/TimeUtil"),r=t("../Timer/TimerManager"),s=function(){function t(){}return t.onAutoLimit=function(){var e=[];for(var n in t.sDataPool){(u=t.sDataPool[n]).length>t.sMaxLimit&&u.splice(0,Math.min(u.length-t.sMaxLimit,t.sBatchLimit));for(var a=i.TimeUtil.getTimer(),o=u.length,r=0;o>0&&r<o&&r<=t.sBatchLimit;){var s=u[r]._onApRecycleTs;s&&a-s>=t.sTmLimit?(u.splice(r,1),o--):r++}u.length<=0&&e.push(n)}for(var c=0,l=e;c<l.length;c++){var u=l[c];delete t.sDataPool[u]}},t.startAutoLimit=function(){r.TimerManagerInstance.doTimer(1e3,0,t.onAutoLimit,this)},t.apCreate=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.popClass.apply(t,a([e,""],n))},t.apDestroy=function(e){t.pushClass(e)},t.popClass=function(e,n){void 0===n&&(n="");for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var s=e._apClzNameKey;null==s&&(s=o.getQualifiedClassName(e),e._apClzNameKey=s);var c=(n=null==n?"":n)+s,l=t.sDataPool[c];if(null!=l&&l.length>0){var u=l.pop();return null!=u.onApReuse&&u.onApReuse.apply(u,a([!1],i)),u}if(0==i.length){var p=new e;return p._apObjNameKey=s,p}var h=new(e.bind.apply(e,a([void 0],i)));return h._apObjNameKey=s,h},t.pushClass=function(e,n){if(void 0===n&&(n=""),e){var a=e._apObjNameKey;null==a&&(a=o.getQualifiedClassName(e),e._apObjNameKey=a);var i=(n=null==n?"":n)+a,r=t.sDataPool[i];null==r&&(r=[],t.sDataPool[i]=r),r.indexOf(e)>=0||(null!=e.onApRecycle&&e.onApRecycle(),r.push(e))}},t.hasClass=function(e,n){void 0===n&&(n="");var a=e._apClzNameKey;null==a&&(a=o.getQualifiedClassName(e),e._apClzNameKey=a);var i=(n=null==n?"":n)+a,r=t.sDataPool[i];return null!=r&&r.length>0},t.disposeClass=function(e,n){void 0===n&&(n="");var a=e._apClzNameKey;null==a&&(a=o.getQualifiedClassName(e),e._apClzNameKey=a);var i=(n=null==n?"":n)+a,r=t.sDataPool[i];null!=r&&(r.splice(0,r.length),delete t.sDataPool[i])},t.sDataPool={},t.sMaxLimit=25,t.sTmLimit=5e3,t.sBatchLimit=15,t}();n.AppPool=s,cc._RF.pop()},{"../Timer/TimerManager":"TimerManager","../Utils/TimeUtil":"TimeUtil","../Utils/Utils":"Utils"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"b1127RVbttBWpp0X0FHmaWq","AudioManager");var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AudioMgr=n.AudioManager=n.AudioType=void 0;var i,r=t("../Resources/LoaderManager"),s=t("../Utils/LocalStorageUtils"),c=t("../Utils/Logger");(function(t){t.EAudio_BGM="Bgm",t.EAudio_UI="UI",t.EAudio_Voice="Effect",t.EAudio_VoiceLoop="EffectLoop"})(i=n.AudioType||(n.AudioType={}));var l=function(){function t(){this.bgmVolume=1,this.sfxVolume=1,this.bgmAudioID=-1,this.effectAudioID=-1,this.playing=!1,this.bgmVolume=1,this.sfxVolume=1,this.bgmAudioID=-1,this.effectAudioID=-1,this.playing=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(){var t=s.LocalStorageUtils.getFloat("bgmVolume");null==t&&null==t||(this.bgmVolume=t),null==(t=s.LocalStorageUtils.getFloat("sfxVolume"))&&null==t||(this.sfxVolume=t),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()}),s.LocalStorageUtils.setBoolean("musicState",!0)},t.prototype.getUrl=function(t,e){return"Sound/"+e+"/"+t},t.prototype.playBGM=function(t,e,n){return void 0===n&&(n=!0),a(this,void 0,void 0,function(){var a,i;return o(this,function(o){switch(o.label){case 0:return a=this.getUrl(t,e),this.bgmVolume>0?(cc.log(a),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),[4,r.LoaderManager.getInstance().loadRawAsset(a)]):[3,2];case 1:(i=o.sent())&&(this.playing=!0,this.bgmAudioID=cc.audioEngine.playMusic(i,n)),o.label=2;case 2:return[2]}})})},t.prototype.stopBGM=function(){this.bgmAudioID>=0&&(this.playing=!1,cc.audioEngine.stop(this.bgmAudioID))},t.prototype.resumeBgMusic=function(){null!=this.bgmAudioID&&cc.audioEngine.resume(this.bgmAudioID)},t.prototype.playSFX=function(t,e){return a(this,void 0,void 0,function(){var n,a,s;return o(this,function(o){switch(o.label){case 0:return n=this.getUrl(t,e),this.sfxVolume>0?[4,r.LoaderManager.getInstance().loadRawAsset(n)]:[3,2];case 1:(a=o.sent())&&(s=0,e==i.EAudio_VoiceLoop?this.effectAudioID=cc.audioEngine.playEffect(a,!0):s=cc.audioEngine.playEffect(a,!1),cc.audioEngine.setFinishCallback(s,function(){cc.loader.release(a)})),o.label=2;case 2:return[2]}})})},t.prototype.stopEffect=function(){c.Logger.logModel(this.effectAudioID,"\u505c\u6b62\u64ad\u653e\u97f3\u6548"),-1!=this.effectAudioID&&cc.audioEngine.stopEffect(this.effectAudioID)},t.prototype.stopMusic=function(){-1!=this.bgmAudioID&&cc.audioEngine.resume(this.bgmAudioID)},t.prototype.setSFXVolume=function(t){this.sfxVolume!==t&&(s.LocalStorageUtils.setNumber("sfxVolume",t),this.sfxVolume=t,cc.audioEngine.setEffectsVolume(t))},t.prototype.setBGMVolume=function(t,e){this.bgmAudioID>=0&&(t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pauseMusic()),(this.bgmVolume!==t||e)&&(s.LocalStorageUtils.setNumber("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setMusicVolume(t))},t.prototype.getSFXVolume=function(){return this.sfxVolume},t.prototype.getBGMVolume=function(){return this.bgmVolume},t.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},t.prototype.save=function(){s.LocalStorageUtils.setNumber("sfxVolume",this.sfxVolume),s.LocalStorageUtils.setNumber("bgmVolume",this.bgmVolume)},t}();n.AudioManager=l,n.AudioMgr=l.getInstance(),cc._RF.pop()},{"../Resources/LoaderManager":"LoaderManager","../Utils/LocalStorageUtils":"LocalStorageUtils","../Utils/Logger":"Logger"}],Base64Util:[function(t,e,n){"use strict";cc._RF.push(e,"fe448mpjVtBa41IgFhj1rV4","Base64Util"),Object.defineProperty(n,"__esModule",{value:!0}),n.Base64Util=void 0;var a=function(){function t(){}return t.encode=function(t){for(var e=new Uint8Array(t),n=e.length,a="",i=0;i<n;i+=3)a+=o[e[i]>>2],a+=o[(3&e[i])<<4|e[i+1]>>4],a+=o[(15&e[i+1])<<2|e[i+2]>>6],a+=o[63&e[i+2]];return n%3==2?a=a.substring(0,a.length-1)+"=":n%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(t){var e=.75*t.length,n=t.length,a=0,o=0,r=0,s=0,c=0;"="===t[t.length-1]&&(e--,"="===t[t.length-2]&&e--);for(var l=new ArrayBuffer(e),u=new Uint8Array(l),p=0;p<n;p+=4)o=i[t.charCodeAt(p)],r=i[t.charCodeAt(p+1)],s=i[t.charCodeAt(p+2)],c=i[t.charCodeAt(p+3)],u[a++]=o<<2|r>>4,u[a++]=(15&r)<<4|s>>2,u[a++]=(3&s)<<6|63&c;return l},t}();n.Base64Util=a;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),r=0;r<o.length;r++)i[o.charCodeAt(r)]=r;cc._RF.pop()},{}],BaseScene:[function(t,e,n){"use strict";cc._RF.push(e,"0d766a6hyFHnLHEctT4ruB9","BaseScene");var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e);function a(n){e[n]=t[n]&&function(e){return new Promise(function(a,i){o(a,i,(e=t[n](e)).done,e.value)})}}function o(t,e,n,a){Promise.resolve(a).then(function(e){t({value:e,done:n})},e)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseScene=void 0;var r=t("../../../Config/GameConfig"),s=t("../../Pool/GameObjectPool"),c=t("../../Resources/LoaderManager"),l=function(){function t(){this.scene_config=null,this.sceneAssetsName="LaunchScene",this.preload_resources=new Map,this.preload_prefab=new Map,this.OnCreate()}return t.prototype.OnCreate=function(){},t.prototype.AddPreloadResource=function(t,e,n){null!=t&&(e===cc.Prefab?this.preload_prefab.set(t,n):this.preload_resources.set(t,e))},t.prototype.OnEnter=function(){},t.prototype.OnPrepare=function(t){var e,n,l,u;return a(this,void 0,void 0,function(){var a,p,h,f,m,d,_,g,I,y,E,v,M;return o(this,function(o){switch(o.label){case 0:if(a=this.preload_resources.size,p=this.preload_prefab.size,(h=a+p)<=0)return t(1),[2];f=1/h,m=0,d=function(){var e=m*f;cc.log("BaseScene OnPrepare preload_prefab progressCallback = ",e),t(e)},o.label=1;case 1:o.trys.push([1,7,8,13]),_=i(this.preload_resources),o.label=2;case 2:return[4,_.next()];case 3:return(g=o.sent()).done?[3,6]:(v=g.value,[4,c.LoaderManager.getInstance().PreloadRawAsset(v[0])]);case 4:o.sent()?r.GameConfig.Debug&&cc.log("BaseScene  OnPrepare  preload_resources path =",v[0],"load \u6210\u529f"):cc.error("BaseScene  OnPrepare  preload_resources path =",v[0],"load \u5931\u8d25"),m+=1,cc.log("BaseScene OnPrepare preload_resources finish_count = ",m),d(),o.label=5;case 5:return[3,2];case 6:return[3,13];case 7:return I=o.sent(),e={error:I},[3,13];case 8:return o.trys.push([8,,11,12]),g&&!g.done&&(n=_.return)?[4,n.call(_)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(e)throw e.error;return[7];case 12:return[7];case 13:o.trys.push([13,19,20,25]),y=i(this.preload_prefab),o.label=14;case 14:return[4,y.next()];case 15:return(E=o.sent()).done?[3,18]:(v=E.value,[4,s.GameObjectPoolInstance.PreLoadGameObject2Async(v[0],v[1],this,function(){m+=1,r.GameConfig.Debug&&cc.log("BaseScene OnPrepare preload_prefab finish_count = ",v[0],m),d()})]);case 16:o.sent(),o.label=17;case 17:return[3,14];case 18:return[3,25];case 19:return M=o.sent(),l={error:M},[3,25];case 20:return o.trys.push([20,,23,24]),E&&!E.done&&(u=y.return)?[4,u.call(y)]:[3,22];case 21:o.sent(),o.label=22;case 22:return[3,24];case 23:if(l)throw l.error;return[7];case 24:return[7];case 25:return[2]}})})},t.prototype.OnComplete=function(){},t.prototype.OnLeave=function(){},t.prototype.OnDestroy=function(){this.sceneAssetsName=null,this.preload_resources=null,this.preload_prefab=null},t}();n.BaseScene=l,cc._RF.pop()},{"../../../Config/GameConfig":"GameConfig","../../Pool/GameObjectPool":"GameObjectPool","../../Resources/LoaderManager":"LoaderManager"}],BattleScene:[function(t,e,n){"use strict";cc._RF.push(e,"4ad3eenYhNKgJDqqHR7sC0M","BattleScene");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BattleScene=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnCreate=function(){t.prototype.OnCreate.call(this),this.AddPreloadResource("UI/View/UIBattleWindows",cc.Prefab,1)},e.prototype.OnComplete=function(){t.prototype.OnComplete.call(this)},e.prototype.OnLeave=function(){t.prototype.OnLeave.call(this)},e}(t("../../Framework/Scene/Base/BaseScene").BaseScene);n.BattleScene=i,cc._RF.pop()},{"../../Framework/Scene/Base/BaseScene":"BaseScene"}],ByteArray:[function(t,e,n){"use strict";cc._RF.push(e,"b42ebOsQFBOZ67RZq2UExBu","ByteArray"),Object.defineProperty(n,"__esModule",{value:!0}),n.ByteArray=n.EndianConst=n.Endian=void 0;var a,o,i=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();n.Endian=i,function(t){t[t.LITTLE_ENDIAN=0]="LITTLE_ENDIAN",t[t.BIG_ENDIAN=1]="BIG_ENDIAN"}(a=n.EndianConst||(n.EndianConst={})),function(t){t[t.SIZE_OF_BOOLEAN=1]="SIZE_OF_BOOLEAN",t[t.SIZE_OF_INT8=1]="SIZE_OF_INT8",t[t.SIZE_OF_INT16=2]="SIZE_OF_INT16",t[t.SIZE_OF_INT32=4]="SIZE_OF_INT32",t[t.SIZE_OF_UINT8=1]="SIZE_OF_UINT8",t[t.SIZE_OF_UINT16=2]="SIZE_OF_UINT16",t[t.SIZE_OF_UINT32=4]="SIZE_OF_UINT32",t[t.SIZE_OF_FLOAT32=4]="SIZE_OF_FLOAT32",t[t.SIZE_OF_FLOAT64=8]="SIZE_OF_FLOAT64"}(o||(o={}));var r=function(){function t(t,e){void 0===e&&(e=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,e<0&&(e=0),this.bufferExtSize=e;var n,a=0;if(t){var o=void 0;t instanceof Uint8Array?(o=t,a=t.length):(a=t.byteLength,o=new Uint8Array(t)),(n=0==e?new Uint8Array(a):new Uint8Array((1+(a/e|0))*e)).set(o)}else n=new Uint8Array(e);this.write_position=a,this._position=0,this._bytes=n,this.data=new DataView(n.buffer),this.endian=i.BIG_ENDIAN}return Object.defineProperty(t.prototype,"endian",{get:function(){return this.$endian==a.LITTLE_ENDIAN?i.LITTLE_ENDIAN:i.BIG_ENDIAN},set:function(t){this.$endian=t==i.LITTLE_ENDIAN?a.LITTLE_ENDIAN:a.BIG_ENDIAN},enumerable:!1,configurable:!0}),t.prototype.setArrayBuffer=function(){},Object.defineProperty(t.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(t){var e,n=t.byteLength,a=new Uint8Array(t),o=this.bufferExtSize;(e=0==o?new Uint8Array(n):new Uint8Array((1+(n/o|0))*o)).set(a),this.write_position=n,this._bytes=e,this.data=new DataView(e.buffer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bytes",{get:function(){return this._bytes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this.data},set:function(t){this.buffer=t.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,t>this.write_position&&(this.write_position=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.write_position},set:function(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)},enumerable:!1,configurable:!0}),t.prototype._validateBuffer=function(t){if(this.data.byteLength<t){var e=this.bufferExtSize,n=void 0;(n=0==e?new Uint8Array(t):new Uint8Array((1+(t/e>>0))*e)).set(this._bytes),this._bytes=n,this.data=new DataView(n.buffer)}},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0},t.prototype.readBoolean=function(){if(this.validate(o.SIZE_OF_BOOLEAN))return!!this._bytes[this.position++]},t.prototype.readByte=function(){if(this.validate(o.SIZE_OF_INT8))return this.data.getInt8(this.position++)},t.prototype.readBytes=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),t){var a=this._position,o=this.write_position-a;if(o<0)cc.log("[readBytes]\u9519\u8bef 1025");else{if(0==n)2!=o&&(n=o);else if(n>o)return void cc.log("[readBytes]\u9519\u8bef 1025");t.validateBuffer(e+n),t._bytes.set(this._bytes.subarray(a,a+n),e),this.position+=n}}},t.prototype.readDouble=function(){if(this.validate(o.SIZE_OF_FLOAT64)){var t=this.data.getFloat64(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_FLOAT64,t}},t.prototype.readFloat=function(){if(this.validate(o.SIZE_OF_FLOAT32)){var t=this.data.getFloat32(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_FLOAT32,t}},t.prototype.readInt=function(){if(this.validate(o.SIZE_OF_INT32)){var t=this.data.getInt32(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_INT32,t}},t.prototype.readShort=function(){if(this.validate(o.SIZE_OF_INT16)){var t=this.data.getInt16(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_INT16,t}},t.prototype.readUnsignedByte=function(){if(this.validate(o.SIZE_OF_UINT8))return this._bytes[this.position++]},t.prototype.readUnsignedInt=function(){if(this.validate(o.SIZE_OF_UINT32)){var t=this.data.getUint32(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_UINT32,t}},t.prototype.readUnsignedShort=function(){if(this.validate(o.SIZE_OF_UINT16)){var t=this.data.getUint16(this._position,this.$endian==a.LITTLE_ENDIAN);return this.position+=o.SIZE_OF_UINT16,t}},t.prototype.readUTF=function(){var t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""},t.prototype.readUTFBytes=function(t){if(this.validate(t)){var e=this.data,n=new Uint8Array(e.buffer,e.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(n)}},t.prototype.writeBoolean=function(t){this.validateBuffer(o.SIZE_OF_BOOLEAN),this._bytes[this.position++]=+t},t.prototype.writeByte=function(t){this.validateBuffer(o.SIZE_OF_INT8),this._bytes[this.position++]=255&t},t.prototype.writeBytes=function(t,e,n){var a;void 0===e&&(e=0),void 0===n&&(n=0),e<0||n<0||(a=0==n?t.length-e:Math.min(t.length-e,n))>0&&(this.validateBuffer(a),this._bytes.set(t._bytes.subarray(e,e+a),this._position),this.position=this._position+a)},t.prototype.writeDouble=function(t){this.validateBuffer(o.SIZE_OF_FLOAT64),this.data.setFloat64(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_FLOAT64},t.prototype.writeFloat=function(t){this.validateBuffer(o.SIZE_OF_FLOAT32),this.data.setFloat32(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_FLOAT32},t.prototype.writeInt=function(t){this.validateBuffer(o.SIZE_OF_INT32),this.data.setInt32(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_INT32},t.prototype.writeShort=function(t){this.validateBuffer(o.SIZE_OF_INT16),this.data.setInt16(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_INT16},t.prototype.writeUnsignedInt=function(t){this.validateBuffer(o.SIZE_OF_UINT32),this.data.setUint32(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_UINT32},t.prototype.writeUnsignedShort=function(t){this.validateBuffer(o.SIZE_OF_UINT16),this.data.setUint16(this._position,t,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_UINT16},t.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),n=e.length;this.validateBuffer(o.SIZE_OF_UINT16+n),this.data.setUint16(this._position,n,this.$endian==a.LITTLE_ENDIAN),this.position+=o.SIZE_OF_UINT16,this._writeUint8Array(e,!1)},t.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},t.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},t.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0);var n=this._position,a=n+t.length;e&&this.validateBuffer(a),this.bytes.set(t,n),this.position=a},t.prototype.validate=function(t){var e=this._bytes.length;if(e>0&&this._position+t<=e)return!0;cc.log("[validate]\u9519\u8bef 1025")},t.prototype.validateBuffer=function(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)},t.prototype.encodeUTF8=function(t){for(var e=0,n=this.stringToCodePoints(t),a=[];n.length>e;){var o=n[e++];if(this.inRange(o,55296,57343))this.encoderError(o);else if(this.inRange(o,0,127))a.push(o);else{var i=void 0,r=void 0;for(this.inRange(o,128,2047)?(i=1,r=192):this.inRange(o,2048,65535)?(i=2,r=224):this.inRange(o,65536,1114111)&&(i=3,r=240),a.push(this.div(o,Math.pow(64,i))+r);i>0;){var s=this.div(o,Math.pow(64,i-1));a.push(128+s%64),i-=1}}}return new Uint8Array(a)},t.prototype.decodeUTF8=function(t){for(var e,n=0,a="",o=0,i=0,r=0,s=0;t.length>n;){var c=t[n++];if(c==this.EOF_byte)e=0!=i?this.decoderError(!1):this.EOF_code_point;else if(0==i)this.inRange(c,0,127)?e=c:(this.inRange(c,194,223)?(i=1,s=128,o=c-192):this.inRange(c,224,239)?(i=2,s=2048,o=c-224):this.inRange(c,240,244)?(i=3,s=65536,o=c-240):this.decoderError(!1),o*=Math.pow(64,i),e=null);else if(this.inRange(c,128,191))if(r+=1,o+=(c-128)*Math.pow(64,i-r),r!==i)e=null;else{var l=o,u=s;o=0,i=0,r=0,s=0,e=this.inRange(l,u,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,c)}else o=0,i=0,r=0,s=0,n--,e=this.decoderError(!1,c);null!==e&&e!==this.EOF_code_point&&(e<=65535?e>0&&(a+=String.fromCharCode(e)):(e-=65536,a+=String.fromCharCode(55296+(e>>10&1023)),a+=String.fromCharCode(56320+(1023&e))))}return a},t.prototype.encoderError=function(t){cc.log("[encoderError]\u9519\u8bef 1026 "+t)},t.prototype.decoderError=function(t,e){return t&&cc.log("[decoderError]\u9519\u8bef 1027"),e||65533},t.prototype.inRange=function(t,e,n){return e<=t&&t<=n},t.prototype.div=function(t,e){return Math.floor(t/e)},t.prototype.stringToCodePoints=function(t){for(var e=[],n=0,a=t.length;n<t.length;){var o=t.charCodeAt(n);if(this.inRange(o,55296,57343))if(this.inRange(o,56320,57343))e.push(65533);else if(n==a-1)e.push(65533);else{var i=t.charCodeAt(n+1);if(this.inRange(i,56320,57343)){var r=1023&o,s=1023&i;n+=1,e.push(65536+(r<<10)+s)}else e.push(65533)}else e.push(o);n+=1}return e},t}();n.ByteArray=r,cc._RF.pop()},{}],CCTweenEase:[function(t,e,n){"use strict";cc._RF.push(e,"72f70zMOtpAeqG550l5rpX0","CCTweenEase"),Object.defineProperty(n,"__esModule",{value:!0}),n.CCTweenEase=void 0;var a=t("../Components/easeConst"),o=function(){function t(){this.fromX=0,this.fromY=0,this.fromScaleX=1,this.fromScaleY=1,this.fromAlpha=255,this.fromAngle=0,this.toX=0,this.toY=0,this.toScaleX=1,this.toScaleY=1,this.toAlpha=255,this.toAngle=0,this.deltaAngle=0,this.toSpwan=null,this.fromSpwan=null,this.easeModl=null,this.params={},this.isTo=!0,this.animCallFun=cc.callFunc(function(){this.params.callback&&this.params.callback.call(this.params.thisObj),this.reset()},this),this.animReverseCallFun=cc.callFunc(function(){this.params.callback&&this.params.callback.call(this.params.thisObj),this.reset()},this),this.params.TargetNode=null,this.params.RelativeX=0,this.params.RelativeY=0,this.params.Xscale=1,this.params.Yscale=1,this.params.Duration=0,this.params.Delay=0,this.params.Angle=0,this.params.repeatPlay=1,this.params.Alpha=255,this.params.fadeInType=0,this.params.fadeOutType=0,this.params.AnimEase=a.default.animEase.normal,this.params.callback=null}return t.create=function(e,n){void 0===n&&(n=!0);var a=new t;a.params.TargetNode=void 0===e.TargetNode?a.params.TargetNode:e.TargetNode,a.params.RelativeX=void 0===e.RelativeX?a.params.RelativeX:e.RelativeX,a.params.RelativeY=void 0===e.RelativeY?a.params.RelativeY:e.RelativeY,a.params.Xscale=void 0===e.Xscale?a.params.Xscale:e.Xscale,a.params.Yscale=void 0===e.Yscale?a.params.Yscale:e.Yscale,a.params.Duration=void 0===e.Duration?a.params.Duration:e.Duration,a.params.Delay=void 0===e.Delay?a.params.Delay:e.Delay,a.params.Angle=void 0===e.Angle?a.params.Angle:e.Angle,a.params.repeatPlay=void 0===e.repeatPlay?a.params.repeatPlay:e.repeatPlay,a.params.Alpha=void 0===e.Alpha?a.params.Alpha:e.Alpha,a.params.fadeInType=void 0===e.fadeInType?a.params.fadeInType:e.fadeInType,a.params.fadeOutType=void 0===e.fadeOutType?a.params.fadeOutType:e.fadeOutType,a.params.AnimEase=void 0===e.AnimEase?a.params.AnimEase:e.AnimEase,a.params.callback=void 0===e.callback?a.params.callback:e.callback,a.params.thisObj=void 0===e.thisObj?a.params.thisObj:e.thisObj,a.isTo=n,a.init()},t.prototype.init=function(){this.params.TargetNode?(this.toX=this.params.TargetNode.x,this.toY=this.params.TargetNode.y,this.toScaleX=this.params.TargetNode.scaleX,this.toScaleY=this.params.TargetNode.scaleY,this.toAngle=this.params.TargetNode.angle,this.toAlpha=this.params.TargetNode.opacity,this.isTo&&(this.params.TargetNode.x=this.params.TargetNode.x+this.params.RelativeX,this.params.TargetNode.y=this.params.TargetNode.y+this.params.RelativeY,this.params.TargetNode.scaleX=this.params.Xscale,this.params.TargetNode.scaleY=this.params.Yscale,this.params.TargetNode.angle=this.params.Angle,this.params.TargetNode.opacity=this.params.Alpha),this.fromX=this.params.TargetNode.x+this.params.RelativeX,this.fromY=this.params.TargetNode.y+this.params.RelativeY,this.fromScaleX=this.params.Xscale,this.fromScaleY=this.params.Yscale,this.fromAngle=this.params.Angle,this.fromAlpha=this.params.Alpha,this.toAngle>this.fromAngle?this.deltaAngle=this.toAngle-this.fromAngle:this.fromAngle-this.toAngle&&(this.deltaAngle=this.fromAngle-this.toAngle),this.initAnim(),this.runAnim()):cc.warn("CCTweenEase:init() TargetNode is null")},t.prototype.initAnim=function(){this.toSpwan=cc.spawn(cc.moveTo(this.params.Duration,cc.v2(this.toX,this.toY)),cc.fadeTo(this.params.Duration,this.toAlpha),cc.scaleTo(this.params.Duration,this.toScaleX,this.toScaleY),cc.rotateBy(this.params.Duration,this.toAngle)),this.fromSpwan=cc.spawn(cc.moveTo(this.params.Duration,cc.v2(this.fromX,this.fromY)),cc.fadeTo(this.params.Duration,this.fromAlpha),cc.scaleTo(this.params.Duration,this.fromScaleX,this.fromScaleY),cc.rotateBy(this.params.Duration,-this.fromAngle)),this.params.AnimEase!=a.default.animEase.normal&&(this.easeModl=a.default.easeMap[this.params.AnimEase],this.toSpwan=this.toSpwan.easing(this.easeModl),this.fromSpwan=this.fromSpwan.easing(this.easeModl))},t.prototype.runAnim=function(){this.isTo?this.playAnim():this.reverseAnim()},t.prototype.playAnim=function(){var t,e;1==this.params.fadeInType&&(t=cc.fadeIn(this.params.Duration)),1==this.params.fadeOutType&&(e=cc.fadeOut(this.params.Duration));var n=cc.sequence(cc.delayTime(this.params.Delay),this.toSpwan,e,t,this.animCallFun);0==this.params.repeatPlay?this.params.TargetNode.runAction(cc.repeatForever(n)):this.params.repeatPlay>1?this.params.TargetNode.runAction(cc.repeat(n,this.params.repeatPlay)):this.params.TargetNode.runAction(n)},t.prototype.reverseAnim=function(){var t,e;1==this.params.fadeInType&&(t=cc.fadeIn(this.params.Duration)),1==this.params.fadeOutType&&(e=cc.fadeOut(this.params.Duration));var n=cc.sequence(this.fromSpwan,e,t,this.animReverseCallFun);0==this.params.repeatPlay?this.params.TargetNode.runAction(cc.repeatForever(n)):this.params.repeatPlay>1?this.params.TargetNode.runAction(cc.repeat(n,this.params.repeatPlay)):this.params.TargetNode.runAction(n)},t.prototype.reset=function(){this.params.TargetNode.stopAllActions(),this.params.TargetNode.x=this.toX,this.params.TargetNode.y=this.toY,this.params.TargetNode.scaleX=this.toScaleX,this.params.TargetNode.scaleY=this.toScaleY,this.params.TargetNode.angle=this.toAngle,this.params.TargetNode.opacity=this.toAlpha},t}();n.CCTweenEase=o,cc._RF.pop()},{"../Components/easeConst":"easeConst"}],Config:[function(t,e,n){"use strict";cc._RF.push(e,"bc064OHBU5A+7cmslywH0CI","Config"),Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0,function(t){t.UI_POOL_MAX_SIZE=10,t.MEVENT_POOL_MAX_SIZE=10,t.isSSL=!1,t.isDebug=!1,function(t){t[t.TYPE_BASE=0]="TYPE_BASE",t[t.TYPE_NORMAL=1]="TYPE_NORMAL",t[t.TYPE_POP=2]="TYPE_POP",t[t.TYPE_TIP=3]="TYPE_TIP",t[t.TYPE_MESSAGE=4]="TYPE_MESSAGE",t[t.TYPE_NEWBIE_GUIDE=5]="TYPE_NEWBIE_GUIDE"}(t.UI_LAYER_TYPE||(t.UI_LAYER_TYPE={})),t.UI_LAYER_TYPE_MAP=["BaseLayer","NormalLayer","PopLayer","TipLayer","MessageLayer","NewGuideLayer"],function(t){t[t.None=1]="None",t[t.FadeIn=2]="FadeIn",t[t.DropDown=3]="DropDown",t[t.PopUp=4]="PopUp",t[t.LeftIn=5]="LeftIn",t[t.RightIn=6]="RightIn"}(t.UI_ANIM_TYPE||(t.UI_ANIM_TYPE={})),function(t){t[t.LOADING=0]="LOADING",t[t.FINISH=1]="FINISH"}(t.SceneState||(t.SceneState={})),function(t){t.NONE="NONE",t.CALLBACK="CALLBACK",t.SCENE="SCENE"}(t.CommandType||(t.CommandType={})),t.APP_ROOT="Prefabs/Common/AppRoot",t.MAP_ROOT="Prefabs/Common/MapRoot",t.UI_ROOT="Prefabs/Common/UIRoot",t.TABLE_PATH="Table"}(n.Config||(n.Config={})),cc._RF.pop()},{}],EliminationCell:[function(t,e,n){"use strict";cc._RF.push(e,"b5809fJYJ5GvZESZ13Q1rGV","EliminationCell");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Config/GameEnum"),s=t("../../../../Config/ResConfig"),c=t("../../../../Framework/Audio/AudioManager"),l=t("../../../../Framework/Utils/Tool"),u=t("../../../Data/EliminationData"),p=cc._decorator.ccclass,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._init=!1,e}return o(e,t),e.prototype.start=function(){},e.prototype.initUI=function(){this._init||(this._init=!0,this.bgNode=this.node.getChildByName("Node"),this.typeSprite=this.bgNode.getChildByName("Type").getComponent(cc.Sprite),this.squareIcon=this.bgNode.getChildByName("squareIcon").getComponent(cc.Sprite),this.itemIcon=this.bgNode.getChildByName("itemIcon"),this.icon=this.bgNode.getChildByName("icon").getComponent(cc.Sprite),this.test=this.bgNode.getChildByName("test").getComponent(cc.Label),this.animation=this.node.getComponent(cc.Animation),this.test.node.active=!1)},e.prototype.initData=function(t,e,n){this.initUI(),this.targetComp=n,this.campType=n.getCurrentCamp(),this.cellData=u.EliminationDataManager.getCellData(t,e),this.updateType(),this.updateState(),this.updateSquare(),this.updateItem()},e.prototype.getCurrentType=function(){return this.cellData.type==r.GameEnum.CellType.BLUE?this.campType==r.GameEnum.CampType.Red?r.GameEnum.CellType.RED:r.GameEnum.CellType.BLUE:this.cellData.type==r.GameEnum.CellType.RED?this.campType==r.GameEnum.CampType.Red?r.GameEnum.CellType.BLUE:r.GameEnum.CellType.RED:this.cellData.type},e.prototype.updateType=function(){var t;switch(this.cellData.type){case r.GameEnum.CellType.BLUE:t=this.campType==r.GameEnum.CampType.Red?s.ResConfig.UI_ELIMINATE.RED:s.ResConfig.UI_ELIMINATE.BLUE;break;case r.GameEnum.CellType.GREEN:t=s.ResConfig.UI_ELIMINATE.GREEN;break;case r.GameEnum.CellType.ORANGE:t=s.ResConfig.UI_ELIMINATE.ORANGE;break;case r.GameEnum.CellType.PURPLE:t=s.ResConfig.UI_ELIMINATE.PURPLE;break;case r.GameEnum.CellType.RED:t=this.campType==r.GameEnum.CampType.Red?s.ResConfig.UI_ELIMINATE.BLUE:s.ResConfig.UI_ELIMINATE.RED;break;case r.GameEnum.CellType.YELLOW:t=s.ResConfig.UI_ELIMINATE.YELLOW}t&&(this.path=t,l.default.setSprite(this.typeSprite,t))},e.prototype.updatePosition=function(t,e){void 0===e&&(e=.2),this.node.setScale(.9);var n=this.getCellIndex(),a=this.targetComp.cellPosDict[n];if(!a.equals(this.node.position)){var o=a.sub(this.node.position).mag()/this.node.height,i=.01*o,r=cc.tween(this.node).by(i,{position:cc.v3(0,2.2*o)},{easing:"sineInOut"}),s=cc.tween(this.node).by(i,{position:cc.v3(0,2.2*-o)},{easing:"sineIn"}),l=cc.tween(this.node).by(i,{position:cc.v3(0,o)},{easing:"sineInOut"}),u=cc.tween(this.node).by(i,{position:cc.v3(0,-o)},{easing:"sineIn"}),p=cc.tween(this.node).sequence(r,s,l,u);cc.tween(this.node).to(e,{position:a},{easing:"sineIn"}).then(p).call(function(){t&&t(),this.animation.play("elimination_movedown_animation"),c.AudioMgr.playSFX("sfx_battle_fallingdown",c.AudioType.EAudio_Voice)}.bind(this)).start()}},e.prototype.setPositionFromNodes=function(t,e){var n=this;this.node.setScale(.9);for(var a=cc.tween(this.node),o=0,i=t;o<i.length;o++){var r=i[o];a.to(.2,{position:this.targetComp.cellPosDict[r]}).call(function(){n.animation.play("elimination_movedown_animation"),c.AudioMgr.playSFX("sfx_battle_fallingdown",c.AudioType.EAudio_Voice)})}if(t.length>0){var s=.05*this.node.height,l=.01*s,u=cc.tween(this.node).by(l,{position:cc.v3(0,s)},{easing:"sineInOut"}),p=cc.tween(this.node).by(l,{position:cc.v3(0,-s)},{easing:"sineIn"}),h=cc.tween(this.node).sequence(u,p);a.then(h)}a.call(function(){e&&e()}).start()},e.prototype.getCellIndex=function(){return u.EliminationDataManager.getCellIndex(this.cellData.row,this.cellData.column)},e.prototype.updateState=function(){var t="";if(1!=this.cellData.state)switch(this.cellData.state){case r.GameEnum.CellCombType.COMBO_BOOM:t="_bomb";break;case r.GameEnum.CellCombType.COMBO_ROW:t="_about";break;case r.GameEnum.CellCombType.COMBO_COLUMN:t="_about_up";break;case r.GameEnum.CellCombType.COMBO_SAME:t="_random";break;case r.GameEnum.CellState.COMBO_CHANGE_TYPE:t="_random"}t&&(l.default.setSprite(this.typeSprite,this.path+t),this.animation.play("elimination_create_animation"),c.AudioMgr.playSFX("sfx_battle_specialelmappear",c.AudioType.EAudio_Voice)),this.test.string=this.cellData.type+":"+this.cellData.state},e.prototype.updateSquare=function(){var t="";switch(this.cellData.square){case r.GameEnum.SquareType.ICE1:t="ice-01";break;case r.GameEnum.SquareType.ICE2:t="ice-02";break;case r.GameEnum.SquareType.Iron:t="wire"}t?(this.squareIcon.node.active=!0,this.squareIcon.spriteFrame=this.targetComp.UIParam_Instance.cellAtlas.getSpriteFrame(t)):this.squareIcon.node.active=!1},e.prototype.updateItem=function(){var t="";switch(this.cellData.item){case r.GameEnum.ItemType.PROP1:t="icon_1";break;case r.GameEnum.ItemType.PROP2:t="icon_2";break;case r.GameEnum.ItemType.PROP3:t="icon_3";break;case r.GameEnum.ItemType.PROP4:t="icon_4";break;case r.GameEnum.ItemType.PROP5:t="icon_5";break;case r.GameEnum.ItemType.PROP6:t="icon_6";break;case r.GameEnum.ItemType.PROP7:t="icon_7";break;case r.GameEnum.ItemType.PROP8:t="icon_8"}t?(this.itemIcon.active=!0,this.icon.spriteFrame=this.targetComp.UIParam_Instance.cellAtlas.getSpriteFrame(t)):this.itemIcon.active=!1},e.prototype.setMoveAnimation=function(){this.animation.play("elimination_switch_animation")},e.prototype.setShuffleAnimation=function(t){var e=this;this.scheduleOnce(function(){e.updateType(),e.updateState(),e.updateSquare(),e.updateItem(),e.animation.play("elimination_shuffle_animation")},t)},e.prototype.setGameOverAnimation=function(t,e){var n=this;this.scheduleOnce(function(){t?l.default.setSprite(n.typeSprite,s.ResConfig.UI_ELIMINATE.BLUE):l.default.setSprite(n.typeSprite,s.ResConfig.UI_ELIMINATE.RED),n.animation.play("elimination_gameover_animation")},e)},i([p],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Utils/Tool":"Tool","../../../Data/EliminationData":"EliminationData"}],EliminationData:[function(t,e,n){"use strict";cc._RF.push(e,"b8fbb8qWCJIcKAaxVX5052a","EliminationData");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.EliminationDataManager=void 0;var o=t("../../Config/GameEnum"),i=t("../../Framework/Utils/Tool"),r=t("../../Framework/Event/EventManager"),s=t("../../Framework/Event/EventMessages"),c=t("../../Framework/Utils/Logger"),l=cc._decorator.ccclass,u=function(){function t(){this.maxRow=7,this.maxColumn=7,this.isOpenEfffect=!1,this.id2Index={},this.index2Id={},this.cellList=[],this.isEliminating=!1,this.preComboDict={},this.preEliminationDict={},this.preObstacleDict={},this.preSpecialComboList=[],this.updateStateList=[],this.updateTypeList=[],this.forbidDict={},this.lastSpecialList=[],this.tipDict={},this.createSpecialList=[],this.comboCount=0,this.eliminationAllCount=0,this.effectDict=[],this.currentStep=0,this.exchangeIndex1=0,this.exchangeIndex2=0,this.lastingExchangeIndex1=0,this.lastingExchangeIndex2=0,this.loginList=[]}var e;return e=t,t.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},t.prototype.initLevelData=function(t){this.cleanData(),this.cellList=t,this.loginList=[],this.isEliminating=!1,this.initCellList(),this.cleanEliminationData()},t.prototype.setRowAndColumn=function(t,e){this.maxRow=t,this.maxColumn=e},t.prototype.cleanData=function(){this.preSpecialComboList.length=0,this.preEliminationDict={},this.preObstacleDict={},this.updateStateList.length=0,this.updateTypeList.length=0,this.createSpecialList.length=0,this.lastSpecialList.length=0,this.tipDict={},this.forbidDict={},this.preComboDict={},this.comboCount=0,this.eliminationAllCount=0,this.effectDict=[],this.currentStep=0,this.itemTipDict={},this.cellList.length=0,this.loginList.length=0},t.prototype.cleanEliminationData=function(){this.preSpecialComboList.length=0,this.preEliminationDict={},this.preObstacleDict={},this.updateStateList.length=0,this.updateTypeList.length=0,this.createSpecialList.length=0,this.preComboDict={},this.effectDict=[]},t.prototype.initCellList=function(){this.forbidDict={};for(var t=0;t<this.cellList.length;t++){var e=this.cellList[t],n=this.getRowColumn(t);e.row=n.row,e.column=n.column,e.eliminationType=o.GameEnum.CellEliminationType.NONE,e.state===o.GameEnum.CellState.FORBID?(e.state=o.GameEnum.CellState.NONE,this.forbidDict[t]=!0,e.type=o.GameEnum.CellType.RED):(e.state,o.GameEnum.CellState.COMBO_SAME)}},t.prototype.getRowColumn=function(t){var e={};return e.row=Math.floor(t/this.maxColumn),e.column=t-e.row*this.maxColumn,e},t.prototype.getCellIndex=function(t,e){return t*this.maxColumn+e},t.prototype.getCellData=function(t,e){var n=this.getCellIndex(t,e);return this.cellList[n]},t.prototype.getIsValid=function(t,e){if(t>-1&&t<this.maxRow&&e>-1&&e<this.maxColumn){var n=this.getCellIndex(t,e);return this.getIsValidWithIndex(n)}return!1},t.prototype.getIsValidWithIndex=function(t){return!this.forbidDict[t]&&(!!this.cellList[t]&&this.cellList[t].square==o.GameEnum.SquareType.NORMAL)},t.prototype.getIsCanMove=function(t,e){var n=this.getCellIndex(t,e);return this.getIsCanMoveWithIndex(n)},t.prototype.getIsCanMoveWithIndex=function(t){return this.getIsValidWithIndex(t)},t.prototype.onlyExchangeCell=function(t,e,n,a){var o=this.getCellIndex(t,e),i=this.getCellIndex(n,a),r=this.cellList[o],s=this.cellList[i];r.row=n,r.column=a,this.cellList[this.getCellIndex(n,a)]=r,s.row=t,s.column=e,this.cellList[this.getCellIndex(t,e)]=s},t.prototype.exchangeCell=function(t,e,n,a){if(!this.getIsCanMove(t,e)||!this.getIsCanMove(n,a))return!1;var i=this.getCellIndex(t,e),r=this.getCellIndex(n,a);this.exchangeIndex1=i,this.exchangeIndex2=r;var s=this.cellList[i],c=this.cellList[r];return this.onlyExchangeCell(t,e,n,a),s.state===o.GameEnum.CellState.COMBO_SAME&&c.state===o.GameEnum.CellState.COMBO_SAME&&this.eliminationAll(1),s.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE&&c.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE&&this.eliminationAll(4),s.state===o.GameEnum.CellState.COMBO_SAME&&c.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE||s.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE&&c.state===o.GameEnum.CellState.COMBO_SAME?this.eliminationAll(2):s.state===o.GameEnum.CellState.COMBO_SAME||c.state===o.GameEnum.CellState.COMBO_SAME?this.eliminationOneType(s,c):s.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE||c.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE?this.changeOneType(s,c):s.state===o.GameEnum.CellState.COMBO_ROW&&c.state===o.GameEnum.CellState.COMBO_COLUMN||s.state===o.GameEnum.CellState.COMBO_COLUMN&&c.state===o.GameEnum.CellState.COMBO_ROW?this.eliminationRowColumn(s,c):s.state===o.GameEnum.CellState.COMBO_ROW&&c.state===o.GameEnum.CellState.COMBO_ROW||s.state===o.GameEnum.CellState.COMBO_COLUMN&&c.state===o.GameEnum.CellState.COMBO_COLUMN?this.eliminationRowColumn(s,c,!0):s.state===o.GameEnum.CellState.COMBO_BOOM&&c.state===o.GameEnum.CellState.COMBO_ROW||c.state===o.GameEnum.CellState.COMBO_BOOM&&s.state===o.GameEnum.CellState.COMBO_ROW?this.eliminationBoomAndRow(s,c):s.state===o.GameEnum.CellState.COMBO_BOOM&&c.state===o.GameEnum.CellState.COMBO_COLUMN||c.state===o.GameEnum.CellState.COMBO_BOOM&&s.state===o.GameEnum.CellState.COMBO_COLUMN?this.eliminationBoomAndColumn(s,c):s.state===o.GameEnum.CellState.COMBO_BOOM&&c.state===o.GameEnum.CellState.COMBO_BOOM?this.eliminationBoomAndBoom(s,c):s.type>o.GameEnum.CellType.NONE&&c.type>o.GameEnum.CellType.NONE&&this.checkElimination(),Object.keys(this.preEliminationDict).length>0||this.preSpecialComboList.length>0?(this.currentStep++,!0):(this.onlyExchangeCell(t,e,n,a),!1)},t.prototype.eliminationAll=function(t){void 0===t&&(t=0),t>0&&(this.eliminationAllCount=t),this.eliminationAllCount--;for(var e=0;e<this.cellList.length;e++){var n=this.cellList[e];n&&(n.state=o.GameEnum.CellState.COMBO,this.preEliminationDict[e]=!0)}},t.prototype.eliminationOneType=function(t,e){var n,a;t.state===o.GameEnum.CellState.COMBO_SAME?(n=e,a=t):(n=t,a=e),a.state=o.GameEnum.CellState.NONE,this.addPreComboList(a,this.getCellIndex(a.row,a.column),o.GameEnum.CellEliminationType.SAME),this.eliminationWithType(n,a,o.GameEnum.CellEliminationType.SAME)},t.prototype.eliminationWithType=function(t,e,n){for(var a=e.type,i=t.state,r=0;r<this.cellList.length;r++){var s=this.cellList[r];if(s&&this.getIsCanMove(s.row,s.column)){if(s.state===o.GameEnum.CellState.COMBO)continue;if(a&&s.type===a&&(s.type=t.type,this.updateTypeList.push(r)),s.type===t.type){s.state===o.GameEnum.CellState.NONE&&(s.state=i),s!==t&&s!==e||(s.state=o.GameEnum.CellState.NONE);var c=this.getCellIndex(e.row,e.column),l=this.getCellIndex(s.row,s.column);this.setSpecialEffect(c,n,l),this.addPreComboList(s,r)}}}},t.prototype.changeOneType=function(t,e){var n,a;t.state===o.GameEnum.CellState.COMBO_CHANGE_TYPE?(n=e,a=t):(n=t,a=e),this.eliminationWithType(n,a,o.GameEnum.CellEliminationType.CHANGE_TYPE)},t.prototype.eliminationRowColumn=function(t,e,n){void 0===n&&(n=!1),n&&(e.state===o.GameEnum.CellState.COMBO_ROW?e.state=o.GameEnum.CellState.COMBO_COLUMN:e.state=o.GameEnum.CellState.COMBO_ROW),this.addPreComboList(t,this.getCellIndex(t.row,t.column)),this.addPreComboList(e,this.getCellIndex(e.row,e.column))},t.prototype.eliminationBoomAndRow=function(t,e){t.state=o.GameEnum.CellState.COMBO_ROW,e.state=o.GameEnum.CellState.COMBO_ROW;for(var n=Math.min(t.row,e.row),a=Math.max(t.row,e.row),i=0,r=0,s=0;s<this.maxRow;s++)for(var c=0;c<this.maxColumn;c++)this.getIsValid(s,c)&&(i=Math.min(s,i),r=Math.max(s,r));for(var l=t.row===e.row?2:1,u=1,p=0;p<l;p++){var h=void 0;0===p?(h=n-u)<i&&(h=a+u,u++):(h=a+u)>r&&(h=n-u);var f=t.column,m=this.getCellIndex(h,f);this.addSpecialList(m,o.GameEnum.CellState.COMBO_ROW),this.addPreComboList(this.cellList[m],m)}this.addPreComboList(t,this.getCellIndex(t.row,t.column)),this.addPreComboList(e,this.getCellIndex(e.row,e.column))},t.prototype.eliminationBoomAndColumn=function(t,e){t.state=o.GameEnum.CellState.COMBO_COLUMN,e.state=o.GameEnum.CellState.COMBO_COLUMN;for(var n=Math.min(t.column,e.column),a=Math.max(t.column,e.column),i=0,r=0,s=0;s<this.maxColumn;s++)for(var c=0;c<this.maxRow;c++)this.getIsValid(c,s)&&(i=Math.min(s,i),r=Math.max(s,r));for(var l=t.column===e.column?2:1,u=1,p=0;p<l;p++){var h=void 0;0===p?(h=n-u)<i&&(h=a+u,u++):(h=a+u)>r&&(h=n-u);var f=t.row,m=this.getCellIndex(f,h);this.addSpecialList(m,o.GameEnum.CellState.COMBO_COLUMN),this.addPreComboList(this.cellList[m],m)}this.addPreComboList(t,this.getCellIndex(t.row,t.column)),this.addPreComboList(e,this.getCellIndex(e.row,e.column))},t.prototype.eliminationBoomAndBoom=function(t,e){this.addPreComboList(t,this.getCellIndex(t.row,t.column)),this.addPreComboList(e,this.getCellIndex(e.row,e.column))},t.prototype.checkElimination=function(){var t=this;this.checkLastSpecial();for(var e=function(e,n,a,o,i){if(!t.getIsValid(e,n))return{};var r=t.getCellData(e,n);return a.type===r.type?o.push(t.getCellIndex(e,n)):(o.length>2&&t.addElimination(o,i),a=r,o.length=0,o.push(t.getCellIndex(e,n))),a},n=0;n<this.maxRow;n++){for(var a=[],i=this.getCellData(n,0),r=0;r<this.maxColumn;r++)i=e(n,r,i,a,o.GameEnum.ComboDirection.HORIZONTAL);a.length>2&&this.addElimination(a,o.GameEnum.ComboDirection.HORIZONTAL)}for(r=0;r<this.maxColumn;r++){for(a=[],i=this.getCellData(0,r),n=0;n<this.maxRow;n++)i=e(n,r,i,a,o.GameEnum.ComboDirection.VERTICAL);a.length>2&&this.addElimination(a,o.GameEnum.ComboDirection.VERTICAL)}this.checkEliminationSpecialState()},t.prototype.addElimination=function(t,e){for(var n=t.length,a=0;a<n;a++){var o=t[a],i=this.preComboDict[o];i?(this.preComboDict.isCross=!0,i.isCross=!0):((i={}).direction=e,i.comboList=[],i.comboLength=n,this.preComboDict[o]=i),i.comboList=i.comboList.concat(t),i.comboLength=Math.max(n,i.comboLength),this.addPreComboList(this.cellList[o],o)}},t.prototype.checkEliminationSpecialState=function(){var t=function(t){for(var e in this.preComboDict){var n=this.preComboDict[e],a=n.comboList,i=n.comboLength,r={index:-1,state:o.GameEnum.CellState.NONE,list:[]};if(t){if(n.isCross){for(var s,c=0;c<a.length;c++){var l=a[c];delete this.preComboDict[l]}s=5===i?o.GameEnum.CellState.COMBO_CHANGE_TYPE:o.GameEnum.CellState.COMBO_BOOM;var u=parseInt(e);this.addSpecialList(u,s),r.state=s,r.index=u}}else{for(c=0;c<a.length;c++)u=a[c],delete this.preComboDict[u];var p=this.setSpecialState(a,n.direction);r.state=p.state,r.index=this.getCellIndex(p.row,p.column)}r.index>-1&&(r.list=a,this.createSpecialList.push(r))}}.bind(this);this.preComboDict.isCross&&(delete this.preComboDict.isCross,t(!0)),t(!1)},t.prototype.checkLastSpecial=function(){for(var t=0;t<this.lastSpecialList.length;t++){var e=this.lastSpecialList[t],n=e.data;switch(e.eliminationType){case o.GameEnum.CellEliminationType.BOOM:n.state===o.GameEnum.CellState.COMBO_BOOM_SECOND?(n.eliminationType=o.GameEnum.CellEliminationType.NONE,this.addPreComboList(n,this.getCellIndex(n.row,n.column))):this.addPreSpecialComboList(n,o.GameEnum.CellEliminationType.BOOM_SECOND)}}this.lastSpecialList.length=0},t.prototype.addPreComboListWithIndex=function(t){var e=this.cellList[t];this.addPreComboList(e,t)},t.prototype.addPreComboList=function(t,e,n){void 0===n&&(n=null);var a=o.GameEnum.CellState.COMBO;switch(t.state){case o.GameEnum.CellState.COMBO_BOOM:a=o.GameEnum.CellState.COMBO_BOOM_SECOND;break;case o.GameEnum.CellState.COMBO_BOOM_SECOND:if(t.eliminationType===o.GameEnum.CellEliminationType.BOOM)return}var i=this.getEliminationType(t);a===o.GameEnum.CellState.COMBO?this.preEliminationDict[e]=!0:this.updateStateList.push(e),t.state=a,t.eliminationType=i,i!==o.GameEnum.CellEliminationType.NORMAL?(this.addPreSpecialComboList(t,i),t.removeType=i):t.removeType&&t.removeType>o.GameEnum.CellEliminationType.NORMAL||(t.removeType=n||i)},t.prototype.getEliminationType=function(t){var e=o.GameEnum.CellEliminationType.NORMAL;switch(t.state){case o.GameEnum.CellState.COMBO_BOOM:e=o.GameEnum.CellEliminationType.BOOM;break;case o.GameEnum.CellState.COMBO_ROW:e=o.GameEnum.CellEliminationType.ROW;break;case o.GameEnum.CellState.COMBO_COLUMN:e=o.GameEnum.CellEliminationType.COLUMN;break;case o.GameEnum.CellState.COMBO_SAME:e=o.GameEnum.CellEliminationType.SAME;break;case o.GameEnum.CellState.COMBO_CHANGE_TYPE:e=o.GameEnum.CellEliminationType.CHANGE_TYPE;break;case o.GameEnum.CellState.COMBO_BOOM_SECOND:e=o.GameEnum.CellEliminationType.BOOM_SECOND}return e},t.prototype.addPreSpecialComboList=function(t,e){void 0===e&&(e=null);var n={};switch(n.eliminationType=e||this.getEliminationType(t),n.eliminationType){case o.GameEnum.CellEliminationType.BOOM:this.lastSpecialList.push(n)}n.data=t,this.preSpecialComboList.push(n)},t.prototype.setSpecialState=function(t,e){if(t.length<4)return o.GameEnum.CellState.NONE;var n=o.GameEnum.CellState.NONE;switch(t.length){case 4:n=e===o.GameEnum.ComboDirection.HORIZONTAL?o.GameEnum.CellState.COMBO_COLUMN:o.GameEnum.CellState.COMBO_ROW;break;default:n=o.GameEnum.CellState.COMBO_SAME}var a=Math.max(t.indexOf(this.exchangeIndex1),t.indexOf(this.exchangeIndex2));a<0&&(a=2);var i=t[a],r=this.cellList[i];if(n===o.GameEnum.CellState.COMBO_SAME){var s=!1;if(e===o.GameEnum.ComboDirection.HORIZONTAL){for(var c=r.row-1;c<r.row+2;c++)if(c!==r.row&&this.getIsValid(c,r.column)&&(u=this.getCellData(c,r.column)).type===r.type){this.addPreComboList(u,this.getCellIndex(c,r.column)),s=!0;break}}else for(var l=r.column-1;l<r.column+2;l++){var u;if(l!==r.column&&this.getIsValid(r.row,l)&&(u=this.getCellData(r.row,l)).type===r.type){s=!0,this.addPreComboList(u,this.getCellIndex(r.row,l));break}}s?n=o.GameEnum.CellState.COMBO_CHANGE_TYPE:this.updateTypeList.push(i)}return r.state===o.GameEnum.CellState.COMBO?this.addSpecialList(i,n):r.state=n,r},t.prototype.addSpecialList=function(t,e){var n=this.cellList[t];switch(n.state>o.GameEnum.CellState.COMBO&&this.addPreSpecialComboList(n),e){case o.GameEnum.CellState.COMBO_ROW:case o.GameEnum.CellState.COMBO_COLUMN:case o.GameEnum.CellState.COMBO_BOOM:}n.state=e,n.state===o.GameEnum.CellState.COMBO_SAME&&(n.type=o.GameEnum.CellType.NONE),delete this.preEliminationDict[t],this.updateStateList.push(t)},t.prototype.startElimination=function(){this.comboCount++,this.comboCount>10&&(this.comboCount=10),this.tipDict={},this.isEliminating=!0,this.isOpenEfffect?r.EventManager.Brocast(s.EventMessages.GAME_ELIMINATIONKEY_EFFECT):r.EventManager.Brocast(s.EventMessages.GAME_ELIMINATIONKEY)},t.prototype.setSpecialEffect=function(t,e,n){void 0===n&&(n=-1);var a=this.effectDict[t];a||(a={targetList:[]},this.effectDict[t]=a,a.index=t,a.eliminationType=e),n>-1&&a.targetList.push(n)},t.prototype.addSpecialEffect=function(t){if(c.Logger.logModel(t,"\u6dfb\u52a0\u7279\u6b8a\u5143\u7d20"),t.t==o.GameEnum.EffectType.BOMB)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.BOMB});else if(t.t==o.GameEnum.EffectType.H_BOMB)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.H_BOMB});else if(t.t==o.GameEnum.EffectType.V_BOMB)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.V_BOMB});else if(t.t==o.GameEnum.EffectType.CROSS_BOMB)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.H_BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.V_BOMB});else if(t.t==o.GameEnum.EffectType.CROSS_BOMB_3)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.CROSS_BOMB_3}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.CROSS_BOMB_3});else if(t.t==o.GameEnum.EffectType.COLOR_AND_BOMB||t.t==o.GameEnum.EffectType.COLOR_AND_NORMAL||t.t==o.GameEnum.EffectType.FULL_BOMB)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.COLOR_AND_BOMB,targetList:t.ts});else if(t.t==o.GameEnum.EffectType.CROSS_BOMB_3_H)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.H_BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.BOMB});else if(t.t==o.GameEnum.EffectType.CROSS_BOMB_3_V)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.V_BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.BOMB});else if(t.t==o.GameEnum.EffectType.COLOR_AND_BOMB_H)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.H_BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.COLOR_AND_BOMB,targetList:t.ts});else if(t.t==o.GameEnum.EffectType.COLOR_AND_BOMB_V)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.V_BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.COLOR_AND_BOMB,targetList:t.ts});else if(t.t==o.GameEnum.EffectType.COLOR_AND_BOMB_S)this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.BOMB}),this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.COLOR_AND_BOMB,targetList:t.ts});else if(t.t==o.GameEnum.EffectType.ELIMINATE_ITEM_HAMMER){this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.ELIMINATE_ITEM_HAMMER});var e=this.cellList[this.id2Index[t.id]];if(e.state>0)switch(e.state){case o.GameEnum.CellCombType.COMBO_BOOM:this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.BOMB,time:1});break;case o.GameEnum.CellCombType.COMBO_ROW:this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.H_BOMB,time:1});break;case o.GameEnum.CellCombType.COMBO_COLUMN:this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.V_BOMB,time:1});break;case o.GameEnum.CellCombType.COMBO_SAME:this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.COLOR_AND_NORMAL,targetList:t.ts,time:1})}}else t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_1?this.effectDict.push({index:0,state:o.GameEnum.EffectType.ELIMINATE_SKILL_1,targetList:t.ts}):t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_2?this.effectDict.push({index:0,state:o.GameEnum.EffectType.ELIMINATE_SKILL_2}):t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_3?this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.ELIMINATE_SKILL_3}):t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_4?this.effectDict.push({index:0,state:o.GameEnum.EffectType.ELIMINATE_SKILL_4,targetList:t.ts}):t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_5?this.effectDict.push({index:this.id2Index[t.id],state:o.GameEnum.EffectType.ELIMINATE_SKILL_5}):t.t==o.GameEnum.EffectType.ELIMINATE_SKILL_6&&this.effectDict.push({index:0,state:o.GameEnum.EffectType.ELIMINATE_SKILL_6,targetList:t.ts});return!1},t.prototype.addSpecialEliminationCell=function(){var t=this.preSpecialComboList.concat();this.preSpecialComboList.length=0,this.maxRow,this.maxColumn;for(var e=0;e<t.length;e++){var n=t[e],a=n.data,r=this.getCellIndex(a.row,a.column),s=n.eliminationType;switch(n.eliminationType){case o.GameEnum.CellEliminationType.BOOM:case o.GameEnum.CellEliminationType.BOOM_SECOND:for(var c=a.row-1;c<a.row+2;c++)for(var l=a.column-1;l<a.column+2;l++)if(this.getIsValid(c,l)&&(c!==a.row||l!==a.column)){var u=this.getCellData(c,l);this.addPreComboList(u,this.getCellIndex(c,l))}this.setSpecialEffect(r,n.eliminationType);break;case o.GameEnum.CellEliminationType.ROW:for(l=0;l<this.maxColumn;l++)this.getIsValid(a.row,l)&&l!==a.column&&(u=this.getCellData(a.row,l),this.addPreComboList(u,this.getCellIndex(a.row,l)));this.setSpecialEffect(r,n.eliminationType);break;case o.GameEnum.CellEliminationType.COLUMN:for(c=0;c<this.maxRow;c++)this.getIsValid(c,a.column)&&c!==a.row&&(u=this.getCellData(c,a.column),this.addPreComboList(u,this.getCellIndex(c,a.column)));this.setSpecialEffect(r,n.eliminationType);break;case o.GameEnum.CellEliminationType.SAME:case o.GameEnum.CellEliminationType.CHANGE_TYPE:var p=[];for(c=a.row-1;c<a.row+2;c++)for(l=a.column-1;l<a.column+2;l++)!this.getIsValid(c,l)||c===a.row&&l===a.column||p.push(this.getCellIndex(c,l));if(p.length>0){var h=p[i.default.rangeNum(0,p.length)],f=this.cellList[h];this.eliminationWithType(f,a,s)}}}this.preSpecialComboList.length>0&&this.addSpecialEliminationCell()},t.prototype.createRandCell=function(t,e,n){var a={};a.addRow=n,a.row=t,a.column=e,a.type=Math.floor(6*Math.random())+1,a.state=o.GameEnum.CellState.NONE,a.eliminationType=o.GameEnum.CellEliminationType.NONE;var i=this.getCellIndex(t,e);return this.cellList[i]=a,i},t.prototype.completeElimination=function(){var t=[],e=[];for(var n in this.preEliminationDict)this.cellList[n]=null;for(var a=0;a<this.maxColumn;a++){for(var o=0,i=0;i<this.maxRow;i++){var c=this.getCellIndex(i,a);if(null===this.cellList[c])o++;else if(o>0){var l=this.cellList[c];l.row-=o;var u=this.getCellIndex(l.row,a);this.cellList[u]=l,this.cellList[c]=null,e.push(c)}}if(o>0)for(var p=0;p<o;p++){var h=this.maxRow-p-1;u=this.createRandCell(h,a,o),t.push(u)}}r.EventManager.Brocast(s.EventMessages.GAME_CREATEELIMINATIONKEY,t,e)},t.prototype.delCompleteElimination=function(){if(this.preEliminationDict)for(var t in this.preEliminationDict)this.cellList[t]=null;this.runLogin()},t.prototype.createMoveElimination=function(t,e,n){var a=[],i=[];if(e)for(var c=0,l=e;c<l.length;c++){var u=l[c].split("-").map(Number),p=this.id2Index[u[0]],h=this.id2Index[u[u.length-1]],f=this.cellList[p];this.cellList[h]=f,this.cellList[p]=null;for(var m=[],d=0,_=u;d<_.length;d++){var g=_[d];m.push(this.id2Index[g])}i.push(m)}var I={};if(n)for(var y=0,E=n.split(",");y<E.length;y++){var v=E[y].split(":").map(Number);I[v[0]]=v[1]}for(var M=0,S=t;M<S.length;M++){var C=S[M];if(C&&C.new&&C.m){for(var P=C.new.split(":").map(Number),O=(u=C.m.split("-").map(Number))[u.length-1],U=this.id2Index[O],T=(f={},0),b=0,D=t;b<D.length;b++){var R=D[b].m.split("-").map(Number);Math.floor(O/10)==Math.floor(R[R.length-1]/10)&&T++}f.addRow=T;var k=this.getRowColumn(U);f.row=k.row,f.column=k.column,f.type=P[1],f.state=P[2],f.square=P[3],f.item=I[P[0]]||P[4],f.eliminationType=o.GameEnum.CellEliminationType.NONE;for(var w=[],L=0,N=u;L<N.length;L++){var A=N[L];w.push(this.id2Index[A])}w.shift(),f.move=w,this.cellList[U]=f,a.push(U)}}r.EventManager.Brocast(s.EventMessages.GAME_CREATEELIMINATIONKEY,a,i)},t.prototype.createMoveElimination2=function(t,e){var n=[],a=[],o=[];if(t)for(var i=0;i<t.length;i++)if(!(o.indexOf(i)>-1)){var r=[],s=t[i];if(0==s.indexOf("n")){var c={},l=s.split("-");r.push(parseInt(l[1]));for(var u=r[0],p=i+1;p<t.length;p++)t[p].indexOf("n")<0&&(m=t[p].split("-").map(Number))[0]==u&&m.length>1&&(u=m[m.length-1],o.push(p),m.shift(),r=r.concat(m));var h=l[0].split(":");c.new=r[r.length-1]+":"+h[1]+":"+h[2]+":"+h[3]+":"+h[4],c.m="9-"+r.join("-"),n.push(c)}else{var f=s.split("-").map(Number);for(u=f[f.length-1],r=f.concat(),p=i+1;p<t.length;p++){var m;t[p].indexOf("n")<0&&(m=t[p].split("-").map(Number))[0]==u&&m.length>1&&(u=m[m.length-1],o.push(p),m.shift(),r=r.concat(m))}a.push(r.join("-"))}}if(a.length>0)for(var d=!0,_=[];d;){d=!1;for(var g=0;g<a.length;g++){var I=a[g];if(!(_.indexOf(I)>-1)){for(var y=I.split("-").map(Number),E=y[y.length-1],v=g+1;v<a.length;v++)if(0==a[v].indexOf(E+"-")){_.push(a[v]),d=!0;break}_.push(I)}}a=_.concat(),_=[]}this.createMoveElimination(n,a,e)},t.prototype.runLogin=function(){if(this.loginList.length<=0||null==this.loginList)return this.isEliminating=!1,this.lastingExchangeIndex1=null,void(this.lastingExchangeIndex2=null);this.isEliminating=!0,this.cleanEliminationData();var t=this.loginList.shift();if(c.Logger.logModel(t,"\u670d\u52a1\u5668\u6570\u636e\u5904\u7406"),2==t.act){for(var e=0,n=t.grids;e<n.length;e++){var a=n[e];if(a.new){var i=a.new.split(":").map(Number),l=a.del.split(",").map(Number),u=[],p=this.id2Index[i[0]];if(a.del&&l.length>0)for(var h=0,f=l;h<f.length;h++){var m=f[h];u.push(this.id2Index[m]),p!=this.id2Index[m]&&(this.preEliminationDict[this.id2Index[m]]=!0)}this.createSpecialList.push({index:p,list:u}),(E=this.cellList[p])&&(E.type=i[1],E.state=i[2],E.square=i[3],E.item=i[4],this.cellList[p]=E,this.updateStateList.push(p)),i[2]==o.GameEnum.CellCombType.COMBO_ROW||i[2]==o.GameEnum.CellCombType.COMBO_COLUMN||i[2]==o.GameEnum.CellCombType.COMBO_BOOM||(i[2],o.GameEnum.CellCombType.COMBO_SAME)}else if(l=a.del.split(",").map(Number),a.del&&l.length>0)for(var d=0,_=l;d<_.length;d++){m=_[d];var g=this.id2Index[m];this.preEliminationDict[g]=!0}if(a.change){c.Logger.logModel(t,"\u670d\u52a1\u5668\u6570\u636e\u5904\u7406change");for(var I=0,y=a.change;I<y.length;I++){var E,v=y[I].split(":").map(Number),M=this.id2Index[v[0]];null!=(E=this.cellList[M])&&(E.square!=v[3]&&(this.preObstacleDict[M]=E.square),E.type=v[1],E.state=v[2],E.square=v[3],E.item=v[4],this.cellList[M]=E,this.updateStateList.push(M))}}if(a.effect&&a.effect.length>0)for(var S=0,C=a.effect;S<C.length;S++){var P=C[S];if(this.addSpecialEffect(P)){this.effectDict=[];break}}}this.startElimination()}else if(4==t.act)this.createMoveElimination2(t.fallList,t.addProps);else if(100==t.act){for(var O=0,U=t.grids;O<U.length;O++){var T=U[O].split(":").map(Number),b=this.id2Index[T[0]],D=this.cellList[b];D&&(D.type=T[1],D.state=T[2],D.square=T[3],D.item=T[4],this.cellList[b]=D)}[].length>0||r.EventManager.Brocast(s.EventMessages.GAME_UPDATEALLELIMINATION)}else if(101==t.act){for(var R=0,k=t.grids;R<k.length;R++){T=k[R].split(":").map(Number),b=this.id2Index[T[0]];var w=this.cellList[b];w&&(w.type=T[1],w.state=T[2],w.square=T[3],w.item=T[4],this.cellList[b]=w)}r.EventManager.Brocast(s.EventMessages.GAME_UPDATEALLELIMINATION)}else 201==t.act||this.runLogin();this.loginList.length},t.prototype.checkNewElimination=function(){this.cleanEliminationData(),this.eliminationAllCount>0?(this.eliminationAll(),this.startElimination()):(this.checkElimination(),Object.keys(this.preEliminationDict).length>0||this.preSpecialComboList.length>0?this.startElimination():this.checkExchangeElimination())},t.prototype.createNewEndElimination=function(){this.runLogin()},t.prototype.sortTipContent=function(t,e){void 0===e&&(e=o.GameEnum.CellState.NONE);var n,a,i=t.concat();n=i,a=new Map,i=n.filter(function(t){return!a.has(t)&&a.set(t,1)});var r=!1;for(var s in this.tipDict){r=!0;var c=this.tipDict[s],l=parseInt(s);if(l<e)delete this.tipDict[s],this.tipDict[e]=i;else if(l===e){for(var u=o.GameEnum.CellState.NONE,p=0;p<c.length;p++){var h=c[p];u=Math.max(u,this.cellList[h].state)}var f=o.GameEnum.CellState.NONE;for(p=0;p<i.length;p++)h=i[p],f=Math.max(f,this.cellList[h].state);f>u?(delete this.tipDict[s],this.tipDict[e]=i):f===u&&i.length>c.length&&(delete this.tipDict[s],this.tipDict[e]=i)}}r||(this.tipDict[e]=i)},t.prototype.checkSpecialExchangeElimination=function(){for(var t=!1,e=function(e,n,a,i){var r=this.getCellData(e,n),s=this.getCellData(a,i),c=!1;if(r.state>o.GameEnum.CellState.NONE&&s.state>o.GameEnum.CellState.NONE?c=!0:r.state!==o.GameEnum.CellState.COMBO_SAME&&s.state!==o.GameEnum.CellState.COMBO_SAME&&r.state!==o.GameEnum.CellState.COMBO_CHANGE_TYPE&&s.state!==o.GameEnum.CellState.COMBO_CHANGE_TYPE||(c=!0),c){var l=[];l.push(this.getCellIndex(e,n)),l.push(this.getCellIndex(a,i)),this.sortTipContent(l,Math.max(r.state,s.state)),t=!0}}.bind(this),n=0;n<this.maxRow;n++)for(var a=0;a<this.maxColumn-1;a++)this.getIsCanMove(n,a)&&this.getIsCanMove(n,a+1)&&e(n,a,n,a+1);for(a=0;a<this.maxColumn;a++)for(n=0;n<this.maxRow-1;n++)this.getIsCanMove(n,a)&&this.getIsCanMove(n+1,a)&&e(n,a,n+1,a);return t},t.prototype.checkExchangeElimination=function(){this.tipDict={};var t=this.checkSpecialExchangeElimination();if(!t){for(var e=function(e,n,a,o){for(var i=1,r=[],s={},c=function(c,l){var u=this.getCellData(c,l)||{};this.getIsValid(c,l)?u.type===s.type?(u!==this.getCellData(e,n)&&r.push(this.getCellIndex(c,l)),i++):(i>2&&(t=!0,r.push(this.getCellIndex(a,o)),this.sortTipContent(r)),s=u,i=1,r.length=0,u!==this.getCellData(e,n)&&r.push(this.getCellIndex(c,l))):(i>2&&(t=!0,r.push(this.getCellIndex(a,o)),this.sortTipContent(r)),s=u,i=0,r.length=0)}.bind(this),l=e-2;l<e+3;l++)c(l,n);if(i>2)t=!0,r.push(this.getCellIndex(a,o)),this.sortTipContent(r);else for(s={},l=n-2;l<n+3;l++)c(e,l);i>2&&(t=!0,r.push(this.getCellIndex(a,o)),this.sortTipContent(r))}.bind(this),n=0;n<this.maxRow;n++)for(var a=0;a<this.maxColumn-1;a++)this.getIsCanMove(n,a)&&this.getIsCanMove(n,a+1)&&(this.onlyExchangeCell(n,a,n,a+1),e(n,a,n,a+1),e(n,a+1,n,a),this.onlyExchangeCell(n,a,n,a+1));for(a=0;a<this.maxColumn;a++)for(n=0;n<this.maxRow-1;n++)this.getIsCanMove(n,a)&&this.getIsCanMove(n+1,a)&&(this.onlyExchangeCell(n,a,n+1,a),e(n,a,n+1,a),e(n+1,a,n,a),this.onlyExchangeCell(n,a,n+1,a))}t?(this.comboCount=0,this.isEliminating=!1,r.EventManager.Brocast(s.EventMessages.GAME_ELIMINATIONFINISHKEY)):this.resetContent()},t.prototype.resetContent=function(){this.tipDict={};for(var t=0;t<this.cellList.length;t++){var e=this.cellList[t];e&&this.getIsValid(e.row,e.column)&&e.state===o.GameEnum.CellState.NONE&&(e.type=o.GameEnum.CellType.RED,this.updateTypeList.push(t))}r.EventManager.Brocast(s.EventMessages.GAME_UPDATECELLTYPEKEY),this.checkElimination(),Object.keys(this.preEliminationDict).length>0?this.startElimination():this.checkExchangeElimination()},e=a([l],t)}();n.default=u,n.EliminationDataManager=u.getInstance(),cc._RF.pop()},{"../../Config/GameEnum":"GameEnum","../../Framework/Event/EventManager":"EventManager","../../Framework/Event/EventMessages":"EventMessages","../../Framework/Utils/Logger":"Logger","../../Framework/Utils/Tool":"Tool"}],EliminationEffect:[function(t,e,n){"use strict";cc._RF.push(e,"3281cENhytP9Zu7rpW4dxxZ","EliminationEffect");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Framework/Utils/Tool"),s=t("../../Data/EliminationData"),c=t("../../../Config/GameEnum"),l=t("../../../Framework/Event/EventMessages"),u=t("../../../Framework/Event/EventManager"),p=t("../../../Framework/Utils/Logger"),h=t("../../../Framework/Audio/AudioManager"),f=t("../../../Framework/Resources/LoaderManager"),m=cc._decorator,d=m.ccclass,_=m.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bluePrefab=null,e.redPrefab=null,e.yellowPrefab=null,e.greenPrefab=null,e.purplePrefab=null,e.orangePrefab=null,e.boombluePrefab=null,e.boomredPrefab=null,e.boomyellowPrefab=null,e.boomgreenPrefab=null,e.boompurplePrefab=null,e.boomorangePrefab=null,e.rowColumnbluePrefab=null,e.rowColumnredPrefab=null,e.rowColumnyellowPrefab=null,e.rowColumngreenPrefab=null,e.rowColumnpurplePrefab=null,e.rowColumnorangePrefab=null,e.samebluePrefab=null,e.skill_1_Prefab=null,e.skill_2_Prefab=null,e.skill_3_Prefab=null,e.skill_4_Prefab=null,e.skill_5_Prefab=null,e.skill_6_Prefab=null,e.skill_1_fly_Prefab=null,e.skill_2_fly_Prefab=null,e.skill_4_fly_Prefab=null,e.skill_5_fly_Prefab=null,e.skill_6_fly_Prefab=null,e.skill_2_target_Prefab=null,e.skill_3_bomb_Prefab=null,e.skill_5_bomb_Prefab=null,e.lightPrefab=null,e.mofabang=null,e.tuowei=null,e.movePrefab=null,e.skillBluePrefab=null,e.skillRedPrefab=null,e.hammerPrefab=null,e}return o(e,t),e.prototype.onEnable=function(){this.startElimination_handel=this.startElimination.bind(this),u.EventManager.AddListener(l.EventMessages.GAME_ELIMINATIONKEY_EFFECT,this.startElimination_handel)},e.prototype.onDisable=function(){u.EventManager.RemoveListener(l.EventMessages.GAME_ELIMINATIONKEY_EFFECT,this.startElimination_handel)},e.prototype.onLoad=function(){this.poolDict={}},e.prototype.setBattleController=function(t){this.eliminationControl=t,this.shakeNode=r.default.findChildByPath(t.UIParam_Instance.node,"Center"),this.skill_Animation_Node=r.default.findChildByPath(t.UIParam_Instance.node,"SlillNode"),this.effectBackContent=r.default.findChildByPath(t.UIParam_Instance.node,"Center/EffectBack"),this.effectFrontContent=r.default.findChildByPath(t.UIParam_Instance.node,"Center/EffectFront"),this.tuoweiEffectContent=r.default.findChildByPath(t.UIParam_Instance.node,"EffectTuowei")},e.prototype.onDestroy=function(){for(var t in this.poolDict)this.poolDict[t].clear()},e.prototype.getPrefab=function(t,e){var n=this.poolDict[t];n||(n=new cc.NodePool,this.poolDict[t]=n);var a=n.get();return a||(a=cc.instantiate(e)),a},e.prototype.setSkillOneEffect=function(t){var e=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var n=this.getPrefab("SkilPool_1",this.skill_1_Prefab),a=this.poolDict.SkilPool_1,o=new cc.Vec3(0,0,0);n.parent=this.skill_Animation_Node,n.position=o,this.scheduleOnce(function(){a.put(n),e.eliminationControl&&e.eliminationControl.SetSkillMask(!1)},2);var i=n.getComponent(cc.Animation);i&&i.play();var c=n.getChildByName("fly");return this.scheduleOnce(function(){for(var n=function(n){var a=t[n].split(":").map(Number),o=s.EliminationDataManager.id2Index[a[0]],i=cc.instantiate(e.skill_1_fly_Prefab);i.parent=c;var l=r.default.getNodePos(e.eliminationControl.cellNodeDict[o],c);i.position=new cc.Vec3(l.x,0,0),i.angle=r.default.getAngle(i.position,l),p.Logger.logModel(i.angle,"\u89d2\u5ea6"),cc.tween(i).to(.5,{position:l},{easing:"quintInOut"}).call(function(){i.destroy()}).start()},a=0;a<t.length;a++)n(a)},1.6),2},e.prototype.setSkillTwoEffect=function(){var t=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var e=this.getPrefab("SkilPool_2",this.skill_2_Prefab),n=this.poolDict.SkilPool_2,a=new cc.Vec3(0,0,0);e.parent=this.skill_Animation_Node,e.position=a,this.scheduleOnce(function(){n.put(e),t.eliminationControl&&t.eliminationControl.SetSkillMask(!1)},2);var o=e.getComponent(cc.Animation);o&&o.play();var i=e.getChildByName("fly");return this.scheduleOnce(function(){var e=r.default.getNodePos(t.eliminationControl.cellNodeDict[s.EliminationDataManager.getCellIndex(3,6)],i),n=new cc.Vec3(e.x+25,e.y,0),a=cc.instantiate(t.skill_2_target_Prefab);a.parent=i,a.position=n;var o=a.getComponent(cc.Animation);o&&o.play();var c=cc.instantiate(t.skill_2_fly_Prefab);c.parent=i;var l=new cc.Vec3(i.position.x,e.y,0);c.position=l;var u=c.getComponent(cc.Animation);u&&u.play(),cc.tween(c).to(.25,{position:n}).start(),t.scheduleOnce(function(){c.destroy(),a.destroy()},2)},1),2},e.prototype.setSkillThreeEffect=function(t){var e=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var n=this.getPrefab("SkilPool_3",this.skill_3_Prefab),a=this.poolDict.SkilPool_3,o=new cc.Vec3(0,0,0);n.parent=this.skill_Animation_Node,n.position=o,this.scheduleOnce(function(){a.put(n),e.eliminationControl&&e.eliminationControl.SetSkillMask(!1)},2);var i=n.getComponent(cc.Animation);i&&i.play();var s=n.getChildByName("fly");return this.scheduleOnce(function(){var n=r.default.getNodePos(e.eliminationControl.cellNodeDict[t],s),a=cc.instantiate(e.skill_3_bomb_Prefab);a.parent=s,a.position=n;var o=a.getComponent(cc.Animation);o&&o.play(),e.scheduleOnce(function(){a.destroy()},.5)},1.67),1.67},e.prototype.setSkillFourEffect=function(t){var e=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var n=this.getPrefab("SkilPool_4",this.skill_4_Prefab),a=this.poolDict.SkilPool_4,o=new cc.Vec3(0,0,0);n.parent=this.skill_Animation_Node,n.position=o,this.scheduleOnce(function(){a.put(n),e.eliminationControl&&e.eliminationControl.SetSkillMask(!1)},2);var i=n.getComponent(cc.Animation);i&&i.play();var c=n.getChildByName("fly");return this.scheduleOnce(function(){for(var n,a=function(a){var i=t[a].split(":").map(Number),l=s.EliminationDataManager.id2Index[i[0]],u=e.eliminationControl.cellNodeDict[l];if(u){var p=cc.instantiate(e.skill_4_fly_Prefab);p.parent=c,p.position=o;var h=r.default.getNodePos(e.eliminationControl.cellNodeDict[l],c);cc.tween(p).to(.5,{position:h}).call(function(){p.destroy()}).start();var f=cc.instantiate(e.mofabang);f.parent=c,f.position=h,(n=f.getComponent(cc.Animation))&&n.play(),e.scheduleOnce(function(){f.destroy()},1.65),e.scheduleOnce(function(){var t=u.getComponent("EliminationCell");t.cellData.type=i[1],t.cellData.state=i[2],t.updateType(),t.updateState()},1.25)}},i=0;i<t.length;i++)a(i)},.33),2},e.prototype.setSkillFiveEffect=function(t){var e=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var n=this.getPrefab("SkilPool_5",this.skill_5_Prefab),a=this.poolDict.SkilPool_5,o=new cc.Vec3(0,0,0);n.parent=this.skill_Animation_Node,n.position=o,this.scheduleOnce(function(){a.put(n),e.eliminationControl&&e.eliminationControl.SetSkillMask(!1)},2);var i=n.getComponent(cc.Animation);i&&i.play();var s=n.getChildByName("fly");return this.scheduleOnce(function(){var n=e.getPrefab("skill_5_fly",e.skill_5_fly_Prefab);n.parent=s,n.position=o;var a=r.default.getNodePos(e.eliminationControl.cellNodeDict[t],s),i=a.sub(o).mag()/650;n.children[0].scaleY=i,n.angle=r.default.getAngle(o,a),e.scheduleOnce(function(){var t=e.getPrefab("skill_5_bomb",e.skill_5_bomb_Prefab);t.parent=s,t.position=a;var o=t.getComponent(cc.Animation);o&&o.play(),e.scheduleOnce(function(){n.destroy(),n.destroy()},.5)},.5)},.67),1.33},e.prototype.setSkillSixEffect=function(t){var e=this;this.eliminationControl&&this.eliminationControl.SetSkillMask(!0);var n=this.getPrefab("SkilPool_6",this.skill_6_Prefab),a=this.poolDict.SkilPool_6,o=new cc.Vec3(0,0,0);n.parent=this.skill_Animation_Node,n.position=o,this.scheduleOnce(function(){a.put(n),e.eliminationControl&&e.eliminationControl.SetSkillMask(!1)},2);var i=n.getComponent(cc.Animation);i&&i.play();var c=n.getChildByName("fly");return this.scheduleOnce(function(){for(var n=0;n<t.length;n++){var a=t[n].split(":").map(Number),o=s.EliminationDataManager.id2Index[a[0]],i=cc.instantiate(e.skill_6_fly_Prefab);i.parent=c;var l=r.default.getNodePos(e.eliminationControl.cellNodeDict[o],c);i.position=l;var u=i.getComponent(cc.Animation);u&&u.play()}},1),1.5},e.prototype.setLightEffect=function(t,e,n){var a=this;if(void 0===n&&(n=0),!e||e.length<=0)return 0;for(var o=n,i=function(n){if(e[n].indexOf(":")){var i=e[n].split(":").map(Number),u=s.EliminationDataManager.id2Index[i[0]];l.scheduleOnce(function(){h.AudioMgr.playSFX("sfx_battle_matchlightning",h.AudioType.EAudio_Voice);var e=a.eliminationControl.cellPosDict[t],n=a.eliminationControl.cellPosDict[u],o=n.sub(e).mag(),s=cc.instantiate(a.lightPrefab);s.parent=a.effectFrontContent,s.position=e;var l=o/300;s.children[0].scaleX=l,s.angle=r.default.getAngle(e,n);var p=s.getComponent(cc.Animation);p&&p.play(),a.scheduleOnce(function(){s.destroy()},1);var f=a.eliminationControl.cellNodeDict[u];if(f){var m=f.getComponent("EliminationCell");m.cellData.type=i[1],m.cellData.state=i[2],m.updateType(),m.updateState()}i[2]==c.GameEnum.CellCombType.COMBO_BOOM?a.lightEffectDict.push({index:u,state:c.GameEnum.EffectType.BOMB}):i[2]==c.GameEnum.CellCombType.COMBO_COLUMN?a.lightEffectDict.push({index:u,state:c.GameEnum.EffectType.V_BOMB}):i[2]==c.GameEnum.CellCombType.COMBO_ROW?a.lightEffectDict.push({index:u,state:c.GameEnum.EffectType.H_BOMB}):i[2]==c.GameEnum.CellCombType.COMBO_SAME&&a.lightEffectDict.push({index:u,state:c.GameEnum.EffectType.COLOR_AND_NORMAL})},o)}},l=this,u=0;u<e.length;u++)i(u);return o},e.prototype.setTuoweiEffectScore=function(t,e,n,a){var o=r.default.getNodePos(e,this.tuoweiEffectContent),i=null;i||(i=cc.instantiate(this.tuowei)),i.active=!0,i.parent=this.tuoweiEffectContent,i.position=o;var s=r.default.getNodePos(n,this.tuoweiEffectContent);cc.tween(i).to(.25,{position:s}).call(function(){a&&a(),i.position=s,i.active=!1,i.destroy()}).start()},e.prototype.setTuoweiEffectSKill=function(t,e,n,a){var o=r.default.getNodePos(e,this.tuoweiEffectContent),i=cc.instantiate(e);i.parent=this.tuoweiEffectContent,i.position=o;var s=null;s||(s=cc.instantiate(this.tuowei)),s.active=!0,s.parent=this.tuoweiEffectContent,s.setPosition(o),i.setScale(1);var c=r.default.getNodePos(n,this.tuoweiEffectContent);cc.tween(i).to(.4,{position:c,scale:.5}).call(function(){a&&a(),i.position=c,i.active=!1}).start(),cc.tween(s).to(.4,{position:c}).call(function(){s.position=c,s.active=!1,s.destroy(),i.destroy()}).start()},e.prototype.setTuoweiEffect=function(t,e){for(var n=this.eliminationControl.cellPosDict[t],a=0,o=e.split(",");a<o.length;a++){o[a];var i=null;i||(i=cc.instantiate(this.tuowei)),i.active=!1,i.parent=this.effectFrontContent,i.position=n;var s=r.default.getNodePos(i,this.tuoweiEffectContent);i.parent=this.tuoweiEffectContent,i.position=s,i.active=!0,cc.tween(i).to(.5,{position:s}).call(function(){}).start()}},e.prototype.eliminationShake=function(){if(this.shakeNode){var t=cc.moveBy(.03,cc.v2(-10,5)),e=cc.moveBy(.05,cc.v2(20,5)),n=cc.moveBy(.05,cc.v2(-5,-20)),a=cc.moveBy(.03,cc.v2(-5,10)),o=cc.sequence(t,e,n,a),i=cc.repeat(o,2);this.shakeNode.runAction(i)}},e.prototype.showSecondEffect=function(t){var e,n=this,a=!1,o=0,i=0,r=function(r){var u,p=t[r],f=p.state,m=p.index,d=s.EliminationDataManager.cellList[m],_=1;d&&(_=d.type);var g=0,I=0,y=0;switch(p.time&&(y=p.time),f){case c.GameEnum.EffectType.ELIMINATE_ITEM_HAMMER:u=l.hammerPrefab,o=Math.max(o,.8),h.AudioMgr.playSFX("sfx_battle_hammer",h.AudioType.EAudio_Voice),I=.8;break;case c.GameEnum.EffectType.BOMB:u=l.getEliminationBombPrefab(_),l.scheduleOnce(function(){h.AudioMgr.playSFX("sfx_battle_matchbomb",h.AudioType.EAudio_Voice)},y),a=!0,i=y,o=Math.max(o,.5),I=.5;break;case c.GameEnum.EffectType.H_BOMB:g=90;case c.GameEnum.EffectType.V_BOMB:u=l.getEliminationRowPrefab(_),l.scheduleOnce(function(){h.AudioMgr.playSFX("sfx_battle_matchrow",h.AudioType.EAudio_Voice)},y),o=Math.max(o,.67),I=.67;break;case c.GameEnum.EffectType.COLOR_AND_NORMAL:case c.GameEnum.EffectType.COLOR_AND_BOMB:u=l.samebluePrefab;var E=l.setLightEffect(m,p.targetList,y);o=Math.max(o,Math.max(E,y)),I=Math.max(E,1);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_1:var v=l.setSkillOneEffect(p.targetList);o=Math.max(o,v);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_2:var M=l.setSkillTwoEffect();o=Math.max(o,M);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_3:var S=l.setSkillThreeEffect(m);o=Math.max(o,S);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_4:var C=l.setSkillFourEffect(p.targetList);o=Math.max(o,C);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_5:var P=l.setSkillFiveEffect(m);o=Math.max(o,P);break;case c.GameEnum.EffectType.ELIMINATE_SKILL_6:var O=l.setSkillSixEffect(p.targetList);o=Math.max(o,O)}if(u){var U="statePool"+f+"_"+_,T=l.poolDict[U];if(T||(T=new cc.NodePool,l.poolDict[U]=T),y>0&&null!=y)l.scheduleOnce(function(){var t=T.get();t||(t=cc.instantiate(u));var e=n.eliminationControl.cellPosDict[m];if(t.parent=n.effectFrontContent,t.position=e,t.angle=g,n.scheduleOnce(function(){T.put(t)},I),I>0){var a=t.getComponent(cc.Animation);a&&a.play()}},y);else{var b=T.get();b||(b=cc.instantiate(u));var D=l.eliminationControl.cellPosDict[m];b.parent=l.effectFrontContent,b.position=D,b.angle=g,l.scheduleOnce(function(){T.put(b)},I),I>0&&(e=b.getComponent(cc.Animation))&&e.play()}}},l=this;for(var u in t)r(u);return a&&this.scheduleOnce(function(){n.eliminationShake()},i),o},e.prototype.startElimination=function(){var t=this;this.lightEffectDict=[];var e=this.showSecondEffect(s.EliminationDataManager.effectDict);this.scheduleOnce(function(){t.lightEffectDict.length>0?(e=t.showSecondEffect(t.lightEffectDict),t.scheduleOnce(function(){t.showNormalEffect()},e)):t.showNormalEffect()},e)},e.prototype.setNormalEffect=function(t){if(!s.EliminationDataManager.effectDict[t]){var e=s.EliminationDataManager.cellList[t];if(e){var n=e.state,a=e.type,o="typePool"+n+"_"+a,i=this.poolDict[o];i||(i=new cc.NodePool,this.poolDict[o]=i);var r,l=i.get();switch(n){case c.GameEnum.CellCombType.NORMAL:r=this.getEliminationNormalPrefab(a)}if(r){l||(l=cc.instantiate(r));var u=this.eliminationControl.cellPosDict[t];l.parent=this.effectBackContent,l.position=u,this.scheduleOnce(function(){i.put(l)},.2);var p=l.getComponent(cc.Animation);p&&p.play()}}}},e.prototype.showNormalEffect=function(){var t=s.EliminationDataManager.preEliminationDict;for(var e in t){var n=parseInt(e);this.setNormalEffect(n)}var a=this;this.scheduleOnce(function(){a.eliminationControl.startElimination(),h.AudioMgr.playSFX("sfx_battle_matched01",h.AudioType.EAudio_Voice)},.2)},e.prototype.showHammerEffect=function(t,e){var n=null;n||(n=cc.instantiate(this.hammerPrefab)),n.parent=this.effectFrontContent,n.position=t,n.getComponent(cc.Animation).on("finished",function(){null!=e&&e()})},e.prototype.showShuffleEffect=function(t,e){this.scheduleOnce(function(){t.setScale(1)},e+.2)},e.prototype.showMoveEffect=function(t){var e=null;e||(e=cc.instantiate(this.movePrefab)),e.parent=t,this.scheduleOnce(function(){e.destroy()},.2)},e.prototype.showSkillIconEffect=function(t,e){void 0===e&&(e=!0),t.destroyAllChildren();var n=null;(n=e?cc.instantiate(this.skillBluePrefab):cc.instantiate(this.skillRedPrefab)).parent=t,n.position=new cc.Vec3(0,0,0);var a=n.getComponent(cc.Animation);a&&a.play()},e.prototype.destroySkillIconEffect=function(t){t.setScale(1),t.destroyAllChildren()},e.prototype.getLoadPrefab=function(t,e){var n=this.poolDict[e];n||(n=new cc.NodePool,this.poolDict[e]=n);var a=n.get();return a||f.LoaderMgr.loadAsset(t,cc.Prefab).then(function(t){null!=t&&(a=cc.instantiate(t))}),a},e.prototype.getEliminationNormalPrefab=function(t){switch(t){case c.GameEnum.CellType.RED:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.redPrefab:this.bluePrefab;case c.GameEnum.CellType.BLUE:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.bluePrefab:this.redPrefab;case c.GameEnum.CellType.YELLOW:return this.yellowPrefab;case c.GameEnum.CellType.GREEN:return this.greenPrefab;case c.GameEnum.CellType.PURPLE:return this.purplePrefab;case c.GameEnum.CellType.ORANGE:return this.orangePrefab}return null},e.prototype.getEliminationRowPrefab=function(t){switch(t){case c.GameEnum.CellType.RED:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.rowColumnredPrefab:this.rowColumnbluePrefab;case c.GameEnum.CellType.BLUE:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.rowColumnbluePrefab:this.rowColumnredPrefab;case c.GameEnum.CellType.YELLOW:return this.rowColumnyellowPrefab;case c.GameEnum.CellType.GREEN:return this.rowColumngreenPrefab;case c.GameEnum.CellType.PURPLE:return this.rowColumnpurplePrefab;case c.GameEnum.CellType.ORANGE:return this.rowColumnorangePrefab}return null},e.prototype.getEliminationBombPrefab=function(t){switch(t){case c.GameEnum.CellType.RED:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.boomredPrefab:this.boombluePrefab;case c.GameEnum.CellType.BLUE:return s.EliminationDataManager.campType==c.GameEnum.CampType.Red?this.boombluePrefab:this.boomredPrefab;case c.GameEnum.CellType.YELLOW:return this.boomyellowPrefab;case c.GameEnum.CellType.GREEN:return this.boomgreenPrefab;case c.GameEnum.CellType.PURPLE:return this.boompurplePrefab;case c.GameEnum.CellType.ORANGE:return this.boomorangePrefab}return null},i([_(cc.Prefab)],e.prototype,"bluePrefab",void 0),i([_(cc.Prefab)],e.prototype,"redPrefab",void 0),i([_(cc.Prefab)],e.prototype,"yellowPrefab",void 0),i([_(cc.Prefab)],e.prototype,"greenPrefab",void 0),i([_(cc.Prefab)],e.prototype,"purplePrefab",void 0),i([_(cc.Prefab)],e.prototype,"orangePrefab",void 0),i([_(cc.Prefab)],e.prototype,"boombluePrefab",void 0),i([_(cc.Prefab)],e.prototype,"boomredPrefab",void 0),i([_(cc.Prefab)],e.prototype,"boomyellowPrefab",void 0),i([_(cc.Prefab)],e.prototype,"boomgreenPrefab",void 0),i([_(cc.Prefab)],e.prototype,"boompurplePrefab",void 0),i([_(cc.Prefab)],e.prototype,"boomorangePrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumnbluePrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumnredPrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumnyellowPrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumngreenPrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumnpurplePrefab",void 0),i([_(cc.Prefab)],e.prototype,"rowColumnorangePrefab",void 0),i([_(cc.Prefab)],e.prototype,"samebluePrefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_1_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_2_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_3_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_4_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_5_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_6_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_1_fly_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_2_fly_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_4_fly_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_5_fly_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_6_fly_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_2_target_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_3_bomb_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"skill_5_bomb_Prefab",void 0),i([_(cc.Prefab)],e.prototype,"lightPrefab",void 0),i([_(cc.Prefab)],e.prototype,"mofabang",void 0),i([_(cc.Prefab)],e.prototype,"tuowei",void 0),i([_(cc.Prefab)],e.prototype,"movePrefab",void 0),i([_(cc.Prefab)],e.prototype,"skillBluePrefab",void 0),i([_(cc.Prefab)],e.prototype,"skillRedPrefab",void 0),i([_(cc.Prefab)],e.prototype,"hammerPrefab",void 0),i([d],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Config/GameEnum":"GameEnum","../../../Framework/Audio/AudioManager":"AudioManager","../../../Framework/Event/EventManager":"EventManager","../../../Framework/Event/EventMessages":"EventMessages","../../../Framework/Resources/LoaderManager":"LoaderManager","../../../Framework/Utils/Logger":"Logger","../../../Framework/Utils/Tool":"Tool","../../Data/EliminationData":"EliminationData"}],EventManager:[function(t,e,n){"use strict";cc._RF.push(e,"7591ahBkwRLdovi98X8xgkv","EventManager");var a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.EventManager=void 0;var o=t("../../Config/GameConfig"),i=function(){function t(){}return t.AddListener=function(e,n){if(!t._Events.has(e)){var a={};a.handlerList=new Array,t._Events.set(e,a)}var i=t._Events.get(e);-1==i.handlerList.indexOf(n)?i.handlerList.push(n):o.GameConfig.Debug&&console.error("AddListener error : handler is having!!!")},t.Brocast=function(e){for(var n,a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];if(t._Events.has(e))for(var r=t._Events.get(e),s=0;s<r.handlerList.length;s++)(n=r.handlerList)[s].apply(n,a);else o.GameConfig.Debug&&console.error("not has  messageID = ",e," Events.")},t.BrocastOnce=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.Brocast.apply(this,a([t],e)),this.RemoveAllListenerByMessage(t)},t.RemoveListener=function(e,n){if(t._Events.has(e)){var a=t._Events.get(e),o=a.handlerList.indexOf(n);-1!=o&&a.handlerList.splice(o,1),0==a.handlerList.length&&(a=null,t._Events.delete(e))}},t.RemoveAllListenerByMessage=function(e){t._Events.has(e)&&(t._Events.get(e),t._Events.delete(e))},t.Clear=function(){t._Events.forEach(function(t){t.handlerList=null},this),t._Events.clear()},t.IsHaveEvent=function(e){return t._Events.has(e)},t.DumpEvent=function(){t._Events.forEach(function(t){for(var e=0;e<t.handlerList.length;e++);},this)},t._Events=new Map,t}();n.EventManager=i,cc._RF.pop()},{"../../Config/GameConfig":"GameConfig"}],EventMessages:[function(t,e,n){"use strict";cc._RF.push(e,"01cb2CiHadL8IIoxvebNQMx","EventMessages"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventMessages=void 0,function(t){t.NetWork_Connect_Success=1001,t.NetWork_Connect_Fail=1002,t.NetWork_Connect_Disconnect_Reconnect=1003,t.NetWork_Connect_Disconnect_NotReconnect=1004,t.LOADING=1e4,t.COIN_DATA_REFRESH=10005,t.DIAMOND_REFRESH=10006,t.TASK_REFRESH=10007,t.SKILLICON_CLICK=10008,t.ENTER_SCENE=3e4,t.EXIT_SCENE=30001,t.GAME_MATCH_SUCCESS=30007,t.GAME_ELIMINATIONKEY=30008,t.GAME_STARTGAMENOTIFY=30009,t.GAME_UPDATETIMEKEY=30010,t.GAME_SHOWTIPKEY=30011,t.GAME_UPDATEUSERDATAKEY=30012,t.GAME_ELIMINATIONKEY_EFFECT=30013,t.GAME_CREATEELIMINATIONKEY=30014,t.GAME_UPDATECELLTYPEKEY=30015,t.GAME_ELIMINATIONFINISHKEY=30016,t.GAME_ELIMINATIONSHAKEKEY=30017,t.GAME_UPDATEALLELIMINATION=30018,t.GAME_REFRESHHINT=30019,t.GAME_COMBO=30020,t.GAME_LOGINEND=30021,t.GAME_RESET_CELLGRIDS=30022}(n.EventMessages||(n.EventMessages={})),cc._RF.pop()},{}],Events:[function(t,e,n){"use strict";cc._RF.push(e,"931ceoO1ytEr78Gs/nNqwFE","Events"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],GameBaseSDK:[function(t,e,n){"use strict";cc._RF.push(e,"97560fYfGROpLxy3VRlx68q","GameBaseSDK"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameBaseSDK=void 0;var a=t("../../Framework/Localization/LocalizationManager"),o=t("../../Framework/Platform/PlatformSDK"),i=function(){function t(){}return t.prototype.showToast=function(t){o.PlatformSDKInstance.showToast(t)},t.prototype.SetLocale=function(){var t="en";o.PlatformSDKInstance.hasInit()?o.PlatformSDKInstance.getLocale(function(e){t=e,a.LocalizationManagerInstancec.SetLocalization2String(t)}):a.LocalizationManagerInstancec.SetLocalization2String(t)},t}();n.GameBaseSDK=i,cc._RF.pop()},{"../../Framework/Localization/LocalizationManager":"LocalizationManager","../../Framework/Platform/PlatformSDK":"PlatformSDK"}],GameConfig:[function(t,e,n){"use strict";cc._RF.push(e,"49028+VOlhBt7Sa8wqdFeLa","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameConfig=void 0,function(t){t.GameVersion=.1,t.GameFrame=60,t.DisplayStats=!1,t.LogLevel=cc.debug.DebugMode.ERROR,t.LOCAL_BATTLE=!0,t.AppID=606477295,t.Appkey="d57c564c36654ab5b384e7def81775c2#C",t.Secret="f2b1c209d2974039a9e8e31b9480246f",t.GameID=214944,t.GameName="DreamMatch",t.Debug=!0}(n.GameConfig||(n.GameConfig={})),cc._RF.pop()},{}],GameData:[function(t,e,n){"use strict";cc._RF.push(e,"afb79YPx99FEoQZnvkGIKLN","GameData");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameDataManager=n.TaskInfo=n.GameSkillInfo=n.PlayerGameInfo=n.PlayerBaseInfo=void 0;var r=t("../../Config/GameEnum"),s=t("../../Framework/Net/NetListenerRegister"),c=t("../../NetWork/NetWorkMsgID"),l=t("./SkillData"),u=t("../../Framework/Event/EventManager"),p=t("../../Framework/Event/EventMessages"),h=t("../../Framework/Net/Net"),f=t("../../Framework/UI/UIManager"),m=t("../UI/UIWindows/UIBattleWindows/UIBattleController"),d=t("../../Framework/Utils/Logger"),_=t("../UI/UIWindows/UIMainWindows/UIMainController"),g=t("../UI/UIWindows/UISkillWindows/UISkillController"),I=t("../UI/UIWindows/UIMatchWindows/UIMatchController"),y=t("../UI/UIWindows/UITipsWindows/UITipsController"),E=t("../UI/UIWindows/UIRankListWindows/UIRankListController"),v=t("../../Framework/Scene/SceneManager"),M=t("../../Framework/Scene/Base/ISceneConfig"),S=t("../../Framework/Net/NetHeartManager"),C=t("../../Framework/Net/NetReconnectManager"),P=t("../../Framework/Utils/LocalStorageUtils"),O=t("../UI/UIWindows/UIWaitWindows/UIWaitController"),U=t("../UI/UIWindows/UIStoreWindows/UIStoreController"),T=t("../../Framework/Platform/PlatformSDK"),b=t("../SDK/SDKManager"),D=t("../SDK/GameSDKEnum"),R=cc._decorator.ccclass,k=function(){function t(){this.isFristNet=!0,this.isFristEnterGame=!0,this.lastRoomId="",this.cdnURL="https://yaahlan.momocdn.com/picture/06/44/0644D572-5AA2-411B-9DD2-08C6DB74E6F020240104_L.jpg",this.gameMode=r.GameEnum.PVPType.None,this.trophyNum=0,this.goldNum=0,this.diamondNum=0,this.currentTaskInfo=new N,this.avatarHeight=0,this.teamInfoDic=new Map,this.teamInfoUIDDic=new Map,this.rankList=new Array}var e;return e=t,t.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},t.prototype.InitData=function(){this.RegisterNet(),this.EnterGameLogic()},t.prototype.EnterGameLogic=function(){S.NetHeartManagerInstance.Init(!1),h.NetInstance.connectServer("172.16.14.25",8086)},t.prototype.RegisterNet=function(){this.OnNetWorkConnectSuccessEvent_handel=this.OnNetWorkConnectSuccessEvent.bind(this),this.OnNetWorkConnectFailEvent_handel=this.OnNetWorkConnectFailEvent.bind(this),this.OnNetWorkConnectDisconnectEvent_handel=this.OnNetWorkConnectDisconnectEvent.bind(this),this.OnNetWorkConnectDisconnectNotReconnectEvent_handel=this.OnNetWorkConnectDisconnectNotReconnectEvent.bind(this),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.LOGIN_RESPONSE,this.endLogin.bind(this)),u.EventManager.AddListener(p.EventMessages.NetWork_Connect_Success,this.OnNetWorkConnectSuccessEvent_handel),u.EventManager.AddListener(p.EventMessages.NetWork_Connect_Fail,this.OnNetWorkConnectFailEvent_handel),u.EventManager.AddListener(p.EventMessages.NetWork_Connect_Disconnect_Reconnect,this.OnNetWorkConnectDisconnectEvent_handel),u.EventManager.AddListener(p.EventMessages.NetWork_Connect_Disconnect_NotReconnect,this.OnNetWorkConnectDisconnectNotReconnectEvent_handel),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.PLAYER_INFO_UPDATE,this.RespDataPush.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.TASK_STATEPUSH_NOTIFY,this.RespTaskPush.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.RANKINGLIST_RESPONSE,this.RespRankList.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.START_GAME_RESPONSE,this.onStartGameNotify.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.CALLBACK_ROOM_RESPONSE,this.onCallBackRoom.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.GAME_SHOPOPEN_RESPONSE,this.RespStore.bind(this)),s.NetListenerRegisterInstance.RegistScListener(c.NetWorkMsgID.MATCH_RESULT_RESPONSE,this.OnMatchSuccess.bind(this))},t.prototype.UnRegisterNet=function(){s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.LOGIN_RESPONSE),u.EventManager.RemoveListener(p.EventMessages.NetWork_Connect_Success,this.OnNetWorkConnectSuccessEvent_handel),u.EventManager.RemoveListener(p.EventMessages.NetWork_Connect_Fail,this.OnNetWorkConnectFailEvent_handel),u.EventManager.RemoveListener(p.EventMessages.NetWork_Connect_Disconnect_Reconnect,this.OnNetWorkConnectDisconnectEvent_handel),u.EventManager.RemoveListener(p.EventMessages.NetWork_Connect_Disconnect_NotReconnect,this.OnNetWorkConnectDisconnectNotReconnectEvent_handel),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.PLAYER_INFO_UPDATE),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.TASK_STATEPUSH_NOTIFY),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.RANKINGLIST_RESPONSE),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.START_GAME_RESPONSE),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.GAME_SHOPOPEN_RESPONSE),s.NetListenerRegisterInstance.UnRegistScListener(c.NetWorkMsgID.MATCH_RESULT_RESPONSE)},t.prototype.OnNetWorkConnectSuccessEvent=function(){var t={};t.gameId=n.GameDataManager.gameId,t.token=n.GameDataManager.token,t.playerInfo={},t.playerInfo.nickName=n.GameDataManager.playerName,t.playerInfo.userId=n.GameDataManager.uid,t.playerInfo.age=12,t.playerInfo.avatar="",t.playerInfo.gender="",h.NetInstance.sendMessage(c.NetWorkMsgID.LOGIN_REQUEST,t),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.LOGIN_REQUEST,t)),console.log("\u8fde\u63a5\u6210\u529f"),this.isFristNet=!1,this.getIsFristEnter(),S.NetHeartManagerInstance.ChangeGameHasHeart(!0),f.UIManagerInstance.CloseWindow(O.default),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Connect,b.SDKInstance.Click_PointData("connect"))},t.prototype.OnNetWorkConnectDisconnectNotReconnectEvent=function(){this.OnNetWorkConnectDisconnectEvent()},t.prototype.OnNetWorkConnectDisconnectEvent=function(){var t=this;if(!v.SceneManagerInstance.busing)if(this.isFristNet){var e=function(){t.EnterGameLogic()},n=function(){cc.director.end(),cc.game.end()};f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Nomal,143,e,n)}else e=function(){f.UIManagerInstance.OpenWindows(O.default),C.NetReconnectManagerInstance.TryReconnect()},n=function(){v.SceneManagerInstance.SwitchScene(M.LaunchSceneConfig)},f.UIManagerInstance.CloseWindow(O.default),f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Nomal,143,e,n)},t.prototype.OnNetWorkConnectFailEvent=function(){},t.prototype.endLogin=function(t){var e=this;if(d.Logger.logModel(t,"\u767b\u5f55"),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.LOGIN_RESPONSE,t)),null!=t)if(0==t.errorCode)if(null!=t.info&&(n.GameDataManager.goldNum=t.info.coin,n.GameDataManager.trophyNum=t.info.trophy,l.SkillDataManager.ServerSetSkillData(t.info.skillCount),null!=t.info.taskInfo&&n.GameDataManager.setCurrentTaskInfoData(t.info.taskInfo)),this.lastRoomId=t.lastRoomId,null==v.SceneManagerInstance.current_scene||v.SceneManagerInstance.current_scene.scene_config!=M.HomeSceneConfig||v.SceneManagerInstance.busing)v.SceneManagerInstance.SwitchScene(M.HomeSceneConfig);else if(u.EventManager.Brocast(p.EventMessages.COIN_DATA_REFRESH),u.EventManager.Brocast(p.EventMessages.TASK_REFRESH),""!=this.lastRoomId){var a={};a.roomId=this.lastRoomId,a.userId=this.uid,h.NetInstance.sendMessage(c.NetWorkMsgID.CALLBACK_ROOM_REQUEST,a),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.CALLBACK_ROOM_REQUEST,a))}else{var o=f.UIManagerInstance.GetWindows2Type(m.UIBattleController);null!=o&&o.activate&&f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Nomal_Exit,148,function(){f.UIManagerInstance.CloseWindow(m.UIBattleController),f.UIManagerInstance.OpenWindows(_.UIMainController)})}else 1002==t.errorCode&&f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Nomal_Sure,t.errorCode,function(){e.GameExit()})},t.prototype.RespTaskPush=function(t){this.setCurrentTaskInfoData(t.taskInfo),f.UIManagerInstance.IsOpenWindows(_.UIMainController)&&u.EventManager.Brocast(p.EventMessages.TASK_REFRESH),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.TASK_STATEPUSH_NOTIFY,t))},t.prototype.RespDataPush=function(t){d.Logger.logModel(t,"\u6570\u636e\u63a8\u9001"),this.goldNum=t.coin,this.trophyNum=t.trophy,l.SkillDataManager.ServerSetSkillData(t.skillCount),(f.UIManagerInstance.IsOpenWindows(_.UIMainController)||f.UIManagerInstance.IsOpenWindows(g.UISkillController))&&u.EventManager.Brocast(p.EventMessages.COIN_DATA_REFRESH),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.PLAYER_INFO_UPDATE,t))},t.prototype.ResqRankList=function(){h.NetInstance.sendMessage(c.NetWorkMsgID.RANKINGLIST_REQUEST,null),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.RANKINGLIST_REQUEST,null))},t.prototype.RespRankList=function(t){d.Logger.logModel(t,"\u6392\u884c\u699c\u6570\u636e"),0==t.errorCode&&(this.rankList.length=0,this.rankList=t.list,f.UIManagerInstance.OpenWindows(E.UIRankListController)),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.RANKINGLIST_RESPONSE,t))},t.prototype.ResqStore=function(){var t={};t.userId=n.GameDataManager.uid,h.NetInstance.sendMessage(c.NetWorkMsgID.GAME_SHOPOPEN_REQUEST,t),f.UIManagerInstance.OpenWindows(U.UIStoreController),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.GAME_SHOPOPEN_REQUEST,t))},t.prototype.RespStore=function(t){d.Logger.logModel(t,"\u5546\u5e97\u6d88\u606f"),0==t.errorCode?(n.GameDataManager.diamondNum=t.diamond,u.EventManager.Brocast(p.EventMessages.DIAMOND_REFRESH)):t.errorCode,b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.GAME_SHOPOPEN_RESPONSE,t))},t.prototype.onCallBackRoom=function(t){if(d.Logger.logModel(t,"\u91cd\u65b0\u56de\u5230\u623f\u95f4"),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.CALLBACK_ROOM_RESPONSE,t)),0==t.errorCode){f.UIManagerInstance.CloseWindow(y.UITipsController),n.GameDataManager.gameMode=t.gameMode,n.GameDataManager.teamInfoDic.clear(),n.GameDataManager.teamInfoUIDDic.clear(),t.playerInfo[a];var e=0;for(var a in t.playerInfo)e+=1,d.Logger.logModel(t.playerInfo[a],"\u6570\u636e"),n.GameDataManager.teamInfoDic.set(e,t.playerInfo[a]),n.GameDataManager.teamInfoUIDDic.set(t.playerInfo[a].userId,t.playerInfo[a]);this.onStartGameNotify(t.info)}else 1033==t.errorCode&&f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Nomal_Sure,148,function(){})},t.prototype.OnMatchSuccess=function(t){b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.CALLBACK_ROOM_RESPONSE,t)),d.Logger.logModel(t,"\u5339\u914d\u6210\u529f\u63a8\u9001"),n.GameDataManager.teamInfoDic.clear(),n.GameDataManager.teamInfoUIDDic.clear(),n.GameDataManager.roomId=t.roomId;var e=t.result.length;if(n.GameDataManager.gameMode=r.GameEnum.PVPType.PVPOne,e>2&&(n.GameDataManager.gameMode=r.GameEnum.PVPType.Tournament),null!=t&&null!=t.result){var a=1;for(var o in t.result)t.result[o].userId!=n.GameDataManager.uid&&(n.GameDataManager.gameMode==r.GameEnum.PVPType.Tournament?(a+=1,this.SetTeamInfoData(a,t.result[o])):this.SetTeamInfoData(2,t.result[o]))}f.UIManagerInstance.IsOpenWindows(I.UIMatchController)&&u.EventManager.Brocast(p.EventMessages.GAME_MATCH_SUCCESS,t)},t.prototype.SetTeamInfoData=function(t,e){var a=new L;a.userId=e.userId,a.coin=e.coin,a.nickName=e.nickName,a.trophy=e.trophy,n.GameDataManager.teamInfoDic.set(t,a),n.GameDataManager.teamInfoUIDDic.set(a.userId,a)},t.prototype.onStartGameNotify=function(t){d.Logger.logModel(t,"\u6b63\u5f0f\u5f00\u59cb\u6e38\u620f"),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.START_GAME_RESPONSE,t)),null!=t&&(this.checkerboardData=t,this.roomId=t.roomId,f.UIManagerInstance.IsOpenWindows(m.UIBattleController)?f.UIManagerInstance.GetWindows2Type(m.UIBattleController).GameStart(t):(f.UIManagerInstance.CloseWindow(_.UIMainController),f.UIManagerInstance.CloseWindow(g.UISkillController),f.UIManagerInstance.CloseWindow(I.UIMatchController),f.UIManagerInstance.OpenWindows(m.UIBattleController,t)))},t.prototype.setCurrentTaskInfoData=function(t){this.currentTaskInfo.Id=t.taskId,this.currentTaskInfo.acceptTime=t.taskAcceptTime,this.currentTaskInfo.progress=t.taskProgress},t.prototype.getIsFristEnter=function(){P.LocalStorageUtils.getString("uid")!=n.GameDataManager.uid?(this.isFristEnterGame=!0,P.LocalStorageUtils.setString("uid",n.GameDataManager.uid)):this.isFristEnterGame=!1},t.prototype.getUserName=function(t){return this.teamInfoUIDDic.has(t)?this.teamInfoUIDDic.get(t).nickName:"1001"},t.prototype.OpenHeadTips=function(t){f.UIManagerInstance.OpenWindows(y.UITipsController,r.GameEnum.TipType.Head,t)},t.prototype.GameExit=function(){var t={};t.userId=n.GameDataManager.uid,h.NetInstance.sendMessage(c.NetWorkMsgID.GAME_EXIT_REQUEST,t),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(c.NetWorkMsgID.GAME_EXIT_REQUEST,t)),d.Logger.logModel(t,"\u6e38\u620f\u5927\u9000"),cc.game.end(),T.PlatformSDKInstance.closeWebView()},t.prototype.OnDestory=function(){this.UnRegisterNet()},e=i([R],t)}();n.default=k;var w=function(){function t(){}return t.prototype.Clear=function(){this.userId="",this.nickName="",this.gender="",this.avatar="",this.age=0},t}();n.PlayerBaseInfo=w;var L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Clear=function(){t.prototype.Clear.call(this),this.coin=0,this.trophy=0,this.skillCount.clear()},e}(w);n.PlayerGameInfo=L;n.GameSkillInfo=function(){};var N=function(){};n.TaskInfo=N,n.GameDataManager=k.getInstance(),cc._RF.pop()},{"../../Config/GameEnum":"GameEnum","../../Framework/Event/EventManager":"EventManager","../../Framework/Event/EventMessages":"EventMessages","../../Framework/Net/Net":"Net","../../Framework/Net/NetHeartManager":"NetHeartManager","../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../Framework/Net/NetReconnectManager":"NetReconnectManager","../../Framework/Platform/PlatformSDK":"PlatformSDK","../../Framework/Scene/Base/ISceneConfig":"ISceneConfig","../../Framework/Scene/SceneManager":"SceneManager","../../Framework/UI/UIManager":"UIManager","../../Framework/Utils/LocalStorageUtils":"LocalStorageUtils","../../Framework/Utils/Logger":"Logger","../../NetWork/NetWorkMsgID":"NetWorkMsgID","../SDK/GameSDKEnum":"GameSDKEnum","../SDK/SDKManager":"SDKManager","../UI/UIWindows/UIBattleWindows/UIBattleController":"UIBattleController","../UI/UIWindows/UIMainWindows/UIMainController":"UIMainController","../UI/UIWindows/UIMatchWindows/UIMatchController":"UIMatchController","../UI/UIWindows/UIRankListWindows/UIRankListController":"UIRankListController","../UI/UIWindows/UISkillWindows/UISkillController":"UISkillController","../UI/UIWindows/UIStoreWindows/UIStoreController":"UIStoreController","../UI/UIWindows/UITipsWindows/UITipsController":"UITipsController","../UI/UIWindows/UIWaitWindows/UIWaitController":"UIWaitController","./SkillData":"SkillData"}],GameEnum:[function(t,e,n){"use strict";cc._RF.push(e,"82073lEB+NPJKIRsl76dLsO","GameEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameEnum=void 0,function(t){(function(t){t[t.None=0]="None",t[t.NORMAL=1]="NORMAL",t[t.COMBO_ROW=2]="COMBO_ROW",t[t.COMBO_COLUMN=3]="COMBO_COLUMN",t[t.COMBO_BOOM=4]="COMBO_BOOM",t[t.COMBO_SAME=5]="COMBO_SAME"})(t.CellCombType||(t.CellCombType={})),function(t){t[t.NONE=0]="NONE",t[t.NORMAL=1]="NORMAL",t[t.ROW=3]="ROW",t[t.COLUMN=4]="COLUMN",t[t.BOOM=5]="BOOM",t[t.SAME=6]="SAME",t[t.CHANGE_TYPE=7]="CHANGE_TYPE",t[t.BOOM_SECOND=8]="BOOM_SECOND"}(t.CellEliminationType||(t.CellEliminationType={})),function(t){t[t.FORBID=-1]="FORBID",t[t.NONE=0]="NONE",t[t.COMBO=1]="COMBO",t[t.COMBO_ROW=3]="COMBO_ROW",t[t.COMBO_COLUMN=4]="COMBO_COLUMN",t[t.COMBO_BOOM=5]="COMBO_BOOM",t[t.COMBO_SAME=6]="COMBO_SAME",t[t.COMBO_CHANGE_TYPE=7]="COMBO_CHANGE_TYPE",t[t.COMBO_BOOM_SECOND=8]="COMBO_BOOM_SECOND"}(t.CellState||(t.CellState={})),function(t){t[t.NONE=0]="NONE",t[t.BLUE=1]="BLUE",t[t.RED=2]="RED",t[t.YELLOW=3]="YELLOW",t[t.GREEN=4]="GREEN",t[t.PURPLE=5]="PURPLE",t[t.ORANGE=6]="ORANGE"}(t.CellType||(t.CellType={})),function(t){t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL"}(t.ComboDirection||(t.ComboDirection={})),function(t){t[t.BOMB=1]="BOMB",t[t.H_BOMB=2]="H_BOMB",t[t.V_BOMB=3]="V_BOMB",t[t.CROSS_BOMB=4]="CROSS_BOMB",t[t.CROSS_BOMB_3=5]="CROSS_BOMB_3",t[t.FULL_BOMB=6]="FULL_BOMB",t[t.COLOR_AND_BOMB=7]="COLOR_AND_BOMB",t[t.COLOR_AND_NORMAL=8]="COLOR_AND_NORMAL",t[t.ELIMINATE_ITEM_HAMMER=20]="ELIMINATE_ITEM_HAMMER",t[t.ELIMINATE_SKILL_1=21]="ELIMINATE_SKILL_1",t[t.ELIMINATE_SKILL_2=22]="ELIMINATE_SKILL_2",t[t.ELIMINATE_SKILL_3=23]="ELIMINATE_SKILL_3",t[t.ELIMINATE_SKILL_4=24]="ELIMINATE_SKILL_4",t[t.ELIMINATE_SKILL_5=25]="ELIMINATE_SKILL_5",t[t.ELIMINATE_SKILL_6=26]="ELIMINATE_SKILL_6",t[t.CROSS_BOMB_3_H=27]="CROSS_BOMB_3_H",t[t.CROSS_BOMB_3_V=28]="CROSS_BOMB_3_V",t[t.COLOR_AND_BOMB_H=29]="COLOR_AND_BOMB_H",t[t.COLOR_AND_BOMB_V=30]="COLOR_AND_BOMB_V",t[t.COLOR_AND_BOMB_S=31]="COLOR_AND_BOMB_S"}(t.EffectType||(t.EffectType={})),function(t){t[t.NONE=0]="NONE",t[t.PROP1=1]="PROP1",t[t.PROP2=2]="PROP2",t[t.PROP3=3]="PROP3",t[t.PROP4=4]="PROP4",t[t.PROP5=5]="PROP5",t[t.PROP6=6]="PROP6",t[t.PROP7=7]="PROP7",t[t.PROP8=8]="PROP8"}(t.ItemType||(t.ItemType={})),function(t){t[t.NONE=0]="NONE",t[t.ICE_ONE=1001]="ICE_ONE",t[t.ICE_TWO=1002]="ICE_TWO",t[t.IRON_WIRE=2]="IRON_WIRE",t[t.BUBBLE=3]="BUBBLE",t[t.OCTOPUS=4]="OCTOPUS",t[t.CROSS=5]="CROSS"}(t.ObstacleType||(t.ObstacleType={})),function(t){t[t.NONE=0]="NONE",t[t.NORMAL=1]="NORMAL",t[t.Iron=2]="Iron",t[t.ICE1=3]="ICE1",t[t.ICE2=4]="ICE2"}(t.SquareType||(t.SquareType={})),function(t){t[t.Elimination=1]="Elimination",t[t.Score=2]="Score"}(t.TaskType||(t.TaskType={})),function(t){t[t.None=0]="None",t[t.PVPOne=1]="PVPOne",t[t.Tournament=2]="Tournament",t[t.Private=3]="Private"}(t.PVPType||(t.PVPType={})),function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.ItemUse=2]="ItemUse",t[t.Hint=3]="Hint",t[t.Skill=4]="Skill",t[t.Hammer=5]="Hammer",t[t.Shuffle=6]="Shuffle"}(t.OperateType||(t.OperateType={})),function(t){t[t.None=0]="None",t[t.Shuffle=1]="Shuffle",t[t.Hammer=2]="Hammer"}(t.UseItemType||(t.UseItemType={})),function(t){t[t.None=0]="None",t[t.Blue=1]="Blue",t[t.Red=2]="Red"}(t.CampType||(t.CampType={})),function(t){t[t.Active=1]="Active",t[t.Passive=2]="Passive"}(t.GameOverType||(t.GameOverType={})),function(t){t[t.None=0]="None",t[t.FullMask=1]="FullMask",t[t.ManyFullMask=2]="ManyFullMask",t[t.TopMask=3]="TopMask",t[t.RoundFristMask=4]="RoundFristMask",t[t.RoundMask=5]="RoundMask"}(t.BattleMaskType||(t.BattleMaskType={})),function(t){t[t.Nomal=1]="Nomal",t[t.Nomal_Exit=2]="Nomal_Exit",t[t.Nomal_Sure=3]="Nomal_Sure",t[t.Head=4]="Head",t[t.Load=5]="Load"}(t.TipType||(t.TipType={}))}(n.GameEnum||(n.GameEnum={})),cc._RF.pop()},{}],GameLaunch:[function(t,e,n){"use strict";cc._RF.push(e,"01fa2k1jB9NVIYv+Zkd2FnZ","GameLaunch");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Config/GameConfig"),l=t("../Framework/Audio/AudioManager"),u=t("../Framework/Data/TableManager"),p=t("../Framework/Event/EventManager"),h=t("../Framework/Event/EventMessages"),f=t("../Framework/Localization/LocalizationManager"),m=t("../Framework/Net/HttpClient"),d=t("../Framework/Net/Net"),_=t("../Framework/Pool/GameObjectPool"),g=t("../Framework/Scene/SceneManager"),I=t("../Framework/Timer/TimerManager"),y=t("../Framework/UI/UIManager"),E=t("../Framework/Updater/UpdateManager"),v=t("../Framework/Net/NetReconnectManager"),M=t("../Framework/UI/Adaptater/AdaptaterManager"),S=t("../GameLogic/UI/UIWindows/UILoadWindows/UILoadController"),C=t("../GameLogic/Data/SkillData"),P=t("../GameLogic/Data/GameData"),O=t("../GameLogic/Data/TableData"),U=t("../GameLogic/SDK/SDKManager"),T=cc._decorator,b=T.ccclass,D=(T.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),this.OnInitManager(),y.UIManagerInstance.OpenWindows(S.default),U.SDKInstance.InitSDK()},e.prototype.OnInitManager=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return cc.game.setFrameRate(c.GameConfig.GameFrame),cc.debug.setDisplayStats(c.GameConfig.DisplayStats),E.UpdateManagerInstance.Init(),[4,this.InitGameTable()];case 1:return e.sent(),f.LocalizationManagerInstancec.Init(),f.LocalizationManagerInstancec.SetLocalization2String("en"),_.GameObjectPoolInstance.Init(),v.NetReconnectManagerInstance.Init(),y.UIManagerInstance.Init(),t=y.UIManagerInstance.GetContentNodes(),M.AdaptaterManagerInstance.Init(t),[4,this.InitGameAudio()];case 2:return e.sent(),I.TimerManagerInstance.Init(),l.AudioMgr.init(),g.SceneManagerInstance.Init(),d.NetInstance.Init(d.NetModule.GAME),m.HttpClientInstance.Init(),p.EventManager.AddListener(h.EventMessages.ENTER_SCENE,this.OnEnterSceneEvent),this.EnterLoading(),[2]}})})},e.prototype.OnEnterSceneEvent=function(){},e.prototype.InitGameTable=function(){return r(this,void 0,Promise,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,u.TableMgr.init()];case 1:return t.sent(),e(!0),[2]}})})})]})})},e.prototype.InitGameAudio=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t){l.AudioMgr.init(),t(!0)})]})})},e.prototype.InitGameData=function(){C.SkillDataManager.InitData(),O.TableDataManager.InitData()},e.prototype.start=function(){},e.prototype.EnterLoading=function(){this.InitGameData(),l.AudioMgr.playBGM("sfx_common_bgm",l.AudioType.EAudio_BGM)},e.prototype.update=function(t){E.UpdateManagerInstance.IsInited&&E.UpdateManagerInstance.Update(t)},e.prototype.lateUpdate=function(t){E.UpdateManagerInstance.IsInited&&E.UpdateManagerInstance.LateUpdate(t)},e.prototype.onDestroy=function(){P.GameDataManager.OnDestory(),O.TableDataManager.OnDestory(),C.SkillDataManager.OnDestory()},i([b],e)}(cc.Component));n.default=D,cc._RF.pop()},{"../Config/GameConfig":"GameConfig","../Framework/Audio/AudioManager":"AudioManager","../Framework/Data/TableManager":"TableManager","../Framework/Event/EventManager":"EventManager","../Framework/Event/EventMessages":"EventMessages","../Framework/Localization/LocalizationManager":"LocalizationManager","../Framework/Net/HttpClient":"HttpClient","../Framework/Net/Net":"Net","../Framework/Net/NetReconnectManager":"NetReconnectManager","../Framework/Pool/GameObjectPool":"GameObjectPool","../Framework/Scene/SceneManager":"SceneManager","../Framework/Timer/TimerManager":"TimerManager","../Framework/UI/Adaptater/AdaptaterManager":"AdaptaterManager","../Framework/UI/UIManager":"UIManager","../Framework/Updater/UpdateManager":"UpdateManager","../GameLogic/Data/GameData":"GameData","../GameLogic/Data/SkillData":"SkillData","../GameLogic/Data/TableData":"TableData","../GameLogic/SDK/SDKManager":"SDKManager","../GameLogic/UI/UIWindows/UILoadWindows/UILoadController":"UILoadController"}],GameObjectPool:[function(t,e,n){"use strict";cc._RF.push(e,"c2916tQ0TVOxazyJcz0Ogtm","GameObjectPool");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.GameObjectPoolInstance=n.GameObjectPool=void 0;var c=t("../Resources/LoaderManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__cacheTransRoot=null,e}return o(e,t),e.prototype.OnInit=function(){this.__cacheTransRoot=new cc.Node("GameObjectCacheRoot"),this.__cacheTransRoot.parent=cc.director.getScene(),cc.game.addPersistRootNode(this.__cacheTransRoot),this.__cacheTransRoot.active=!1,this.__instCache=new Map,this.__goPool=new Map},e.prototype.InitInst=function(t){null!=t&&(t.active=!0)},e.prototype.CheckHasCached=function(t){if(null!=t){if(this.__instCache.has(t)&&this.__instCache.get(t).length>0)return!0;if(this.__goPool.has(t)&&null!=this.__goPool.get(t))return!0}return!1},e.prototype.CacheAndInstGameObject=function(t,e,n){if(null!=t&&null!=e){this.__goPool.set(t,e),this.__instCache.has(t)||this.__instCache.set(t,new Array);for(var a=0;a<n;a++){var o=cc.instantiate(e);o.parent=this.__cacheTransRoot,this.__instCache.get(t).push(o)}}},e.prototype.TryGetFromCache=function(t){if(this.CheckHasCached(t)){if(this.__instCache.has(t)){var e=this.__instCache.get(t);if(e.length>0)return e.pop()}if(this.__goPool.has(t)&&null!=this.__goPool.get(t))return cc.instantiate(this.__goPool.get(t))}return null},e.prototype.PreLoadGameObject2Async=function(t,e,n,a){for(var o=[],l=4;l<arguments.length;l++)o[l-4]=arguments[l];return i(this,void 0,void 0,function(){var i;return r(this,function(r){switch(r.label){case 0:return null==t?(cc.error("GameObjectPool PreLoadGameObjectAsync  param error"),[2]):this.CheckHasCached(t)?(a.call.apply(a,s([n],o)),[2]):[4,c.LoaderMgr.loadAsset(t,cc.Prefab)];case 1:return null!=(i=r.sent())&&this.CacheAndInstGameObject(t,i,e),null!=a&&a.call.apply(a,s([n],o)),[2]}})})},e.prototype.GetGameObject2Async=function(t,e,n){for(var a=this,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];if(null!=t&&null!=e&&null!=n){var r=this.TryGetFromCache(t);if(null!=r)return this.InitInst(r),void n.call.apply(n,s([e,r],o));this.PreLoadGameObject2Async(t,1,this,function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var r=a.TryGetFromCache(t);a.InitInst(r),n.call.apply(n,s([e,r],o))})}else cc.error("GameObjectPool GetGameObjectAsync param error")},e.prototype.RecycleGameObject=function(t,e){null!=t&&null!=e||cc.error("GameObjectPool RecycleGameObject path == null || inst == null"),e.parent=this.__cacheTransRoot,e.active=!1,this.__instCache.has(t)||this.__instCache.set(t,new Array),this.__instCache.get(t).push(e)},e.prototype.OnCleanup=function(){},e}(t("../Singleton/Singleton").Singleton);n.GameObjectPool=l,n.GameObjectPoolInstance=l.GetInstance(l),cc._RF.pop()},{"../Resources/LoaderManager":"LoaderManager","../Singleton/Singleton":"Singleton"}],GameSDKEnum:[function(t,e,n){"use strict";cc._RF.push(e,"af173e8gotN3rjyCIAhDRdR","GameSDKEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameSDKEnum=void 0,function(t){(function(t){t.UserInfo="dreamMatch_client_login_userInfo",t.Token="dreamMatch_client_login_token",t.Websocketurl="dreamMatch_client_login_websocketurl",t.Connect="dreamMatch_client_login_connect",t.LoadFinish="dreamMatch_client_login_finish",t.Click_Set_Music="dreamMatch_client_click_settings_music",t.Click_Set_Sound="dreamMatch_client_click_settings_sound",t.Click_Set_Quit="dreamMatch_client_click_settings_quit",t.Click_Main_Task="dreamMatch_client_click_main_task",t.Click_Main_1v1="dreamMatch_client_click_main_1v1",t.Click_Main_Tournament="dreamMatch_client_click_main_tournament",t.Click_Main_Brawl="dreamMatch_client_click_main_brawl",t.Click_Main_Howtoplay="dreamMatch_client_click_main_howtoplay",t.Click_Main_Store="dreamMatch_client_click_main_store",t.Click_Main_Leaderboard="dreamMatch_client_click_main_leaderboard",t.Click_Main_Setting="dreamMatch_client_click_main_settings",t.Click_Skill_Icon="dreamMatch_client_click_skill_skillicon",t.Click_Skill_MutiBuy="dreamMatch_client_click_skill_mutiBuy",t.Click_Skill_Buy5="dreamMatch_client_click_skill_buy5",t.Click_Skill_Play="dreamMatch_client_click_skill_play",t.Click_Skill_Buy="dreamMatch_client_click_skill_buy",t.Click_Store_Buy="dreamMatch_client_click_store_buy",t.Click_Result_Back="dreamMatch_client_click_result_back",t.Click_ReturnGame_Confirm="dreamMatch_client_click_returnGame_confirm",t.Click_ReturnGame_Cancel="dreamMatch_client_click_returnGame_cancel",t.Click_QuitGame_Confirm="dreamMatch_client_click_quitGame_confirm",t.Click_QuitGame_Cancel="dreamMatch_client_click_quitGame_cancel",t.Click_NoRoomFound_Confirm="dreamMatch_client_click_noRoomFound_confirm",t.Page_Open="dreamMatch_client_page_open",t.Click_Battle_Skill="dreamMatch_client_click_match_skill",t.Click_Battle_Item="dreamMatch_client_click_match_item",t.Click_Battle_Quit="dreamMatch_client_click_match_quit",t.Popup_ReturnGame="dreamMatch_client_popup_returnGame",t.Popup_QuitGame="dreamMatch_client_popup_quitGame",t.Popup_NoRoomFound="dreamMatch_client_popup_noRoomFound",t.Protocol_Heartbeat="dreamMatch_client_protocol_heartbeat",t.Protocol_Req="dreamMatch_client_protocol_req",t.Protocol_Resp="dreamMatch_client_protocol_resp"})(t.PointType||(t.PointType={}))}(n.GameSDKEnum||(n.GameSDKEnum={})),cc._RF.pop()},{}],GameYaahlanSDK:[function(t,e,n){"use strict";cc._RF.push(e,"4248azVAm5JsZ8YjMCHlshC","GameYaahlanSDK");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GameYaahlanSDK=void 0;var s=t("../../Framework/Platform/PlatformSDK"),c=t("../../Framework/UI/Adaptater/AdaptaterManager"),l=t("../../Framework/Utils/Tool"),u=t("../Data/GameData"),p=t("./SDKManager"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initSDK=function(){this.InitYaahlanSDK()},e.prototype.InitYaahlanSDK=function(){return i(this,void 0,void 0,function(){var t,e,n;return r(this,function(a){switch(a.label){case 0:if(this.currentSDK=s.PlatformSDKInstance.GetCurrentSDK(),!this.currentSDK)return[3,4];t=!1,e=!1,n=!1,s.PlatformSDKInstance.closeLoading(),p.SDKInstance.SetLocale(),this.setAreaSafeHight(),this.currentSDK.getUserInfo(function(e){e&&(u.GameDataManager.uid=e.userId,u.GameDataManager.playerName=e.nickname,u.GameDataManager.avatar=e.avatar,u.GameDataManager.gender=e.gender,u.GameDataManager.age=e.age,t=!0)}),this.currentSDK.getJWT(function(t){u.GameDataManager.token=t.jwt,e=!0}),this.currentSDK.requestByNative(this.currentSDK.getRequestHost(),null,"post",function(t){u.GameDataManager.ws=t.url,n=!0}),a.label=1;case 1:return t&&e&&n?[3,3]:[4,l.default.WaitTime(cc.director.getDeltaTime())];case 2:return a.sent(),[3,1];case 3:u.GameDataManager.InitData(),c.AdaptaterManagerInstance.InitSafeArea(),a.label=4;case 4:return[2]}})})},e.prototype.setAreaSafeHight=function(){var t=this;s.PlatformSDKInstance.getStatusBarHeight(function(e){t.currentBarHeight=e})},e.prototype.getAreaSafe=function(){var t=cc.view.getDesignResolutionSize(),e=new cc.Rect(0,0,t.width,t.height);return s.PlatformSDKInstance.hasInit()&&this.currentSDK.getHeightAndWidth(),e},e.prototype.getHeightAndWidth=function(){var t=cc.view.getDesignResolutionSize(),e=new cc.Rect(0,0,t.width,t.height);if(s.PlatformSDKInstance.hasInit()){var n=this.currentSDK.getHeightAndWidth();e.width=n.x,e.height=n.y}return e},e.prototype.GameDataPoint=function(t,e){s.PlatformSDKInstance.hasInit()&&this.currentSDK.reportByNative(t,e,null)},e}(t("./GameBaseSDK").GameBaseSDK);n.GameYaahlanSDK=h,cc._RF.pop()},{"../../Framework/Platform/PlatformSDK":"PlatformSDK","../../Framework/UI/Adaptater/AdaptaterManager":"AdaptaterManager","../../Framework/Utils/Tool":"Tool","../Data/GameData":"GameData","./GameBaseSDK":"GameBaseSDK","./SDKManager":"SDKManager"}],HomeScene:[function(t,e,n){"use strict";cc._RF.push(e,"f23bdSUUKZDW6rO1WAFl2wb","HomeScene");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HomeScene=void 0;var i=t("../../Framework/Resources/LoaderManager"),r=t("../../Framework/Scene/Base/BaseScene"),s=t("../../Framework/UI/UIManager"),c=t("../UI/UIWindows/UIMainWindows/UIMainController"),l=t("../SDK/SDKManager"),u=t("../SDK/GameSDKEnum"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnCreate=function(){t.prototype.OnCreate.call(this),this.OnPreLoad(),this.AddPreloadResource("Font/calibrib",cc.Font,1),this.AddPreloadResource("Sound/Bgm/sfx_common_bgm",cc.AudioClip,1),this.AddPreloadResource("UI/Item/R_Item",cc.Prefab,1),this.AddPreloadResource("UI/Item/RankItem",cc.Prefab,1),this.AddPreloadResource("UI/Item/RewardItem",cc.Prefab,1),this.AddPreloadResource("UI/Item/SkillItem",cc.Prefab,1),this.AddPreloadResource("UI/Item/StoreItem",cc.Prefab,1),this.AddPreloadResource("UI/View/UIBattleWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIGameOverWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIMatchWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIRankListWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UISettingWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UISkillWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIStoreWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UITipsWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIWaitWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIHelpWindows",cc.Prefab,1),this.AddPreloadResource("UI/View/UIMainWindows",cc.Prefab,1)},e.prototype.OnComplete=function(){t.prototype.OnComplete.call(this),s.UIManagerInstance.OpenWindows(c.UIMainController),l.SDKInstance.GameDataPoint(u.GameSDKEnum.PointType.LoadFinish,null),l.SDKInstance.GameDataPoint(u.GameSDKEnum.PointType.Page_Open,l.SDKInstance.Page_PointData("UIMain"))},e.prototype.OnPreLoad=function(){i.LoaderMgr.PreloadRawAsset("UI/Item/BattleEffectRoot")},e.prototype.OnLeave=function(){t.prototype.OnLeave.call(this),s.UIManagerInstance.CloseWindow(c.UIMainController)},e}(r.BaseScene);n.HomeScene=p,cc._RF.pop()},{"../../Framework/Resources/LoaderManager":"LoaderManager","../../Framework/Scene/Base/BaseScene":"BaseScene","../../Framework/UI/UIManager":"UIManager","../SDK/GameSDKEnum":"GameSDKEnum","../SDK/SDKManager":"SDKManager","../UI/UIWindows/UIMainWindows/UIMainController":"UIMainController"}],HttpClient:[function(t,e,n){"use strict";cc._RF.push(e,"dcb75C0xS5LMpbdY8Y27lva","HttpClient");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HttpClientInstance=n.HttpClient=void 0;var i=t("../Singleton/Singleton"),r=t("./Http"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._http=null,e}return o(e,t),e.prototype.OnInit=function(){this._http=new r.Http},e.prototype.get=function(t){this._http.sendRequest(t,null,r.Http.HTTP_METHOD.GET,this.onComplete,this.onError,r.Http.HTTP_RESPONSETYPE.Json)},e.prototype.getByArraybuffer=function(t,e,n){this._http.sendRequest(t,null,r.Http.HTTP_METHOD.GET,e,n,r.Http.HTTP_RESPONSETYPE.Arraybuffer)},e.prototype.getWithParams=function(t,e,n,a){this._http.sendRequest(t,e,r.Http.HTTP_METHOD.GET,n,a,r.Http.HTTP_RESPONSETYPE.Json)},e.prototype.getWithParamsByArraybuffer=function(t,e,n,a){this._http.sendRequest(t,e,r.Http.HTTP_METHOD.GET,n,a,r.Http.HTTP_RESPONSETYPE.Arraybuffer)},e.prototype.postWithParams=function(t,e,n,a){this._http.sendRequest(t,e,r.Http.HTTP_METHOD.POST,n,a,r.Http.HTTP_RESPONSETYPE.Json)},e.prototype.postByArrayBuffer=function(t,e,n,a){this._http.sendRequest(t,e,r.Http.HTTP_METHOD.POST,n,a,r.Http.HTTP_RESPONSETYPE.Arraybuffer)},Object.defineProperty(e.prototype,"withCredentials",{get:function(){return this._http.withCredentials},set:function(t){this._http.withCredentials=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseType",{get:function(){return this._http.responseType},set:function(t){this._http.responseType=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this._http.response},enumerable:!1,configurable:!0}),e.prototype.getResponseHeader=function(t){return this._http.getResponseHeader(t)},e.prototype.onComplete=function(){},e.prototype.onError=function(t){t==r.Http.HTTP_ERROR.HTTP_NO_NETWORK||r.Http.HTTP_ERROR.HTTP_TIMEOUT||r.Http.HTTP_ERROR.HTTP_ONABORT},e}(i.Singleton);n.HttpClient=s,n.HttpClientInstance=s.GetInstance(s),cc._RF.pop()},{"../Singleton/Singleton":"Singleton","./Http":"Http"}],Http:[function(t,e,n){"use strict";cc._RF.push(e,"5b6bdrlnfpJgYic0RcSbq9x","Http"),Object.defineProperty(n,"__esModule",{value:!0}),n.Http=void 0;var a,o=t("./URLVariables"),i={};function r(t){return t>=200&&t<300}(function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"})(a||(a={}));var s=function(){function t(){}return t.prototype._getParamString=function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e.substr(0,e.length-1)},t.prototype._toLog=function(){return"HttpRequest:"+this._full_url+",method="+this._method+",timeout="+this._timeout},t.prototype.sendRequest=function(e,n,a,r,s,c){if(null!=e&&""!=e){if(this._url=e,this._errorCallback=s,this._completeCallback=r,this.responseType=c,n instanceof Object)(l=new o.URLVariables).variables=n,this._full_url=e+"?"+l.toString(),this._params=l.toString();else if("string"==typeof n){var l;(l=new o.URLVariables).decode(n),this._full_url=e+"?"+l.toString(),this._params=l.toString()}else this._full_url=e,this._params=n;if(null==i[this._full_url]){i[this._full_url]=!0,this._timeout=t.HTTP_TIME_OUT,this._retry_times=t.HTTP_MAX_RETRY_TIMES,this.open(this._full_url,a),cc.sys.isNative&&this.setRequestHeader("Accept-Encoding","gzip,deflate");var u=null;this._method==t.HTTP_METHOD.POST?(u=this._params,this.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.setRequestHeader("responseType",t.HTTP_RESPONSETYPE.Arraybuffer)):(this.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.setRequestHeader("responseType",t.HTTP_RESPONSETYPE.Json)),this._method==t.HTTP_METHOD.GET?this.send():c==t.HTTP_RESPONSETYPE.Json?this.send(JSON.stringify(n)):c==t.HTTP_RESPONSETYPE.Arraybuffer&&this.send(u)}else cc.warn("\u5730\u5740\u3010 "+e+" \u3011\u5df2\u6b63\u5728\u8bf7\u6c42\u4e2d\uff0c\u4e0d\u80fd\u91cd\u590d\u8bf7\u6c42!!")}else cc.warn("http-sendRequest:url\u4e0d\u80fd\u4e3a\u7a7a!!")},Object.defineProperty(t.prototype,"response",{get:function(){return this._xhr?null!=this._xhr.response?this._xhr.response:"text"==this._responseType?this._xhr.responseText:"json"==this._responseType?this._xhr.response:"arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)?window.convertResponseBodyToText(this._xhr.responseBody):"arraybuffer"==this._responseType?this._xhr.response:"document"==this._responseType?this._xhr.responseXML:null:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!1,configurable:!0}),t.prototype.open=function(e,n){this._method=n,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=cc.loader.getXMLHttpRequest(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onload=this.onload.bind(this),this._xhr.onerror=this.onError.bind(this),this._xhr.onabort=this.onAbort.bind(this),this._xhr.ontimeout=this.onTimeOut.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._timeout||t.HTTP_TIME_OUT,this._xhr.open(this._method,this._full_url,!0)},t.prototype.send=function(t){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this._headerObj)for(var e in this._headerObj)this._xhr.setRequestHeader(e,this._headerObj[e]);this._xhr.send(t)},t.prototype.onAbort=function(){delete i[this._full_url],cc.warn(this._toLog(),"request onabort"),null!=this._errorCallback&&this._errorCallback(t.HTTP_ERROR.HTTP_ONABORT)},t.prototype.getAllResponseHeaders=function(){return this._xhr?this._xhr.getAllResponseHeaders()||"":null},t.prototype.setRequestHeader=function(t,e){this._headerObj||(this._headerObj={}),this._headerObj[t]=e},t.prototype.getResponseHeader=function(t){return this._xhr?this._xhr.getResponseHeader(t)||"":null},t.prototype.onload=function(){if(delete i[this._full_url],r){cc.log(this._toLog(),"resp success! status code="+this._xhr.status+",responseType="+this.responseType+",response="+this.response);var t=this._xhr.getResponseHeader("responseType");cc.log("responseType="+t),this._completeCallback&&this._completeCallback(this.response)}},t.prototype.onError=function(){cc.warn(this._toLog(),"onerror, status code=",this._xhr.status),delete i[this._full_url],null!=this._errorCallback&&(this._xhr.readyState==a.OPENED&&0==this._xhr.status?this._errorCallback(t.HTTP_ERROR.HTTP_NO_NETWORK):this._errorCallback(t.HTTP_ERROR.HTTP_UNKNOWN_ERROR))},t.prototype.onTimeOut=function(){delete i[this._full_url],null!=this._errorCallback&&(this._errorCallback(t.HTTP_ERROR.HTTP_TIMEOUT),cc.warn(this._toLog(),"request ontimeout"))},t.prototype.onReadyStateChange=function(){this._xhr.readyState==a.DONE&&(r||(delete i[this._full_url],this._errorCallback&&this._errorCallback(this._xhr.status)))},t.prototype.updateProgress=function(t){t.lengthComputable&&cc.log("http-updateProgress:loaded="+t.loaded+", total="+t.total)},t.HTTP_ERROR={HTTP_NO_NETWORK:"http_request_no_network",HTTP_TIMEOUT:"http_time_out",HTTP_UNKNOWN_ERROR:"http_request_unknown_error",HTTP_ONABORT:"http_onabort"},t.HTTP_TIME_OUT=3e4,t.HTTP_MAX_RETRY_TIMES=3,t.HTTP_RESPONSETYPE={Arraybuffer:"arraybuffer",Json:"json"},t.HTTP_METHOD={GET:"GET",POST:"POST"},t}();n.Http=s,cc._RF.pop()},{"./URLVariables":"URLVariables"}],IBattleMessage:[function(t,e,n){"use strict";cc._RF.push(e,"9e1aaq3dedADYYtAUNusquM","IBattleMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameMessage:[function(t,e,n){"use strict";cc._RF.push(e,"34bc4ZtI/dN17zx6kmzx+ce","IGameMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IHeartMessage:[function(t,e,n){"use strict";cc._RF.push(e,"b091bmLZQ9Km7KoMMgZ+8VA","IHeartMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ILogInMessage:[function(t,e,n){"use strict";cc._RF.push(e,"e0f15BHoFFOwaBhsxBtIyNM","ILogInMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IMatchMessage:[function(t,e,n){"use strict";cc._RF.push(e,"74232rvY9hHoa/3N31w/Nw/","IMatchMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IMessage:[function(t,e,n){"use strict";cc._RF.push(e,"68c4eVoVq1BZKCu/hBIXgBM","IMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ISceneConfig:[function(t,e,n){"use strict";cc._RF.push(e,"af6f70UOsVMrp9Ig4A27iHS","ISceneConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.HomeSceneConfig=n.LaunchSceneConfig=n.BaseSceneConfig=void 0;var a=t("../../../GameLogic/Scene/HomeScene"),o=t("../../../GameLogic/Scene/LaunchScene"),i=t("./BaseScene");(function(t){t.Name="BaseScene",t.ScriptController=i.BaseScene})(n.BaseSceneConfig||(n.BaseSceneConfig={})),function(t){t.Name="LaunchScene",t.ScriptController=o.LaunchScene}(n.LaunchSceneConfig||(n.LaunchSceneConfig={})),function(t){t.Name="HomeScene",t.ScriptController=a.HomeScene}(n.HomeSceneConfig||(n.HomeSceneConfig={})),cc._RF.pop()},{"../../../GameLogic/Scene/HomeScene":"HomeScene","../../../GameLogic/Scene/LaunchScene":"LaunchScene","./BaseScene":"BaseScene"}],ITable:[function(t,e,n){"use strict";cc._RF.push(e,"3c21dB6Rb5K9Y/hu+Mnz7oX","ITable"),Object.defineProperty(n,"__esModule",{value:!0}),n.ETableName=void 0,function(t){t.CONSTANT="ConstantTable",t.DAILYQUESTTEMPLATE="DailyQuestTemplateTable",t.LEVELTEMPLATE="LevelTemplateTable",t.LOCALIZATION="LocalizationTable",t.SKILLTEMPLATE="SkillTemplateTable",t.STORETEMPLATE="StoreTemplateTable",t.TIPSTEMPLATE="TipsTemplateTable"}(n.ETableName||(n.ETableName={})),cc._RF.pop()},{}],ITestMessage:[function(t,e,n){"use strict";cc._RF.push(e,"8396e+71+JDv4ie0/pU1hpT","ITestMessage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Iterfaces:[function(t,e,n){"use strict";cc._RF.push(e,"e27ebLahgNB9a9d6mMoFTMD","Iterfaces"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],LanguageConfig:[function(t,e,n){"use strict";cc._RF.push(e,"2ddef6KYH9J849c+oSMqVuZ","LanguageConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageConfig=void 0,function(t){(function(t){t[t.zh=0]="zh",t[t.en=1]="en",t[t.ar=2]="ar",t[t.tr=3]="tr",t[t.French=4]="French",t[t.German=5]="German",t[t.Italian=6]="Italian",t[t.Russian=7]="Russian",t[t.Spanish=8]="Spanish",t[t.Thai=9]="Thai",t[t.Portuguese=10]="Portuguese",t[t.ChineseTraditional=11]="ChineseTraditional",t[t.Japanese=12]="Japanese",t[t.Korean=13]="Korean"})(t.Language||(t.Language={}))}(n.LanguageConfig||(n.LanguageConfig={})),cc._RF.pop()},{}],LaunchScene:[function(t,e,n){"use strict";cc._RF.push(e,"ffe6e+zjdFGirjYYGlfRAzR","LaunchScene");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LaunchScene=void 0;var i=t("../../Framework/Scene/Base/BaseScene"),r=t("../../Framework/UI/UIManager"),s=t("../Data/GameData"),c=t("../UI/UIWindows/UIBattleWindows/UIBattleController"),l=t("../UI/UIWindows/UIMainWindows/UIMainController"),u=t("../UI/UIWindows/UIMatchWindows/UIMatchController"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnCreate=function(){t.prototype.OnCreate.call(this)},e.prototype.OnComplete=function(){t.prototype.OnComplete.call(this),r.UIManagerInstance.CloseWindow(l.UIMainController),r.UIManagerInstance.CloseWindow(c.UIBattleController),r.UIManagerInstance.CloseWindow(u.UIMatchController),s.GameDataManager.isFristNet=!0,s.GameDataManager.EnterGameLogic()},e.prototype.OnLeave=function(){t.prototype.OnLeave.call(this)},e}(i.BaseScene);n.LaunchScene=p,cc._RF.pop()},{"../../Framework/Scene/Base/BaseScene":"BaseScene","../../Framework/UI/UIManager":"UIManager","../Data/GameData":"GameData","../UI/UIWindows/UIBattleWindows/UIBattleController":"UIBattleController","../UI/UIWindows/UIMainWindows/UIMainController":"UIMainController","../UI/UIWindows/UIMatchWindows/UIMatchController":"UIMatchController"}],LinkList:[function(t,e,n){"use strict";cc._RF.push(e,"a8022h/4+JOTLOwQZfPRUzX","LinkList"),Object.defineProperty(n,"__esModule",{value:!0}),n.LinkList=void 0;var a=function(){function t(){this._head=this._tail=null,this.pool=[]}return t.prototype.spawn_node=function(t,e){var n=this.pool.pop();return n?(n.key=t,n.data=e,n.next=null):n={key:t,data:e,next:null},n},Object.defineProperty(t.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),t.prototype.append=function(t,e){var n=this.spawn_node(t,e);return this._tail?(this._tail.next=n,this._tail=n):this._head=this._tail=n,n.key},t.prototype.remove=function(t){if(!t)return null;if(!this._head)return null;for(var e,n=this._head;n&&n.key!=t;)e=n,n=n.next;return n?(e?(e.next=n.next,n.next||(this._tail=e)):(this._head=n.next,n.next||(this._tail=null)),this.pool.push(n),n):null},t}();n.LinkList=a,cc._RF.pop()},{}],LoaderManager:[function(t,e,n){"use strict";cc._RF.push(e,"2b200YcuoFOhpm/c9upyLdq","LoaderManager");var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LoaderMgr=n.LoaderManager=void 0;var i=t("../Utils/Logger"),r=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.loadRawAsset=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n=cc.resources.get(t);n?e(n):cc.resources.load(t,function(n,a){if(n)return cc.error("loadRawAsset error",t),void e(null);e(a)})})]})})},t.prototype.loadRawAssetDir=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n={};cc.resources.loadDir(t,function(a,o,i){if(a)return cc.error("loadRawAssetDir error",t),void e(null);i.forEach(function(t){n[t]=cc.resources.get(t)}),e(n)})})]})})},t.prototype.loadExternalAsset=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n=cc.resources.get(t);n?e(n):cc.assetManager.loadRemote(t,function(n,a){if(n)return cc.error("loadExternalAsset error",t),void e(null);e(a)})})]})})},t.prototype.loadExternalAssetByType=function(t,e){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(n){var a=cc.resources.get(t);a?n(a):cc.assetManager.loadRemote(t,{ext:e},function(e,a){if(e)return cc.error("loadExternalAssetByType error",t),void n(null);n(a)})})]})})},t.prototype.loadExternalAssets=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n={},a=[];t.forEach(function(t){var e=cc.resources.get(t);e?n[t]=e:a.push(t)}),0!=a.length?(a.forEach(function(t){cc.assetManager.loadRemote(t,function(e,a){e?cc.error("loadExternalAssets error",t,e):n[t]=a})}),e(n)):e(n)})]})})},t.prototype.loadExternalAssetsByType=function(t,e){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(n){var a={},o=[];t.forEach(function(t){var e=cc.resources.get(t);e?a[t]=e:o.push(t)}),0!=o.length?(o.forEach(function(t,n){cc.assetManager.loadRemote(t,{ext:e[n]},function(e,n){e?cc.error("loadExternalAssets error",t,e):a[t]=n})}),n(a)):n(a)})]})})},t.prototype.loadAsset=function(t,e){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(n){var a=cc.resources.get(t,e);a?n(a):cc.resources.load(t,e,function(e,a){if(e)return cc.error("loadAsset error",t,e),void n(null);n(a)})})]})})},t.prototype.loadJsonAsset=function(t){return a(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.loadAsset(t,cc.JsonAsset)];case 1:return[2,e.sent()]}})})},t.prototype.loadAssetDir=function(t,e){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(n){var a={};cc.resources.loadDir(t,e,function(o){if(o)return cc.error("loadAssetDir error",t),void n(null);cc.resources.getDirWithPath(t,e).map(function(t){return t.path}).forEach(function(t){a[t]=cc.resources.get(t,e)}),n(a)})})]})})},t.prototype.loadJsonAssetDir=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){cc.resources.loadDir(t,cc.JsonAsset,function(n,a){if(n)return cc.error("loadAssetDir error",t),void e(null);e(a)})})]})})},t.prototype.loadResArray=function(t,e){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(n){var a={},o=[];t.forEach(function(t){var e=cc.resources.get(t);e?a[t]=e:o.push(t)}),0!=o.length?e?cc.resources.load(o,e,function(t){if(t)return cc.error("loadResArray error",o),void n(null);o.forEach(function(t){a[t]=cc.resources.get(t)}),n(a)}):cc.resources.load(o,function(t){if(t)return cc.error("loadResArray error",o),void n(null);o.forEach(function(t){a[t]=cc.resources.get(t)}),n(a)}):n(a)})]})})},t.prototype.loadJsonAssetArray=function(t){return a(this,void 0,Promise,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.loadResArray(t,cc.JsonAsset)];case 1:return[2,e.sent()]}})})},t.prototype.loadPrefab=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n=cc.resources.get(t,cc.Prefab);n?e(n):cc.resources.load(t,function(n,a){if(n)return cc.error("\u52a0\u8f7dprefab\u8d44\u6e90\u5931\u8d25:",t),void e(null);e(a)})})]})})},t.prototype.loadPrefabArray=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n={},a=[];t.forEach(function(t){var e=cc.resources.get(t,cc.Prefab);e?n[t]=e:a.push(t)}),0!=a.length?cc.resources.load(a,cc.Prefab,function(t){if(t)return cc.error("loadPrefabArray error",a),void e(null);a.forEach(function(t){n[t]=cc.resources.get(t,cc.Prefab)}),e(n)}):e(n)})]})})},t.prototype.loadPrefabDir=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){var n={};cc.resources.loadDir(t,cc.Prefab,function(a){if(a)return cc.error("loadPrefabObjDir error",t),void e(null);cc.resources.getDirWithPath(t,cc.Prefab).map(function(t){return t.path}).forEach(function(t){n[t]=cc.resources.get(t,cc.Prefab)}),e(n)})})]})})},t.prototype.PreloadRawAsset=function(t){return a(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(e){cc.resources.preload(t,cc.Asset,function(){},function(n){if(n)return cc.error("PreloadRawAssetDir error",t,"error=",n),void e(!1);i.Logger.logModel(t,"\u8d44\u6e90\u9884\u52a0\u8f7d"),e(!0)})})]})})},t}();n.LoaderManager=r,n.LoaderMgr=r.getInstance(),cc._RF.pop()},{"../Utils/Logger":"Logger"}],LocalStorageUtils:[function(t,e,n){"use strict";cc._RF.push(e,"68dc0Z3JgtE0rRcMvMX63Z6","LocalStorageUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.LocalStorageUtils=void 0;var a=function(){function t(){}return t.get=function(t){return cc.sys.localStorage.getItem(this.prefix+t)},t.set=function(t,e){cc.sys.localStorage.setItem(this.prefix+t,e)},t.clear=function(){cc.sys.localStorage.clear()},t.getNumber=function(t){var e=this.get(t);return null==e?null:parseInt(e)},t.setNumber=function(t,e){this.set(t,e)},t.getBoolean=function(t){return!!this.getNumber(t)},t.setBoolean=function(t,e){var n=0;e&&(n=1),this.set(t,n)},t.getString=function(t){return this.get(t)},t.setString=function(t,e){this.set(t,e)},t.setFloat=function(t,e){this.setNumber(t,e)},t.getFloat=function(t){var e=this.get(t);return e?parseFloat(e):null},t.setJson=function(t,e){this.set(t,JSON.stringify(e))},t.getJson=function(t){return JSON.parse(this.get(t))},t.prefix="",t}();n.LocalStorageUtils=a,cc._RF.pop()},{}],LocalizationManager:[function(t,e,n){"use strict";cc._RF.push(e,"4c2330nWvVFLr5fNsWe/ubr","LocalizationManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LocalizationManagerInstancec=void 0;var i=t("../../Config/ITable"),r=t("../Data/TableManager"),s=t("../Singleton/Singleton"),c=t("./LanguageConfig"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curLanguage=c.LanguageConfig.Language.en,e.localizationTemplateArray=null,e}return o(e,t),e.prototype.OnInit=function(){this.autoChangeLocalizationLableMap=new Map},e.prototype.InitLanaguageData=function(){},e.prototype.SetLocalization2String=function(t){this.curLanguage=c.LanguageConfig.Language[t]},e.prototype.SetLocalization=function(t){this.curLanguage!=t&&(this.curLanguage=t),this.ExecuteAutoChangeLanguage()},e.prototype.Get=function(t){if(null==t)return"localization_get_param_error";var e=r.TableMgr.getDataById(i.ETableName.LOCALIZATION,t),n="";if(null==e)n="localization_get_table_error_key = "+t;else switch(n=e.cn,this.curLanguage){case c.LanguageConfig.Language.zh:n=e.cn;break;case c.LanguageConfig.Language.en:n=e.en;break;case c.LanguageConfig.Language.ar:n=e.ar;break;case c.LanguageConfig.Language.tr:case c.LanguageConfig.Language.ChineseTraditional:case c.LanguageConfig.Language.Russian:case c.LanguageConfig.Language.French:case c.LanguageConfig.Language.Spanish:n=e.cn}return n},e.prototype.OnCleanup=function(){},e.prototype.RegistAutoChangeLanguage=function(t,e){null!=t&&this.autoChangeLocalizationLableMap.set(t,e)},e.prototype.UnRegistAutoChangeLanguage=function(t){null!=t&&this.autoChangeLocalizationLableMap.has(t)&&this.autoChangeLocalizationLableMap.delete(t)},e.prototype.ExecuteAutoChangeLanguage=function(){var t=this;this.autoChangeLocalizationLableMap.forEach(function(e,n){null!=n&&(n.string=t.Get(e))})},e}(s.Singleton);n.default=l,n.LocalizationManagerInstancec=l.GetInstance(l),cc._RF.pop()},{"../../Config/ITable":"ITable","../Data/TableManager":"TableManager","../Singleton/Singleton":"Singleton","./LanguageConfig":"LanguageConfig"}],Logger:[function(t,e,n){"use strict";var a;cc._RF.push(e,"8f24dgW9ipG06WgKYd4Z0oK","Logger"),Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=n.LogType=void 0,function(t){t[t.None=0]="None",t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace"}(a=n.LogType||(n.LogType={}));var o={1:"\u7f51\u7edc\u65e5\u5fd7",2:"\u6570\u636e\u65e5\u5fd7",4:"\u4e1a\u52a1\u65e5\u5fd7",8:"\u89c6\u56fe\u65e5\u5fd7",16:"\u914d\u7f6e\u65e5\u5fd7",32:"\u6807\u51c6\u65e5\u5fd7"},i=function(){function t(){}return t.init=function(){this.tags=a.Net|a.Model|a.Business|a.View|a.Config|a.Trace},t.setTags=function(t){void 0===t&&(t=null),t&&(this.tags=t)},t.start=function(t){void 0===t&&(t="Time"),console.time(t)},t.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},t.table=function(t){this.isOpen(a.Trace)&&console.table(t)},t.trace=function(t,e){if(void 0===e&&(e="color:#000000;"),this.isOpen(a.Trace))var n=n.call(null,"%c%s%s",e,this.getDateString(),t)},t.logNet=function(t,e){this.orange(a.Net,t,e)},t.logModel=function(t,e){this.violet(a.Model,t,e)},t.logBusiness=function(t,e){this.blue(a.Business,t,e)},t.logView=function(t,e){this.green(a.View,t,e)},t.logConfig=function(t,e){this.gray(a.Config,t,e)},t.logError=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cc.error(t,e)},t.orange=function(t,e,n){this.print(t,e,"color:#ee7700;",n)},t.violet=function(t,e,n){this.print(t,e,"color:Violet;",n)},t.blue=function(t,e,n){this.print(t,e,"color:#3a5fcd;",n)},t.green=function(t,e,n){this.print(t,e,"color:green;",n)},t.gray=function(t,e,n){this.print(t,e,"color:gray;",n)},t.isOpen=function(){return 0!=this.tags},t.print=function(t,e,n,a){if(this.isOpen(t)){var i=console.log||cc.log,r=o[t];a?i.call(null,"%c%s%s%s:%s%o",n,this.getDateString(),"["+r+"]",this.stack(5),a,e):i.call(null,"%c%s%s%s:%o",n,this.getDateString(),"["+r+"]",this.stack(5),e)}},t.stack=function(t){var e=(new Error).stack.split("\n"),n=[];e.forEach(function(t){var e,a=(t=t.substring(7)).split(" ");a.length<2?n.push(a[0]):n.push(((e={})[a[0]]=a[1],e))});var a,o=[],i=[];if(t<n.length-1)for(var r in n[t])if(2==(i=r.split(".")).length)o=i.concat();else{var s=(a=n[t][r]).lastIndexOf("/"),c=a.lastIndexOf(".");if(s>-1&&c>-1){var l=a.substring(s+1,c);o.push(l)}else o.push(a)}return 1==o.length?"["+o[0]+".ts]":2==o.length?"["+o[0]+".ts->"+o[1]+"]":""},t.getDateString=function(){var t=new Date,e=t.getHours().toString(),n="";return n+=(1==e.length?"0"+e:e)+":",n+=(1==(e=t.getMinutes().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getSeconds().toString()).length?"0"+e:e)+":",1==(e=t.getMilliseconds().toString()).length&&(e="00"+e),2==e.length&&(e="0"+e),"["+(n+=e)+"]"},t.tags=1,t}();n.Logger=i,i.init(),cc._RF.pop()},{}],MD5:[function(t,e,n){"use strict";cc._RF.push(e,"8ba6c1VS2VNn5lXnGJaQzm/","MD5"),Object.defineProperty(n,"__esModule",{value:!0}),n.MD5=void 0;var a=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var a=Array(16),o=Array(16),i=0;i<16;i++)a[i]=909522486^n[i],o[i]=1549556828^n[i];var r=this.binl_md5(a.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(o.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(i){this.hexcase=0}for(var e,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",o=0;o<t.length;o++)e=t.charCodeAt(o),a+=n.charAt(e>>>4&15)+n.charAt(15&e);return a},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(r){this.b64pad=""}for(var e="",n=t.length,a=0;a<n;a+=3)for(var o=t.charCodeAt(a)<<16|(a+1<n?t.charCodeAt(a+1)<<8:0)|(a+2<n?t.charCodeAt(a+2):0),i=0;i<4;i++)8*a+6*i>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-i)&63);return e},t.prototype.rstr2any=function(t,e){var n,a,o,i,r,s=e.length,c=Array(Math.ceil(t.length/2));for(n=0;n<c.length;n++)c[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(l);for(a=0;a<l;a++){for(r=Array(),i=0,n=0;n<c.length;n++)i=(i<<16)+c[n],i-=(o=Math.floor(i/s))*s,(r.length>0||o>0)&&(r[r.length]=o);u[a]=i,c=r}var p="";for(n=u.length-1;n>=0;n--)p+=e.charAt(u[n]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,n,a="",o=-1;++o<t.length;)e=t.charCodeAt(o),n=o+1<t.length?t.charCodeAt(o+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),o++),e<=127?a+=String.fromCharCode(e):e<=2047?a+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?a+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(a+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return a},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,a=-271733879,o=-1732584194,i=271733878,r=0;r<t.length;r+=16){var s=n,c=a,l=o,u=i;n=this.md5_ff(n,a,o,i,t[r+0],7,-680876936),i=this.md5_ff(i,n,a,o,t[r+1],12,-389564586),o=this.md5_ff(o,i,n,a,t[r+2],17,606105819),a=this.md5_ff(a,o,i,n,t[r+3],22,-1044525330),n=this.md5_ff(n,a,o,i,t[r+4],7,-176418897),i=this.md5_ff(i,n,a,o,t[r+5],12,1200080426),o=this.md5_ff(o,i,n,a,t[r+6],17,-1473231341),a=this.md5_ff(a,o,i,n,t[r+7],22,-45705983),n=this.md5_ff(n,a,o,i,t[r+8],7,1770035416),i=this.md5_ff(i,n,a,o,t[r+9],12,-1958414417),o=this.md5_ff(o,i,n,a,t[r+10],17,-42063),a=this.md5_ff(a,o,i,n,t[r+11],22,-1990404162),n=this.md5_ff(n,a,o,i,t[r+12],7,1804603682),i=this.md5_ff(i,n,a,o,t[r+13],12,-40341101),o=this.md5_ff(o,i,n,a,t[r+14],17,-1502002290),a=this.md5_ff(a,o,i,n,t[r+15],22,1236535329),n=this.md5_gg(n,a,o,i,t[r+1],5,-165796510),i=this.md5_gg(i,n,a,o,t[r+6],9,-1069501632),o=this.md5_gg(o,i,n,a,t[r+11],14,643717713),a=this.md5_gg(a,o,i,n,t[r+0],20,-373897302),n=this.md5_gg(n,a,o,i,t[r+5],5,-701558691),i=this.md5_gg(i,n,a,o,t[r+10],9,38016083),o=this.md5_gg(o,i,n,a,t[r+15],14,-660478335),a=this.md5_gg(a,o,i,n,t[r+4],20,-405537848),n=this.md5_gg(n,a,o,i,t[r+9],5,568446438),i=this.md5_gg(i,n,a,o,t[r+14],9,-1019803690),o=this.md5_gg(o,i,n,a,t[r+3],14,-187363961),a=this.md5_gg(a,o,i,n,t[r+8],20,1163531501),n=this.md5_gg(n,a,o,i,t[r+13],5,-1444681467),i=this.md5_gg(i,n,a,o,t[r+2],9,-51403784),o=this.md5_gg(o,i,n,a,t[r+7],14,1735328473),a=this.md5_gg(a,o,i,n,t[r+12],20,-1926607734),n=this.md5_hh(n,a,o,i,t[r+5],4,-378558),i=this.md5_hh(i,n,a,o,t[r+8],11,-2022574463),o=this.md5_hh(o,i,n,a,t[r+11],16,1839030562),a=this.md5_hh(a,o,i,n,t[r+14],23,-35309556),n=this.md5_hh(n,a,o,i,t[r+1],4,-1530992060),i=this.md5_hh(i,n,a,o,t[r+4],11,1272893353),o=this.md5_hh(o,i,n,a,t[r+7],16,-155497632),a=this.md5_hh(a,o,i,n,t[r+10],23,-1094730640),n=this.md5_hh(n,a,o,i,t[r+13],4,681279174),i=this.md5_hh(i,n,a,o,t[r+0],11,-358537222),o=this.md5_hh(o,i,n,a,t[r+3],16,-722521979),a=this.md5_hh(a,o,i,n,t[r+6],23,76029189),n=this.md5_hh(n,a,o,i,t[r+9],4,-640364487),i=this.md5_hh(i,n,a,o,t[r+12],11,-421815835),o=this.md5_hh(o,i,n,a,t[r+15],16,530742520),a=this.md5_hh(a,o,i,n,t[r+2],23,-995338651),n=this.md5_ii(n,a,o,i,t[r+0],6,-198630844),i=this.md5_ii(i,n,a,o,t[r+7],10,1126891415),o=this.md5_ii(o,i,n,a,t[r+14],15,-1416354905),a=this.md5_ii(a,o,i,n,t[r+5],21,-57434055),n=this.md5_ii(n,a,o,i,t[r+12],6,1700485571),i=this.md5_ii(i,n,a,o,t[r+3],10,-1894986606),o=this.md5_ii(o,i,n,a,t[r+10],15,-1051523),a=this.md5_ii(a,o,i,n,t[r+1],21,-2054922799),n=this.md5_ii(n,a,o,i,t[r+8],6,1873313359),i=this.md5_ii(i,n,a,o,t[r+15],10,-30611744),o=this.md5_ii(o,i,n,a,t[r+6],15,-1560198380),a=this.md5_ii(a,o,i,n,t[r+13],21,1309151649),n=this.md5_ii(n,a,o,i,t[r+4],6,-145523070),i=this.md5_ii(i,n,a,o,t[r+11],10,-1120210379),o=this.md5_ii(o,i,n,a,t[r+2],15,718787259),a=this.md5_ii(a,o,i,n,t[r+9],21,-343485551),n=this.safe_add(n,s),a=this.safe_add(a,c),o=this.safe_add(o,l),i=this.safe_add(i,u)}return[n,a,o,i]},t.prototype.md5_cmn=function(t,e,n,a,o,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(a,i)),o),n)},t.prototype.md5_ff=function(t,e,n,a,o,i,r){return this.md5_cmn(e&n|~e&a,t,e,o,i,r)},t.prototype.md5_gg=function(t,e,n,a,o,i,r){return this.md5_cmn(e&a|n&~a,t,e,o,i,r)},t.prototype.md5_hh=function(t,e,n,a,o,i,r){return this.md5_cmn(e^n^a,t,e,o,i,r)},t.prototype.md5_ii=function(t,e,n,a,o,i,r){return this.md5_cmn(n^(e|~a),t,e,o,i,r)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();n.MD5=a,cc._RF.pop()},{}],MathUtils:[function(t,e,n){"use strict";cc._RF.push(e,"9c225s753ZExaJciZzSMTh6","MathUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.MathUtils=n.Vec2=void 0;var a=parseFloat("1.192092896e-07F");n.Vec2=cc.Vec2,function(t){t.pVec2=function(t,e){return new n.Vec2(t,e)},t.RadianToAngle=function(t){return 180*t/Math.PI},t.AngleToRadian=function(t){return t/180*Math.PI},t.getRadian2=function(t,e){var n=e.x-t.x,a=e.y-t.y;return Math.atan2(a,n)},t.Add=function(e,n){return t.pVec2(e.x+n.x,e.y+n.y)},t.Sub=function(e,n){return t.pVec2(e.x-n.x,e.y-n.y)},t.Mult=function(e,n){return t.pVec2(e.x*n,e.y*n)},t.Midpoint=function(e,n){return t.Mult(t.Add(e,n),.5)},t.Dot=function(t,e){return t.x*e.x+t.y*e.y},t.Cross=function(t,e){return t.x*e.y-t.y*e.x},t.Perp=function(e){return t.pVec2(-e.y,e.x)},t.RPerp=function(e){return t.pVec2(e.y,-e.x)},t.Project=function(e,n){return t.Mult(n,t.Dot(e,n)/t.Dot(n,n))},t.LengthSQ=function(e){return t.Dot(e,e)},t.DistanceSQ=function(e,n){return t.LengthSQ(t.Sub(e,n))},t.Length=function(e){return Math.sqrt(t.LengthSQ(e))},t.Distance=function(e,n){return t.Length(t.Sub(e,n))},t.Normalize=function(e){var n=t.Length(e);return 0===n?t.pVec2(e):t.Mult(e,1/n)},t.ForAngle=function(e){return t.pVec2(Math.cos(e),Math.sin(e))},t.ToAngle=function(t){return Math.atan2(t.y,t.x)},t.clampf=function(t,e,n){if(e>n){var a=e;e=n,n=a}return t<e?e:t<n?t:n},t.clamp01=function(t){return t<0?0:t<1?t:1},t.Clamp=function(e,n,a){return t.pVec2(t.clampf(e.x,n.x,a.x),t.clampf(e.y,n.y,a.y))},t.FromSize=function(e){return t.pVec2(e.width,e.height)},t.CompOp=function(e,n){return t.pVec2(n(e.x),n(e.y))},t.Lerp=function(e,n,a){return t.Add(t.Mult(e,1-a),t.Mult(n,a))},t.FuzzyEqual=function(t,e,n){return t.x-n<=e.x&&e.x<=t.x+n&&t.y-n<=e.y&&e.y<=t.y+n},t.CompMult=function(e,n){return t.pVec2(e.x*n.x,e.y*n.y)},t.AngleSigned=function(e,n){var o=t.Normalize(e),i=t.Normalize(n),r=Math.atan2(o.x*i.y-o.y*i.x,t.Dot(o,i));return Math.abs(r)<a?0:r},t.Angle=function(e,n){var o=Math.acos(t.Dot(t.Normalize(e),t.Normalize(n)));return Math.abs(o)<a?0:o},t.RotateByAngle=function(e,n,a){var o=t.Sub(e,n),i=Math.cos(a),r=Math.sin(a),s=o.x;return o.x=s*i-o.y*r+n.x,o.y=s*r+o.y*i+n.y,o},t.LineIntersect=function(t,e,n,a,o){if(t.x===e.x&&t.y===e.y||n.x===a.x&&n.y===a.y)return!1;var i=e.x-t.x,r=e.y-t.y,s=a.x-n.x,c=a.y-n.y,l=t.x-n.x,u=t.y-n.y,p=c*i-s*r;return o.x=s*u-c*l,o.y=i*u-r*l,0===p?0===o.x||0===o.y:(o.x=o.x/p,o.y=o.y/p,!0)},t.SegmentIntersect=function(e,n,a,o){var i=t.pVec2(0,0);return!!(t.LineIntersect(e,n,a,o,i)&&i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1)},t.IntersectPoint=function(e,n,a,o){var i=t.pVec2(0,0);if(t.LineIntersect(e,n,a,o,i)){var r=t.pVec2(0,0);return r.x=e.x+i.x*(n.x-e.x),r.y=e.y+i.x*(n.y-e.y),r}return t.pVec2(0,0)},t.SameAs=function(t,e){return null!=t&&null!=e&&t.x===e.x&&t.y===e.y},t.NearestDistance=function(e,n,a){var o=t.Distance(n,a),i={};if(o<=1e-5)return i.isNear=!0,i.distance=0,i;var r=t.Distance(e,a);if(r<=1e-5)return i.isNear=!0,i.distance=0,i;var s=t.Distance(e,n);if(s<=1e-5)return i.isNear=!1,i.distance=o,i;if(o*o>=r*r+s*s)return i.isNear=!1,i.distance=r,i;if(r*r>=o*o+s*s)return i.isNear=!1,i.distance=o,i;var c=(o+r+s)/2,l=Math.sqrt(c*(c-o)*(c-r)*(c-s));return i.isNear=!0,i.distance=2*l/s,i},t.sin=function(e){var n=Math.floor(e),a=n+1,o=t.sinInt(n);return n==e?o:(e-n)*t.sinInt(a)+(a-e)*o},t.sinInt=function(t){return(t%=360)<0&&(t+=360),o[t]},t.cos=function(e){var n=Math.floor(e),a=n+1,o=t.cosInt(n);return n==e?o:(e-n)*t.cosInt(a)+(a-e)*o},t.cosInt=function(t){return(t%=360)<0&&(t+=360),i[t]}}(n.MathUtils||(n.MathUtils={}));for(var o={},i={},r=Math.PI/180,s=0;s<360;s++)o[s]=Math.sin(s*r),i[s]=Math.cos(s*r);o[90]=1,i[90]=0,o[180]=0,i[180]=-1,o[270]=-1,i[270]=0,cc._RF.pop()},{}],NativeApi:[function(t,e,n){"use strict";cc._RF.push(e,"442e0SDRXxBwqeMxg+bxwal","NativeApi"),Object.defineProperty(n,"__esModule",{value:!0}),n.NativeApi=void 0,function(t){t.getMic=function(){},t.getScreen=function(){},t.callPhone=function(t){window.open("tel:"+t,"_self")},t.sendMessage=function(t){window.open("sms:"+t,"_self")},t.getCurUrl=function(){return window.location.href},t.curAngle=Number(window.orientation)}(n.NativeApi||(n.NativeApi={})),cc._RF.pop()},{}],NetHeartManager:[function(t,e,n){"use strict";cc._RF.push(e,"e8ddfulr3pKFK2/ZP2jLKdN","NetHeartManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NetHeartManagerInstance=n.NetHeartManager=void 0;var i=t("../../NetWork/NetWorkMsgID"),r=t("../Singleton/Singleton"),s=t("../Updater/UpdateManager"),c=t("./Net"),l=t("./NetListenerRegister"),u=t("../Utils/Logger"),p=t("../../GameLogic/SDK/SDKManager"),h=t("../../GameLogic/SDK/GameSDKEnum"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heartBeatInterval=15e3,e.heartOverInterval=5e3,e.lastSendHeartTime=0,e.currTime=0,e.gameHasHerat=!1,e.isSendGameHerat=!1,e}return o(e,t),e.prototype.GetHeartIntervalsTime=function(){var t=this.GetCurrmilliseconds();return(this.heartBeatInterval-(t-this.lastSendHeartTime))/1e3},e.prototype.OnInit=function(t){this.csHeartID=i.NetWorkMsgID.CSHeartID,this.scHeartID=i.NetWorkMsgID.SCHeartID,this.ChangeGameHasHeart(t)},e.prototype.ChangeGameHasHeart=function(t){this.gameHasHerat=t,this.gameHasHerat?(s.UpdateManagerInstance.AddUpdate(this,this.Update),l.NetListenerRegisterInstance.RegistScListener(this.scHeartID,this.OnGameHeartEvent.bind(this)),this.isSendGameHerat=!1,this.ResetGameHeratTime(this.GetCurrmilliseconds())):(s.UpdateManagerInstance.RemoveUpdate(this,this.Update),l.NetListenerRegisterInstance.UnRegistScListener(this.scHeartID))},e.prototype.OnGameHeartEvent=function(t){u.Logger.logModel(t,"\u6536\u5230\u5fc3\u8df3"),this.isSendGameHerat=!1,this.ResetGameReceiveHeratTime()},e.prototype.GetCurrmilliseconds=function(){return(new Date).getTime()},e.prototype.Update=function(t){c.NetInstance.connected||(this.currTime+=t);var e=this.GetCurrmilliseconds();e-this.lastSendHeartTime>=this.heartBeatInterval&&(this.SendHeartMsg(),this.ResetGameHeratTime(e)),this.isSendGameHerat&&e-this.lastSendHeartTime>=this.heartOverInterval&&(u.Logger.logModel("\u68c0\u6d4b\u5fc3\u8df3\u8d85\u65f6\uff0c\u5f00\u59cb\u65ad\u5f00\u94fe\u63a5---\u5173\u95ed\u5fc3\u8df3"),this.isSendGameHerat=!1,c.NetInstance.closeServer(),this.ChangeGameHasHeart(!1),p.SDKInstance.GameDataPoint(h.GameSDKEnum.PointType.Protocol_Heartbeat,null))},e.prototype.ResetGameReceiveHeratTime=function(t){t=t||this.GetCurrmilliseconds(),this.lastSendHeartTime=t},e.prototype.ResetGameHeratTime=function(t){t=t||this.GetCurrmilliseconds(),this.lastSendHeartTime=t},e.prototype.SendHeartMsg=function(){this.isSendGameHerat=!0,u.Logger.logModel("\u53d1\u9001\u5fc3\u8df3"),c.NetInstance.sendMessage(this.csHeartID,null)},e.prototype.OnCleanup=function(){this.ChangeGameHasHeart(!1)},e}(r.Singleton);n.NetHeartManager=f,n.NetHeartManagerInstance=f.GetInstance(f),cc._RF.pop()},{"../../GameLogic/SDK/GameSDKEnum":"GameSDKEnum","../../GameLogic/SDK/SDKManager":"SDKManager","../../NetWork/NetWorkMsgID":"NetWorkMsgID","../Singleton/Singleton":"Singleton","../Updater/UpdateManager":"UpdateManager","../Utils/Logger":"Logger","./Net":"Net","./NetListenerRegister":"NetListenerRegister"}],NetListenerRegister:[function(t,e,n){"use strict";cc._RF.push(e,"a687eNcLD9Mu5FAhs+Zh2zV","NetListenerRegister");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NetListenerRegisterInstance=n.NetListenerRegister=void 0;var i=t("../../NetWork/NetWorkMsgID"),r=t("../Singleton/Singleton"),s=t("../Utils/Logger"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scCommandDict=new Map,e}return o(e,t),e.prototype.OnInit=function(){},e.prototype.Regist=function(){this.RegistScListener(i.NetWorkMsgID.TestMSGID,this.OnSocketEvent)},e.prototype.RegistScListener=function(t,e){this.scCommandDict.has(t)||this.scCommandDict.set(t,e)},e.prototype.UnRegistScListener=function(t){this.scCommandDict.has(t)&&this.scCommandDict.delete(t)},e.prototype.OnSocketEvent=function(){},e.prototype.OnExecuteEventListener=function(t,e){if(this.scCommandDict.has(t))if(null==e)this.scCommandDict.get(t)();else try{var n=JSON.parse(e);this.scCommandDict.get(t)(n)}catch(a){s.Logger.logError("parse message error!!!!! error="+a+"--msgID="+t)}},e}(r.Singleton);n.NetListenerRegister=c,n.NetListenerRegisterInstance=c.GetInstance(c),cc._RF.pop()},{"../../NetWork/NetWorkMsgID":"NetWorkMsgID","../Singleton/Singleton":"Singleton","../Utils/Logger":"Logger"}],NetReconnectManager:[function(t,e,n){"use strict";cc._RF.push(e,"e33c03jnSdDU6e9sCVa3FD+","NetReconnectManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NetReconnectManagerInstance=n.NetReconnectManager=void 0;var i=t("../Event/EventManager"),r=t("../Event/EventMessages"),s=t("../Singleton/Singleton"),c=t("../Timer/TimerManager"),l=t("./Net"),u=t("../UI/UIManager"),p=t("../../GameLogic/UI/UIWindows/UITipsWindows/UITipsController"),h=t("../../GameLogic/Data/GameData"),f=t("../Scene/SceneManager"),m=t("../../GameLogic/UI/UIWindows/UIWaitWindows/UIWaitController"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.silenceReconnectCount=3,e.currSilenceReconnectCount=0,e.reconnectIntervalTimne=0,e.reconnectIntervalIncreaseTimne=2,e.reconnecting=!1,e}return o(e,t),e.prototype.OnInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.silenceReconnectCount=3,this.currSilenceReconnectCount=0,this.reconnectIntervalTimne=0,this.reconnectIntervalIncreaseTimne=1,this.reconnecting=!1},e.prototype.TryReconnect=function(){var t=this;if(cc.log("NetReconnectManager........TryReconnect"),this.reconnecting=!1,!l.NetInstance.connected)if(this.CheckSocketState())if(u.UIManagerInstance.OpenWindows(m.default),this.currSilenceReconnectCount++,this.currSilenceReconnectCount>this.silenceReconnectCount)this.currSilenceReconnectCount=0,u.UIManagerInstance.CloseWindow(p.UITipsController),cc.log("\u9759\u9ed8\u91cd\u8fde\u6b21\u6570\u8d85\u51fa,\u901a\u77e5\u73a9\u5bb6(Tips or ???)\u7531\u73a9\u5bb6\u5224\u5b9a\u662f\u5426\u8fdb\u884c\u91cd\u8fde"),i.EventManager.Brocast(r.EventMessages.NetWork_Connect_Disconnect_Reconnect);else{var e=this.reconnectIntervalTimne+this.currSilenceReconnectCount*this.reconnectIntervalIncreaseTimne;c.TimerManagerInstance.doTimer(1e3*e,1,function(){cc.log("\u9759\u9ed8\u91cd\u8fde\u6b21\u6570:",t.currSilenceReconnectCount,"-\u9759\u9ed8\u91cd\u8fde\u4e2d...."),t.reconnecting=!0,l.NetInstance.reConnect()},this)}else i.EventManager.Brocast(r.EventMessages.NetWork_Connect_Disconnect_NotReconnect)},e.prototype.CheckSocketState=function(){return!h.GameDataManager.isFristNet&&!f.SceneManagerInstance.busing&&(cc.log("NetReconnectManager----------CheckSocketState"),!0)},e.prototype.ResetSilenceReconnectCount=function(){this.currSilenceReconnectCount=0},e.prototype.OnCleanup=function(){},e}(s.Singleton);n.NetReconnectManager=d,n.NetReconnectManagerInstance=d.GetInstance(d),cc._RF.pop()},{"../../GameLogic/Data/GameData":"GameData","../../GameLogic/UI/UIWindows/UITipsWindows/UITipsController":"UITipsController","../../GameLogic/UI/UIWindows/UIWaitWindows/UIWaitController":"UIWaitController","../Event/EventManager":"EventManager","../Event/EventMessages":"EventMessages","../Scene/SceneManager":"SceneManager","../Singleton/Singleton":"Singleton","../Timer/TimerManager":"TimerManager","../UI/UIManager":"UIManager","./Net":"Net"}],NetWorkMsgID:[function(t,e,n){"use strict";cc._RF.push(e,"425f8YfiENIcYwvbXEqJ8pq","NetWorkMsgID"),Object.defineProperty(n,"__esModule",{value:!0}),n.NetWorkMsgID=void 0,function(t){t.CSHeartID=1,t.SCHeartID=2,t.TestMSGID=10001,t.LOGIN_REQUEST=1001,t.LOGIN_RESPONSE=1002,t.MATCH_PVPONE_REQUEST=1003,t.MATCH_PVPONE_RESPONSE=1004,t.MATCH_RESULT_RESPONSE=1005,t.START_GAME_RESPONSE=1006,t.OPERATE_ELEMENT_REQUEST=1007,t.OPERATE_ELEMENT_RESPONSE=1008,t.GAME_RESULT_BROADCAST=1009,t.PLAYER_INFO_UPDATE=1010,t.Buy_TIP_REQUEST=1011,t.Buy_TIP_RESPONSE=1012,t.GAME_SHUFFLE_NOTIFY=1013,t.GAME_PLAYER_QUIT_REQUEST=1014,t.GAME_PLAYER_QUIT_NOTIFY=1016,t.PLAYER_OPERATE_TIMEOUT_GAME_UPDATE=1017,t.RANKINGLIST_REQUEST=1018,t.RANKINGLIST_RESPONSE=1019,t.TASK_STATEPUSH_NOTIFY=1020,t.TASK_REWARD_REQUEST=1021,t.TASK_REWARD_RESPONSE=1022,t.Game_OVER_MANY_RESPONSE=1023,t.Game_OVER_MANY_ROUND_RESPONSE=1024,t.CALLBACK_ROOM_REQUEST=1025,t.CALLBACK_ROOM_GIVEUP_REQUEST=1026,t.CALLBACK_ROOM_RESPONSE=1027,t.GAME_MANY_SCORE_RESPONSE=1028,t.GAME_EXIT_REQUEST=1029,t.GAME_SHOPOPEN_REQUEST=1030,t.GAME_SHOPOPEN_RESPONSE=1031,t.GAME_SHOP_BUY_REQUEST=1032,t.GAME_SHOP_BUY_RESPONSE=1033}(n.NetWorkMsgID||(n.NetWorkMsgID={})),cc._RF.pop()},{}],Net:[function(t,e,n){"use strict";cc._RF.push(e,"874d2exKrBJUYRYELdQc7JT","Net");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NetInstance=n.Net=n.NetModule=void 0;var i=t("./SocketManager"),r=t("./ByteArray"),s=t("./PacketBuffer"),c=t("../Event/EventManager"),l=t("../Singleton/Singleton"),u=t("./NetListenerRegister"),p=t("../Event/EventMessages"),h=t("./NetReconnectManager"),f=t("../Utils/Logger");(function(t){t.GAME="GAME",t.CHAT="CHAT",t.BATTLE="BATTLE"})(n.NetModule||(n.NetModule={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._module="",e.sock=null,e.packetBuffer=null,e.host="",e.port=0,e}return o(e,t),e.prototype.OnInit=function(t){this._module=t},e.prototype.connectServer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=80);try{this.host=t,this.port=e,this.sock=new i.SocketManager,this.sock.type=i.SocketManager.TYPE_BINARY,this.sock.on(i.SocketManager.CONNECT,this.onSocketConnect,this),this.sock.on(i.SocketManager.SOCKET_DATA,this.onReceiveMessage,this),this.sock.on(i.SocketManager.CLOSE,this.onSocketClose,this),this.sock.on(i.SocketManager.IO_ERROR,this.onSocketIOError,this),this.packetBuffer=new s.PacketBuffer,this.sock.connect(this.host,this.port),cc.log("Connect:"+this.host+":"+this.port)}catch(n){cc.error(n)}},e.prototype.str2ab=function(t){for(var e=new ArrayBuffer(2*t.length),n=new Uint8Array(e),a=0,o=t.length;a<o;a++)n[a]=t.charCodeAt(a);return e},e.prototype.sendMessage=function(t,e){try{var n=this.OnFormatMessage(e);if(0==this.connected)return void cc.error("sendError:mainId:"+t+"size:"+n);var a=new r.ByteArray;a.writeUTFBytes(n),a=s.PacketBuffer.getSendBA(t,a),this.sock.writeBytes(a),a.clear()}catch(o){cc.error(o)}},e.prototype.OnFormatMessage=function(t){return JSON.stringify(t)},Object.defineProperty(e.prototype,"connected",{get:function(){return null!=this.sock&&this.sock.connected},enumerable:!1,configurable:!0}),e.prototype.closeServer=function(){this.sock.close()},e.prototype.reConnect=function(){cc.log("reConnect:"),this.connectServer(this.host,this.port)},e.prototype.reset=function(){this.host="",this.port=0,this.packetBuffer=null,this.sock=null},e.prototype.onSocketConnect=function(){c.EventManager.Brocast(p.EventMessages.NetWork_Connect_Success)},e.prototype.onSocketClose=function(){this.sock.off(i.SocketManager.CONNECT,this.onSocketConnect,this),this.sock.off(i.SocketManager.SOCKET_DATA,this.onReceiveMessage,this),this.sock.off(i.SocketManager.CLOSE,this.onSocketClose,this),this.sock.off(i.SocketManager.IO_ERROR,this.onSocketIOError,this),f.Logger.logError("\u7f51\u7edc\u65ad\u5f00\u94fe\u63a5"),h.NetReconnectManagerInstance.TryReconnect()},e.prototype.onSocketIOError=function(){cc.warn("onSocketIOError"),c.EventManager.Brocast(p.EventMessages.NetWork_Connect_Fail)},e.prototype.onReceiveMessage=function(){var t=new r.ByteArray;this.sock.readBytes(t);var e=[];if(this.packetBuffer){e=this.packetBuffer.getPackets(t);for(var n=0;n<e.length;n++){var a=e[n],o=new r.ByteArray,i=a.method;a.body.readBytes(o);var s=null;0!=o.length&&(s=o.readUTFBytes(o.length)),u.NetListenerRegisterInstance.OnExecuteEventListener(i,s),o.clear()}}t.clear(),e=[]},e}(l.Singleton);n.Net=m,n.NetInstance=m.GetInstance(m),cc._RF.pop()},{"../Event/EventManager":"EventManager","../Event/EventMessages":"EventMessages","../Singleton/Singleton":"Singleton","../Utils/Logger":"Logger","./ByteArray":"ByteArray","./NetListenerRegister":"NetListenerRegister","./NetReconnectManager":"NetReconnectManager","./PacketBuffer":"PacketBuffer","./SocketManager":"SocketManager"}],PacketBuffer:[function(t,e,n){"use strict";cc._RF.push(e,"4cc1fEAFshF1I271xPBOkKM","PacketBuffer"),Object.defineProperty(n,"__esModule",{value:!0}),n.PacketBuffer=void 0;var a=t("./ByteArray"),o=function(){function t(){this._buf=t.getBaseBA()}return t.getBaseBA=function(){var e=new a.ByteArray;return e.endian=t.endian,e},t.getRandom=function(t){return Math.round(Math.random()*t)},t.getSendBA=function(e,n){void 0===n&&(n=null);var a=t.getBaseBA();a.writeByte(t.getRandom(t.RANDOM_BASE)&t.MASK1),a.writeByte(t.getRandom(t.RANDOM_BASE)&t.MASK2);var o=n?n.length:0;return a.writeInt(t.METHOD_CODE_LEN+o),a.writeShort(e),n&&a.writeBytes(n),a.writeByte(t.getRandom(t.RANDOM_BASE)&t.MASK3),a.writeByte(t.getRandom(t.RANDOM_BASE)&t.MASK4),a},t.prototype.getPackets=function(e){var n,a,o=[],i=0,r=t.PRE_MASK_LEN+t.BODY_LEN;for(this._buf.position=this._buf.length,this._buf.writeBytes(e),this._buf.position=0;this._buf.bytesAvailable>=r;)if(((n=this._buf.readByte())&t.MASK1)==n&&((a=this._buf.readByte())&t.MASK2)==a){var s=this._buf.readInt();if(i=this._buf.position,this._buf.length<i+s+t.SUF_MASK_LEN)break;if(this._buf.position=i+s,n=this._buf.readByte(),a=this._buf.readByte(),(n&t.MASK3)==n&&(a&t.MASK4)==a){if(s<=t.MAX_SIZE){this._buf.position=i;var c={};c.method=this._buf.readShort();var l=t.getBaseBA();this._buf.readBytes(l,0,s-t.METHOD_CODE_LEN),l.position=0,c.body=l,o.push(c),this._buf.position+=t.SUF_MASK_LEN}}else this._buf.position=i}if(i=this._buf.position,this._buf.bytesAvailable<=0)this.clear();else{var u=t.getBaseBA();this._buf.position=i-r,this._buf.readBytes(u,0,this._buf.bytesAvailable),this.clear(),this._buf.writeBytes(u,0,u.length)}return o},t.prototype.clear=function(){this._buf=t.getBaseBA()},t.MASK1=89,t.MASK2=122,t.MASK3=122,t.MASK4=89,t.RANDOM_BASE=1e4,t.MAX_SIZE=21e8,t.SUF_MASK_LEN=2,t.PRE_MASK_LEN=2,t.BODY_LEN=4,t.METHOD_CODE_LEN=2,t.endian=a.Endian.BIG_ENDIAN,t}();n.PacketBuffer=o,cc._RF.pop()},{"./ByteArray":"ByteArray"}],PlatformSDK:[function(t,e,n){"use strict";cc._RF.push(e,"7cbeec3a59AE7nQoCk8B/J2","PlatformSDK");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformSDKInstance=n.PlatformSDK=void 0;var i=t("./SDKEnum"),r=t("./YaahlanSDK"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hasInit=!1,e}return o(e,t),e.prototype.hasInit=function(){return this._hasInit},e.prototype.initSDK=function(t,e){if(this._hasInit)return!1;switch(console.log("==platform==initSDK==="),t){case i.SDKEnum.yaahlan:this._sdk=new r.YaahlanSDK,this._hasInit=this._sdk.init(t,e);break;default:return!1}return!0},e.prototype.GetCurrentSDK=function(){return this._sdk},e.prototype.getSDKChannel=function(){if(console.log("==platform==getSDKChannel==="),this._hasInit)return this._sdk.getSDKChannel()},e.prototype.loading=function(t){if(!this._hasInit)return!1;console.log("==platform==loading==="+t);try{this._sdk.loading(t)}catch(e){console.error("Platform:loading==>"+e)}return!0},e.prototype.getGameInfo=function(t){if(!this._hasInit)return!1;console.log("==platform==getGameInfo===");try{this._sdk.getGameInfo(t)}catch(e){console.error("Platform:getGameInfo==>"+e)}return!0},e.prototype.getUserInfo=function(t){if(!this._hasInit)return!1;console.log("==platform==getUserInfo===");try{this._sdk.getUserInfo(t)}catch(e){console.error("Platform:getUserInfo==>"+e)}return!0},e.prototype.closeLoading=function(){if(!this._hasInit)return!1;console.log("==platform==closeLoading===");try{this._sdk.closeLoading()}catch(t){console.error("Platform:closeLoading==>"+t)}return!0},e.prototype.gameStart=function(t,e){if(!this._hasInit)return!1;console.log("==platform==gameStart===");try{this._sdk.gameStart(t,e)}catch(n){console.error(n)}return!0},e.prototype.gameEnd=function(t){if(!this._hasInit)return!1;console.log("==platform==gameEnd===");try{this._sdk.gameEnd(t)}catch(e){console.error(e)}return!0},e.prototype.gameReport=function(t){if(!this._hasInit)return!1;console.log("==platform==gameReport===");try{this._sdk.gameReport(t)}catch(e){console.error(e)}return!0},e.prototype.closeWebView=function(){if(!this._hasInit)return!1;console.log("==platform==closeWebView===");try{this._sdk.closeWebView()}catch(t){console.error(t)}return!0},e.prototype.initControlMic=function(){if(!this._hasInit)return!1;console.log("==platform==initControlMic===");try{this._sdk.initControlMic()}catch(t){console.error(t)}return!0},e.prototype.switchMic=function(t){if(!this._hasInit)return!1;console.log("==platform==switchMic===");try{this._sdk.switchMic(t)}catch(e){console.error(e)}return!0},e.prototype.initSyncChatMsg=function(){if(!this._hasInit)return!1;console.log("==platform==initSyncChatMsg===");try{this._sdk.initSyncChatMsg()}catch(t){console.error(t)}return!0},e.prototype.showRoomMessage=function(t){if(!this._hasInit)return!1;console.log("==platform==showRoomMessage===");try{this._sdk.showRoomMessage(t)}catch(e){console.error("Platform:showRoomMessage==>"+e)}return!0},e.prototype.showKeyboard=function(){if(!this._hasInit)return!1;console.log("==platform==showKeyboard===");try{this._sdk.showKeyboard()}catch(t){console.error(t)}return!0},e.prototype.showPayPage=function(){if(!this._hasInit)return!1;try{this._sdk.showPayPage()}catch(t){console.error(t)}return!0},e.prototype.initGameUIPosition=function(t,e){if(!this._hasInit)return!1;console.log("==platform==initGameUIPosition===");try{this._sdk.initGameUIPosition(t,e)}catch(n){console.error("Platform:initGameUIPosition==>"+n)}return!0},e.prototype.showToast=function(t){if(!this._hasInit)return!1;console.log("==platform==showToast===");try{this._sdk.showToast(t)}catch(e){console.error("Platform:showToast==>"+e)}return!0},e.prototype.initAvatarLocation=function(t){if(!this._hasInit)return!1;console.log("==platform==initAvatarLocation===");try{this._sdk.initAvatarLocation(t)}catch(e){console.error("Platform:initAvatarLocation==>"+e)}return!0},e.prototype.getStatusBarHeight=function(t){if(!this._hasInit)return!1;console.log("==platform==getStatusBarHeight===");try{this._sdk.getStatusBarHeight(t)}catch(e){console.error(e)}return!0},e.prototype.getStorageItem=function(t,e){if(!this._hasInit)return!1;console.log("==platform==getStorageItem===");try{this._sdk.getStorageItem(t,e)}catch(n){console.error(n)}return!0},e.prototype.setStorageItem=function(t){if(!this._hasInit)return!1;console.log("==platform==setStorageItem===");try{this._sdk.setStorageItem(t)}catch(e){console.error(e)}return!0},e.prototype.removeStorageItem=function(t){if(!this._hasInit)return!1;console.log("==platform==removeStorageItem===");try{this._sdk.removeStorageItem(t)}catch(e){console.error(e)}return!0},e.prototype.clearStorageItem=function(t){if(!this._hasInit)return!1;console.log("==platform==clearStorageItem===");try{this._sdk.clearStorageItem(t)}catch(e){console.error(e)}return!0},e.prototype.getLocale=function(t){if(!this._hasInit)return!1;console.log("==platform==getLocale===");try{this._sdk.getLocale(t)}catch(e){console.error(e)}return!0},e.prototype.getUserCharacter=function(t){if(!this._hasInit)return!1;console.log("==platform==getUserCharacter===");try{this._sdk.getUserCharacter(t)}catch(e){console.error(e)}return!0},e.prototype.showUserProfile=function(t){if(!this._hasInit)return!1;console.log("==platform==showUserProfile===");try{this._sdk.showUserProfile(t)}catch(e){console.error("Platform:showUserProfile==>"+e)}return!0},e}(t("../Singleton/Singleton").Singleton);n.PlatformSDK=s,n.PlatformSDKInstance=s.GetInstance(s),cc._RF.pop()},{"../Singleton/Singleton":"Singleton","./SDKEnum":"SDKEnum","./YaahlanSDK":"YaahlanSDK"}],PoolNodeManager:[function(t,e,n){"use strict";cc._RF.push(e,"06cc1rG6utD7bJdIcVHGZ46","PoolNodeManager");var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.PoolNodeMgr=n.PoolNodeManager=void 0;var i=t("../Resources/LoaderManager"),r=t("./Pool"),s=t("../Utils/Utils"),c=function(){function t(){this.poolMap=new Map}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.register=function(t,e){var n=s.getQualifiedClassName(t),a=this.poolMap.get(n);if(void 0===a){var o=new r.Pool(e);return this.poolMap.set(n,o),o}return a},t.prototype.getNode=function(t,e,n){var a=this.getPoolObj(t);if(a){var o=a.get(e);o?n(o):i.LoaderMgr.loadPrefab(e).then(function(t){if(t){var a=cc.instantiate(t);n(a)}else cc.warn("\u627e\u4e0d\u5230\u6307\u5b9a\u7684prefab:",e)})}else n(null)},t.prototype.getNodeAsync=function(t,e){return a(this,void 0,Promise,function(){var n,a,r;return o(this,function(o){switch(o.label){case 0:return(n=this.getPoolObj(t))?(a=n.get(e))?[2,a]:[4,i.LoaderMgr.loadPrefab(e)]:[3,2];case 1:return(r=o.sent())?(cc.loader.setAutoReleaseRecursively(r,!0),[2,cc.instantiate(r)]):(cc.warn("\u627e\u4e0d\u5230\u6307\u5b9a\u7684prefab:",e),[2,null]);case 2:return[2,null]}})})},t.prototype.put=function(t,e,n){if(n){var a=this.getPoolObj(t);a&&a.put(e,n)}else cc.warn("PoolManager:put, invalid node")},t.prototype.clearAtPath=function(t,e){var n=this.getPoolObj(t);n&&n.clearAtPath(e)},t.prototype.clear=function(t){var e=this.getPoolObj(t);e&&e.clear()},t.prototype.dump=function(t){var e=this.getPoolObj(t);e&&e.dump()},t.prototype.getPoolObj=function(t){var e=s.getQualifiedClassName(t),n=this.poolMap.get(e);return void 0===n?(cc.error("PoolManager this pool is undefined!!!"),null):n},t}();n.PoolNodeManager=c,n.PoolNodeMgr=c.getInstance(),cc._RF.pop()},{"../Resources/LoaderManager":"LoaderManager","../Utils/Utils":"Utils","./Pool":"Pool"}],Pool:[function(t,e,n){"use strict";cc._RF.push(e,"f7bb3VBHANM07dBCYUiYPUs","Pool"),Object.defineProperty(n,"__esModule",{value:!0}),n.Pool=void 0;var a=function(){function t(t){this.maxSize=10,this.cache={},this.path2time={},this.curSize=0,this.maxSize=t}return t.prototype.get=function(t){var e=this.cache[t];return e&&e.length>0?(this.curSize--,e.pop()):null},t.prototype.put=function(t,e){if(this.curSize>=this.maxSize){var n=void 0,a=cc.sys.now();for(var o in this.cache)if(this.cache[o].length>0&&this.path2time[o]<a){a=this.path2time[o],n=o;break}if(n&&""!=n){var i=this.cache[n].pop();i.destroy(),i=null,this.curSize--,cc.log("Pool:pool capacity is max, destroy old node,",n)}}var r=this.cache[t];null==r&&(r=[],this.cache[t]=r),e.removeFromParent(!0),r.push(e),this.curSize++,this.path2time[t]=cc.sys.now()},t.prototype.clearAtPath=function(t){var e=this.cache[t];if(e&&!(e.length<=0))for(;e.length>0;){var n=e.pop();n.destroy(),n=null,this.curSize--}},t.prototype.clear=function(){for(var t in this.cache)this.clearAtPath(t);this.cache={},this.path2time={},0!=this.curSize&&cc.warn("size should be 0, but now is",this.curSize)},t.prototype.dump=function(){var t="********Pool dump********";for(var e in this.cache)t+="\n"+e+"\n",this.cache[e].forEach(function(e){t+=e.name+","});t+="*******************************",t+="curSize:"+this.curSize,cc.log(t)},t}();n.Pool=a,cc._RF.pop()},{}],PopUpUtil:[function(t,e,n){"use strict";cc._RF.push(e,"442d3U6FsZIl5M/dmGMyku0","PopUpUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.PopUpUtil=n.UIDisappearType=n.UIAppearType=void 0;var a,o,i=t("../Components/easeConst"),r=t("../Extends/CCTweenEase");(function(t){t[t.NONE=0]="NONE",t[t.CENTER_SCALE_BACKOUT=1]="CENTER_SCALE_BACKOUT",t[t.CENTER_SCALE_ELASTICOUT=2]="CENTER_SCALE_ELASTICOUT",t[t.L2R_MOVE_CUBICOUT=3]="L2R_MOVE_CUBICOUT",t[t.R2L_MOVE_CUBICOUT=4]="R2L_MOVE_CUBICOUT",t[t.T2B_MOVE_CUBICOUT=5]="T2B_MOVE_CUBICOUT",t[t.B2T_MOVE_CUBICOUT=6]="B2T_MOVE_CUBICOUT"})(a=n.UIAppearType||(n.UIAppearType={})),function(t){t[t.NONE=0]="NONE",t[t.CENTER_SCALE=1]="CENTER_SCALE",t[t.L2R_MOVE_CUBICOUT=2]="L2R_MOVE_CUBICOUT",t[t.R2L_MOVE_CUBICOUT=3]="R2L_MOVE_CUBICOUT",t[t.T2B_MOVE_CUBICOUT=4]="T2B_MOVE_CUBICOUT",t[t.B2T_MOVE_CUBICOUT=5]="B2T_MOVE_CUBICOUT"}(o=n.UIDisappearType||(n.UIDisappearType={}));var s=function(){function t(){}return t.appearUI=function(t,e,n,o){if(void 0===e&&(e=a.NONE),void 0===n&&(n=function(){}),t){var s={};switch(s.callback=n,s.thisObj=o,s.fadeInType=1,s.fadeOutType=0,e){case a.NONE:n.call(o);break;case a.CENTER_SCALE_BACKOUT:s.TargetNode=t,s.Xscale=0,s.Yscale=0,s.Duration=.3,s.Alpha=0,s.AnimEase=i.default.animEase.easeBackOut,r.CCTweenEase.create(s);break;case a.CENTER_SCALE_ELASTICOUT:s.TargetNode=t,s.Xscale=0,s.Yscale=0,s.Duration=.3,s.Alpha=0,s.AnimEase=i.default.animEase.easeElasticOut,r.CCTweenEase.create(s);break;case a.L2R_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeX=-cc.view.getVisibleSize().width,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s);break;case a.R2L_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeX=cc.view.getVisibleSize().width,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s);break;case a.T2B_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeY=cc.view.getVisibleSize().height,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s);break;case a.B2T_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeY=-cc.view.getVisibleSize().height,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s);break;default:cc.log("Invalid UIAppearType:",e),n.call(o)}}},t.disappearUI=function(t,e,n,a){if(void 0===e&&(e=o.NONE),void 0===n&&(n=function(){}),t){var s={};switch(s.callback=n,s.thisObj=a,s.fadeInType=0,s.fadeOutType=1,e){case o.NONE:n.call(a);break;case o.CENTER_SCALE:s.TargetNode=t,s.Xscale=0,s.Yscale=0,s.Duration=.3,s.Alpha=0,r.CCTweenEase.create(s,!1);break;case o.L2R_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeX=cc.view.getVisibleSize().width,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s,!1);break;case o.R2L_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeX=-cc.view.getVisibleSize().width,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s,!1);break;case o.T2B_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeY=-cc.view.getVisibleSize().height,s.Duration=.3,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s,!1);break;case o.B2T_MOVE_CUBICOUT:s.TargetNode=t,s.RelativeY=cc.view.getVisibleSize().height,s.Duration=2,s.AnimEase=i.default.animEase.easeCubicActionOut,r.CCTweenEase.create(s,!1);break;default:cc.log("Invalid UIDisappearType:",e),n.call(a)}}},t}();n.PopUpUtil=s,cc._RF.pop()},{"../Components/easeConst":"easeConst","../Extends/CCTweenEase":"CCTweenEase"}],Queue:[function(t,e,n){"use strict";cc._RF.push(e,"87ebb5PFBRC7aWbeBcH/bA5","Queue");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=(o.property,function(){function t(){this.length=0}return t.prototype.enqueue=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){var n={item:e,next:null};t.last&&(t.last.next=n),t.last=n,t.first||(t.first=n),t.length++}),this.length},t.prototype.dequeue=function(){var t=this.first?this.first.item:void 0;return 1==this.length&&(this.first=this.last=null),this.first&&(this.first=this.first.next),t},t.prototype.toArray=function(){for(var t=[],e=this.first;e;)t.push(e.item),e=e.next;return t},t.prototype.fromArray=function(t){return this.first=this.last=null,this.enqueue.apply(this,t),this},a([i],t)}());n.default=r,cc._RF.pop()},{}],RegUtils:[function(t,e,n){"use strict";cc._RF.push(e,"c6adbpRvLFHMKpFCa19RAwm","RegUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.RegUtils=void 0,function(t){function e(t){return""==t||new RegExp("^[ ]+$").test(t)}t.validName=function(t){return null!=t&&""!=t&&!/[^\w\u4e00-\u9fa5]/g.test(t)},t.isWhitespace=function(t){return null==t||""==t||!/[^\s]+/g.test(t)},t.checkEmail=function(t){return!!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(t)||(alert("\u60a8\u8f93\u5165\u7684Email\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e\uff01"),!1)},t.isIP=function(t){return!e(t)&&!!(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(t)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256)},t.checkMobile=function(t){return!!new RegExp("/^1[3|4|5|7|8][0-9]d{4,8}$/").test(t)},t.checkPhone=function(t){return t.length>9?!!/^[0][1-9]{2,3}-[0-9]{5,10}$/.test(t)||(alert("\u60a8\u8f93\u5165\u7684\u7535\u8bdd\u53f7\u7801\u4e0d\u6b63\u786e!"),!1):!!/^[1-9]{1}[0-9]{5,8}$/.test(t)||(alert("\u60a8\u8f93\u5165\u7684\u7535\u8bdd\u53f7\u7801\u4e0d\u6b63\u786e!"),!1)},t.isNull=e,t.isInteger=function(t){return/^[-]{0,1}[0-9]{1,}$/.test(t)},t.isAll0xChar=function(t){return""!=t&&null!=t&&!/[^0-9A-Fa-f]/.test(t)},t.isAllDecimalChar=function(t){return""!=t&&null!=t&&!/[^0-9]/.test(t)},t.isNumber=function(t){var e=new RegExp("^[0-9]+$");return-1!=t.search(e)},t.isMoney=function(t){return!!new RegExp("^[0-9]+[.][0-9]{0,3}$").test(t)},t.cTrim=function(t,e){var n=" ",a=-1;if(0==e||1==e){for(;" "==n;)++a,n=t.substr(a,1);t=t.substring(a)}if(0==e||2==e){for(n=" ",a=t.length;" "==n;)--a,n=t.substr(a,1);t=t.substring(0,a+1)}return t}}(n.RegUtils||(n.RegUtils={})),cc._RF.pop()},{}],ResConfig:[function(t,e,n){"use strict";cc._RF.push(e,"61e26RPlMZO0L7DLt8yRwpp","ResConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.ResConfig=void 0,function(t){t.UI_PATH="Prefabs/UI/",t.MAP_PREFAB_PATH="Prefabs/Maps/",t.MAP_EVENT_OBJ="Prefabs/MapEvent/",t.BATTLE_LAYER_PATH="Prefabs/Common/BattleLayer",t.HERO_HPBAR_PATH="Prefabs/Common/hero_hpbar",t.MONSTER_HPBAR_PATH="Prefabs/Common/m_hpbar",t.UI_CONFIG={UI_WAITING:"Prefabs/UI/UIWaiting",UI_MESSAGE:"Prefabs/UI/UIMessage",UI_TEXTTIPS:"Prefabs/UI/UITextTips",UI_TOAST:"Prefabs/UI/UIToast",UI_ALERT:"Prefabs/UI/UIAlert",UI_MAIN:"Prefabs/UI/UIMain",UI_TOP:"Prefabs/UI/UITop",UI_SHOP:"Prefabs/UI/UIShop",UI_BOTTOM:"Prefabs/UI/UIBottom",UI_GAMEWIN:"Prefabs/UI/UIGameWin",UI_BATTLE_COUNT_DOWN:"Prefabs/UI/UIBattleCountDown"},t.UI_FONT={FONT:"Font/calibrib"},t.UI_ITEM={UI_SKLLITEM:"UI/Item/SkillItem",UI_RANKITEM:"UI/Item/RankItem",UI_STOREITEM:"UI/Item/StoreItem",UI_ROUNDITEM:"UI/Item/R_Item",UI_REWARDITEM:"UI/Item/RewardItem",UI_PLAYERINFO:"UI/Item/PlayerInfo",UI_HEADITEM:"UI/Item/HeadItem",UI_TOASTNODE:"UI/Item/ToastNode",UI_LOADITEM:"UI/Item/LoadItem",UI_TASKREWARDITEM:"UI/Item/PopReward",UI_BATTLEEFFECT:"UI/Item/BattleEffectRoot"},t.UI_TEXTURE={UI_ROUND_NUM_BIG:"Texture/UIBattle/ui_battle_numberofboard_big_blue_0",UI_ROUND_NUM_SMALL:"Texture/UIBattle/ui_battle_numberofboard_small_blue_0",UI_ROUND_MY:"Texture/UIBattle/ui_battle_progressbar_schedule_bluecamp",UI_ROUND_OTHER:"Texture/UIBattle/ui_battle_progressbar_schedule_redcamp",UI_ROUND_BLUE:"Texture/UIBattle/ui_battle_round_blue",UI_ROUND_RED:"Texture/UIBattle/ui_battle_round_red",UI_SHUFFLE_NORMAL_MY:"Texture/UIBattle/ui_battle_maneuver_bright_blue",UI_SHUFFLE_DARK_MY:"Texture/UIBattle/ui_battle_maneuver_dark_blue",UI_HAMMER_NORMAL_MY:"Texture/UIBattle/ui_battle_hammer_bright_blue",UI_HAMMER_DARK_MY:"Texture/UIBattle/ui_battle_hammer_dark_blue",UI_SHUFFLE_NORMAL_OTHER:"Texture/UIBattle/ui_battle_maneuver_bright_red",UI_SHUFFLE_DARK_OTHER:"Texture/UIBattle/ui_battle_maneuver_dark_red",UI_HAMMER_NORMAL_OTHER:"Texture/UIBattle/ui_battle_hammer_bright_red",UI_HAMMER_DARK_OTHER:"Texture/UIBattle/ui_battle_hammer_dark_red",UI_HEAD_BULE_LINE:"Texture/UIBattle/ui_manybattle_panel_02",UI_HEAD_RED_LINE:"Texture/UIBattle/ui_manybattle_panel_01",UI_WIN:"Texture/UIAccount/ui_account_show_youwin",UI_FAIL:"Texture/UIAccount/ui_account_show_youlose",UI_MANY_WIN:"Texture/UIAccount/ui_account_show_congratulations",UI_MANY_FAIL:"Texture/UIAccount/ui_account_show_tournamentends",UI_SET_TOP_LIGHT:"Texture/UISetting/ui_setting_button_turnon_02",UI_SET_BOTTOM_LIGHT:"Texture/UISetting/ui_setting_button_turnon_01",UI_SET_TOP_DRAK:"Texture/UISetting/ui_setting_button_closure_02",UI_SET_BOTTOM_DRAK:"Texture/UISetting/ui_setting_button_closure_01"},t.UI_ELIMINATE={BLUE:"Texture/eliminate/ui_elimination_blue",GREEN:"Texture/eliminate/ui_elimination_green",ORANGE:"Texture/eliminate/ui_elimination_orange",PURPLE:"Texture/eliminate/ui_elimination_Purple",RED:"Texture/eliminate/ui_elimination_red",YELLOW:"Texture/eliminate/ui_elimination_yellow"}}(n.ResConfig||(n.ResConfig={})),cc._RF.pop()},{}],ResolutionAutoFit:[function(t,e,n){"use strict";cc._RF.push(e,"d9f64c5YjdAvrxJMf2YgRqY","ResolutionAutoFit");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ResolutionAutoFit=void 0;var r=cc._decorator,s=r.ccclass,c=r.menu,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._oldSize=cc.Size.ZERO,e.lastCheckTime=0,e}return o(e,t),e.prototype.start=function(){this.adjustResolutionPolicy()},e.prototype.update=function(t){this.lastCheckTime+=t,this.lastCheckTime<.1||(this.lastCheckTime=0,this.adjustResolutionPolicy())},e.prototype.adjustResolutionPolicy=function(){var t=cc.view.getVisibleSize();if(!this._oldSize.equals(t)){var e=t.width/t.height,n=cc.view.getDesignResolutionSize();e>n.width/n.height?cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_HEIGHT):cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_WIDTH),this._oldSize=t,cc.warn("ResolutionAutoFit:",cc.view.getResolutionPolicy())}},i([s,c("Extends/ResolutionAutoFit")],e)}(cc.Component);n.ResolutionAutoFit=l,cc._RF.pop()},{}],ResourcesManager:[function(t,e,n){"use strict";cc._RF.push(e,"555528Oy7ZA2JfcUbIb5vBd","ResourcesManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ResourcesManager=void 0;n.ResourcesManager=function(){},cc._RF.pop()},{}],RigidBodyCollisionEx:[function(t,e,n){"use strict";cc._RF.push(e,"7356bX5uYZHVpD4ut6LJzS9","RigidBodyCollisionEx");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=cc._decorator,c=s.ccclass,l=s.property;s.menu,function(t){t[t.onBeginContact=0]="onBeginContact",t[t.onEndContact=1]="onEndContact",t[t.onPreSolve=2]="onPreSolve",t[t.onPostSolve=3]="onPostSolve"}(r||(r={}));var u=new Map;u.set(r.onBeginContact,"onBeginContact"),u.set(r.onEndContact,"onEndContact"),u.set(r.onPreSolve,"onPreSolve"),u.set(r.onPostSolve,"onPostSolve");var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisions=[],e.commands=[],e}return o(e,t),e.prototype.onLoad=function(){},i([l({type:cc.Enum(r),displayName:"\u521a\u4f53\u78b0\u649e\u7c7b\u578b"})],e.prototype,"collisions",void 0),i([l({type:cc.String,displayName:"\u78b0\u649e\u89e6\u53d1\u547d\u4ee4"})],e.prototype,"commands",void 0),i([c],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],SDKBase:[function(t,e,n){"use strict";cc._RF.push(e,"e33bd7LIoJIVaCSLCW3lUr7","SDKBase"),Object.defineProperty(n,"__esModule",{value:!0}),n.SDKBase=void 0;var a=function(){function t(){}return t.prototype.getGameType=function(){return this._gameType},t.prototype.getUserInfo=function(){},t.prototype.loading=function(){},t.prototype.closeLoading=function(){},t.prototype.closeWebView=function(){},t.prototype.initControlMic=function(){},t.prototype.switchMic=function(){},t.prototype.initSyncChatMsg=function(){},t.prototype.showRoomMessage=function(){},t.prototype.showKeyboard=function(){},t.prototype.showPayPage=function(){},t.prototype.initGameUIPosition=function(){},t.prototype.showToast=function(){},t.prototype.initAvatarLocation=function(){},t.prototype.getStatusBarHeight=function(){},t.prototype.getStorageItem=function(){},t.prototype.setStorageItem=function(){},t.prototype.removeStorageItem=function(){},t.prototype.clearStorageItem=function(){},t.prototype.getLocale=function(){},t.prototype.showUserProfile=function(){},t.prototype.getUserCharacter=function(){},t}();n.SDKBase=a,cc._RF.pop()},{}],SDKEnum:[function(t,e,n){"use strict";cc._RF.push(e,"b6a00F8c4dGjJDNs71eH1ZL","SDKEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.SDKEnum=void 0,function(t){t[t.yaahlan=1]="yaahlan"}(n.SDKEnum||(n.SDKEnum={})),cc._RF.pop()},{}],SDKManager:[function(t,e,n){"use strict";cc._RF.push(e,"1ea4clB/DVHEKJEEtn+YG9V","SDKManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SDKInstance=void 0;var r=t("../../Config/GameConfig"),s=t("../../Framework/Platform/PlatformSDK"),c=t("../../Framework/Platform/SDKEnum"),l=t("../../Framework/Singleton/Singleton"),u=t("../Data/GameData"),p=t("../Data/TimeData"),h=t("./GameYaahlanSDK"),f=t("../../Framework/Utils/Tool"),m=t("../../Config/GameEnum"),d=t("../../Framework/Utils/Logger"),_=cc._decorator,g=_.ccclass,I=(_.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.InitSDK=function(){this.time=new p.default,s.PlatformSDKInstance.initSDK(c.SDKEnum.yaahlan,r.GameConfig.GameName),s.PlatformSDKInstance.hasInit()?(s.PlatformSDKInstance.getSDKChannel()==c.SDKEnum.yaahlan&&(this.gameSDK=new h.GameYaahlanSDK),this.gameSDK.initSDK()):(u.GameDataManager.ws="ws://172.16.14.25:8086",u.GameDataManager.myuid=u.GameDataManager.uid="109",u.GameDataManager.token="token",u.GameDataManager.gameId=r.GameConfig.GameName,u.GameDataManager.playerName=u.GameDataManager.uid,u.GameDataManager.InitData())},e.prototype.getHeightAndWidth=function(){if(this.gameSDK)return this.gameSDK.getHeightAndWidth();var t=cc.view.getDesignResolutionSize();return new cc.Rect(0,0,t.width,t.height)},e.prototype.SetLocale=function(){this.gameSDK&&this.gameSDK.SetLocale()},e.prototype.showPayPage=function(){s.PlatformSDKInstance.showPayPage()},e.prototype.GameDataPoint=function(t,e){d.Logger.logModel(e,"\u6570\u636e\u57cb\u70b9"),this.gameSDK&&this.gameSDK.GameDataPoint(t,e)},e.prototype.PointData=function(){f.default.getDateString()},e.prototype.Page_PointData=function(t,e){return void 0===e&&(e=m.GameEnum.PVPType.None),{startTime:f.default.getDateString(),pageName:t,gameMode:e}},e.prototype.Click_PointData=function(t){return{startTime:f.default.getDateString(),param_1:t}},e.prototype.ClickSkill_PointData=function(t,e){return{startTime:f.default.getDateString(),gameMode:t,Id:e}},e.prototype.Protocol_PointData=function(t,e){return{startTime:f.default.getDateString(),messageID:t,messageData:e}},e.prototype.showToast=function(t){s.PlatformSDKInstance.showToast(t)},i([g],e)}(l.Singleton));n.default=I,n.SDKInstance=I.GetInstance(I),cc._RF.pop()},{"../../Config/GameConfig":"GameConfig","../../Config/GameEnum":"GameEnum","../../Framework/Platform/PlatformSDK":"PlatformSDK","../../Framework/Platform/SDKEnum":"SDKEnum","../../Framework/Singleton/Singleton":"Singleton","../../Framework/Utils/Logger":"Logger","../../Framework/Utils/Tool":"Tool","../Data/GameData":"GameData","../Data/TimeData":"TimeData","./GameYaahlanSDK":"GameYaahlanSDK"}],SceneManager:[function(t,e,n){"use strict";cc._RF.push(e,"cf221MdCoFI9bfP+ZyiODRA","SceneManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.SceneManagerInstance=n.SceneManager=void 0;var c=t("../../GameLogic/UI/UIWindows/UILoadWindows/UILoadController"),l=t("../Platform/PlatformSDK"),u=t("../Singleton/Singleton"),p=t("../UI/UIManager"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.current_scene=null,e.busing=!1,e.scenes=new Map,e}return o(e,t),e.prototype.OnInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.SwitchScene=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.busing||null!=this.current_scene&&this.current_scene.scene_config.Name==t.Name||(this.busing=!0,this.InnerSwitchScene.apply(this,s([t],e)))},e.prototype.OpenUILoadController=function(){return i(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(t){p.UIManagerInstance.OpenWindows(c.default),p.UIManagerInstance.GetWindows2Type(c.default).view_active&&t(!0)})]})})},e.prototype.WaitTime=function(t){return new Promise(function(e){setTimeout(function(){return e(1e3*t)},1e3)})},e.prototype.InnerSwitchScene=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(this,void 0,void 0,function(){var e,n,a;return r(this,function(o){switch(o.label){case 0:return p.UIManagerInstance.OpenWindows(c.default),(e=p.UIManagerInstance.GetWindows2Type(c.default)).SetProgressBarValue(0),null!=this.current_scene&&this.current_scene.OnLeave(),null==(n=this.scenes[t.Name])&&((n=new t.ScriptController).scene_config=t,this.scenes[t.Name]=n),n.OnEnter(),a=e.GetProgressBarValue(),[4,this.LoadSceneAsync(t.Name)];case 1:return null==o.sent()?[2]:(a=e.GetProgressBarValue(),[4,n.OnPrepare(function(t){e.AddProgressBarValue(a+.5*t)})]);case 2:return o.sent(),e.AddProgressBarValue(a+.5),l.PlatformSDKInstance.hasInit()&&l.PlatformSDKInstance.loading(90),e.SetProgressBarValue(1),this.busing=!1,this.current_scene=n,n.OnComplete(),e.SetProgressBarValue(1),p.UIManagerInstance.CloseWindow(c.default),l.PlatformSDKInstance.hasInit()&&(l.PlatformSDKInstance.loading(100),l.PlatformSDKInstance.gameStart(null,null),l.PlatformSDKInstance.closeLoading()),[2]}})})},e.prototype.LoadSceneAsync=function(t){return i(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(e){cc.director.loadScene(t,function(){e(!0)})})]})})},e}(u.Singleton);n.SceneManager=h,n.SceneManagerInstance=h.GetInstance(h),cc._RF.pop()},{"../../GameLogic/UI/UIWindows/UILoadWindows/UILoadController":"UILoadController","../Platform/PlatformSDK":"PlatformSDK","../Singleton/Singleton":"Singleton","../UI/UIManager":"UIManager"}],Shake:[function(t,e,n){"use strict";cc._RF.push(e,"41e3eR42IZPprQ/rB63qwLZ","Shake");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Shake=void 0;var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}var n;return o(e,t),n=e,e.create=function(t,e,a){var o=new n;return o.initWithDuration(t,e,a),o},e.prototype.initWithDuration=function(t,e,n){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=n,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},n=i([s],e)}(cc.ActionInterval));n.Shake=c,cc._RF.pop()},{}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"62ff7k0lH9HMqC5UBevZdB1","Singleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.Singleton=void 0;var a=function(){function t(){this.IsInited=!1}return t.GetInstance=function(t){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.Init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.OnInit.apply(this,t),this.IsInited=!0},t.prototype.OnInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.Startup=function(){},t.prototype.Cleanup=function(){this.OnCleanup()},t.prototype.OnCleanup=function(){},t.prototype.Delete=function(){},t.instance=null,t}();n.Singleton=a,cc._RF.pop()},{}],SkillData:[function(t,e,n){"use strict";cc._RF.push(e,"46606ydjh9FaazTE6jtv6BH","SkillData");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.SkillDataManager=void 0;var o=t("../../Config/ITable"),i=t("../../Framework/Data/TableManager"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function t(){this.skillTable=new Map,this.skillData=new Map,this.skillIndexList=new Map}var e;return e=t,t.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},t.prototype.InitData=function(){var t=i.TableMgr.getTable(o.ETableName.SKILLTEMPLATE);if(null!=t){var e=0;for(var n in t){var a=t[n];this.skillTable.set(a.ID,a),this.skillIndexList.set(e,a.ID),e+=1}}},t.prototype.getSkillTable=function(){return this.skillTable},t.prototype.getSkillSize=function(){return this.skillTable.size},t.prototype.getSkillData=function(t){return this.skillTable.has(t)?this.skillTable.get(t):null},t.prototype.getSkillCount=function(t){return this.skillData.has(t)?this.skillData.get(t):0},t.prototype.getID=function(t){return this.skillIndexList.has(t)?this.skillIndexList.get(t):0},t.prototype.setCurrentSkillID=function(t){this.currentSkillID=t},t.prototype.getCurrentSkillID=function(){return this.currentSkillID},t.prototype.getSkillTexture=function(t){return this.skillTable.has(t)?this.skillTable.get(t).Icon:""},t.prototype.ServerSetSkillData=function(t){if(this.skillData.clear(),null!=t)for(var e in t)this.skillData.set(Number(e),t[e])},t.prototype.SetSkillCount=function(t,e){this.skillData.set(t,e)},t.prototype.OnDestory=function(){this.skillTable=null,this.skillData=null,this.skillIndexList=null},e=a([s],t)}());n.default=c,n.SkillDataManager=c.getInstance(),cc._RF.pop()},{"../../Config/ITable":"ITable","../../Framework/Data/TableManager":"TableManager"}],SocketManager:[function(t,e,n){"use strict";cc._RF.push(e,"700a4z5YS5FFKrJaXzKI0/m","SocketManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SocketManager=void 0;var i=t("./ByteArray"),r=t("../Net/Socket"),s=t("../Utils/Logger"),c=function(t){function e(n,a){void 0===n&&(n=""),void 0===a&&(a=0);var o=t.call(this)||this;return o._writeMessage="",o._readMessage="",o._connected=!1,o._connecting=!1,o.host="",o.port=0,o._isReadySend=!1,o._bytesWrite=!1,o._type=e.TYPE_STRING,o._connected=!1,o._writeMessage="",o._readMessage="",o.socket=new r.Socket,o.socket.addCallBacks(o.onConnect,o.onClose,o.onSocketData,o.onError,o),o}return o(e,t),e.prototype.connect=function(t,e){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(t,e))},e.prototype.connectByUrl=function(t){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(t))},e.prototype.disConnect=function(){this.socket.close()},e.prototype.close=function(){this._connected&&this.socket.close()},e.prototype.onConnect=function(){this._connected=!0,this._connecting=!1,s.Logger.logModel("[SocketManager]  onConnect()"),this.dispatchEvent(new cc.Event.EventCustom(e.CONNECT,!0))},e.prototype.onClose=function(){this._connected=!1,s.Logger.logModel("[SocketManager]  onClose()"),this.dispatchEvent(new cc.Event.EventCustom(e.CLOSE,!0))},e.prototype.onError=function(t){this._connecting&&(this._connecting=!1),s.Logger.logModel("[SocketManager]  onError()"+t),this.dispatchEvent(new cc.Event.EventCustom(e.IO_ERROR,!0))},e.prototype.onSocketData=function(t){"string"==typeof t?this._readMessage+=t:this._readByte._writeUint8Array(new Uint8Array(t)),s.Logger.logModel("[SocketManager]  onSocketData()"),this.dispatchEvent(new cc.Event.EventCustom(e.SOCKET_DATA,!0))},e.prototype.flush=function(){this._connected?(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()),this._isReadySend=!1):s.Logger.logError("[flush]\u9519\u8bef \u8bf7\u5148\u8fde\u63a5WebSocket")},e.prototype.writeUTF=function(t){this._connected?(this._type==e.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(t)):this._writeMessage+=t,this.flush()):s.Logger.logError("[writeUTF]\u9519\u8bef \u8bf7\u5148\u8fde\u63a5WebSocket")},e.prototype.readUTF=function(){var t;return this._type==e.TYPE_BINARY?(this._readByte.position=0,t=this._readByte.readUTF(),this._readByte.clear()):(t=this._readMessage,this._readMessage=""),t},e.prototype.writeBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._connected?this._writeByte&&(this._bytesWrite=!0,this._writeByte.writeBytes(t,e,n),this.flush()):cc.warn("[writeBytes]\u9519\u8bef \u8bf7\u5148\u8fde\u63a5WebSocket")},e.prototype.readBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._readByte?(this._readByte.position=0,this._readByte.readBytes(t,e,n),this._readByte.clear()):cc.warn("[readBytes]\u9519\u8bef \u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b")},Object.defineProperty(e.prototype,"connected",{get:function(){return this._connected},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,t!=e.TYPE_BINARY||this._writeByte||(this._readByte=new i.ByteArray,this._writeByte=new i.ByteArray)},enumerable:!1,configurable:!0}),e.TYPE_STRING="webSocketTypeString",e.TYPE_BINARY="webSocketTypeBinary",e.CONNECT="CONNECT",e.SOCKET_DATA="SOCKET_DATA",e.CLOSE="CLOSE",e.IO_ERROR="IO_ERROR",e}(cc.EventTarget);n.SocketManager=c,cc._RF.pop()},{"../Net/Socket":"Socket","../Utils/Logger":"Logger","./ByteArray":"ByteArray"}],Socket:[function(t,e,n){"use strict";cc._RF.push(e,"842201Go3REeoY25nfZvIGY","Socket"),Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=void 0;var a=function(){function t(){this.host="",this.port=0}return t.prototype.addCallBacks=function(t,e,n,a,o){this.onConnect=t,this.onClose=e,this.onSocketData=n,this.onError=a,this.thisObject=o},t.prototype.connect=function(t,e){this.host=t,this.port=e;var n="ws://"+this.host+":"+this.port;this.socket=new WebSocket(n),this.socket.binaryType="arraybuffer",this._bindEvent()},t.prototype.connectByUrl=function(t){this.socket=new WebSocket(t),this.socket.binaryType="arraybuffer",this._bindEvent()},t.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject),cc.log("_bindEvent---------onopen")},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject),cc.log("_bindEvent---------onclose",e)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject,e),cc.log("_bindEvent---------onerror",e)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data),cc.log("_bindEvent---------onmessage",e)}},t.prototype.send=function(t){this.socket.send(t)},t.prototype.close=function(){this.socket.close()},t}();n.Socket=a,cc._RF.pop()},{}],SoundManager:[function(t,e,n){"use strict";cc._RF.push(e,"c4ed5H7gBJH4IeLp1DUC2xp","SoundManager");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator.ccclass,i=function(){function t(){this.soundStartPath="Sound/",this.currentBgId=null}var e;return e=t,Object.defineProperty(t,"ins",{get:function(){return e._ins||(e._ins=new e,e._ins.init()),e._ins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"musicSwitch",{get:function(){return this._musicSwitch},set:function(t){this._musicSwitch=t,this.saveSet()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"soundSwitch",{get:function(){return this._soundSwitch},set:function(t){this._soundSwitch=t,this.saveSet()},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=cc.sys.localStorage.getItem("soundSet");if(t){var e=JSON.parse(t);this.musicSwitch=e.musicSwitch,this.soundSwitch=e.soundSwitch}else this.musicSwitch=!0,this.soundSwitch=!0},t.prototype.saveSet=function(){var t={};t.musicSwitch=this.musicSwitch,t.soundSwitch=this.soundSwitch;var e=JSON.stringify(t);cc.sys.localStorage.setItem("soundSet",e)},t.prototype.playBgMusic=function(t){t&&t!=this.bgmName&&(this.bgmName=t,this.musicSwitch&&(this.stopMusic(),t=this.soundStartPath+"Bgm/"+t,this.play(t,.3,!0,function(t){this.currentBgId=t}.bind(this))))},t.prototype.pauseBgMusic=function(){null!=this.currentBgId&&cc.audioEngine.pause(this.currentBgId)},t.prototype.resumeBgMusic=function(){null!=this.currentBgId?cc.audioEngine.resume(this.currentBgId):this.playBgMusic(this.bgmName)},t.prototype.stopMusic=function(){null!=this.currentBgId&&(cc.audioEngine.stop(this.currentBgId),this.currentBgId=null)},t.prototype.playSound=function(t,e){void 0===e&&(e=1),this.soundSwitch&&(t=this.soundStartPath+"Effect/"+t,this.play(t,e))},t.prototype.play=function(t,e,n,a){void 0===n&&(n=!1),cc.resources.load(t,cc.AudioClip,function(t,o){if(!t){var i=cc.audioEngine.play(o,n,e);a&&a(i)}})},e=a([o],t)}();n.default=i,cc._RF.pop()},{}],Stack:[function(t,e,n){"use strict";cc._RF.push(e,"b67f8EILShJBJ09bWgmv/wE","Stack"),Object.defineProperty(n,"__esModule",{value:!0}),n.Stack=void 0;var a=function(){function t(t,e){void 0===e&&(e=null),this._value=t,this._next=e}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!1,configurable:!0}),t}(),o=function(){function t(){this._size=0,this._header=new a(null)}return t.prototype.top=function(){return 0===this._size?null:this._header.next.value},t.prototype.push=function(t){var e=new a(t);e.next=this._header.next,this._header.next=e,this._size++},t.prototype.pop=function(){if(0===this._size)return null;var t=this._header.next;return this._header.next=t.next,this._size--,t.next=null,t.value},t.prototype.empty=function(){return 0===this._size},t.prototype.size=function(){return this._size},t.prototype.clear=function(){for(;!this.empty();)this.pop()},t}();n.Stack=o,cc._RF.pop()},{}],Struct:[function(t,e,n){"use strict";cc._RF.push(e,"881283H7yFCrJPOd79ZA2ED","Struct"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],SystemTicker:[function(t,e,n){"use strict";cc._RF.push(e,"f6ffaLK+ixAPbPr6Z9OxvCW","SystemTicker"),Object.defineProperty(n,"__esModule",{value:!0}),n.SystemTicker=void 0;var a=function(){function t(){t.START_TIME=Date.now()}return t.getTimer=function(){return Date.now()-t.START_TIME},t.START_TIME=0,t}();n.SystemTicker=a,cc._RF.pop()},{}],TableData:[function(t,e,n){"use strict";cc._RF.push(e,"9853aLcoAtDmLfTnSeBeu6p","TableData");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.TableDataManager=void 0;var o=t("../../Config/ITable"),i=t("../../Framework/Data/TableManager"),r=t("./EliminationData"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function t(){this.constantTable=new Map,this.storeTable=new Map,this.storeIndexList=new Map,this.tipTable=new Array,this.taskTable=new Map,this.levelTable=new Map}var e;return e=t,t.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},t.prototype.InitData=function(){var t=i.TableMgr.getTable(o.ETableName.CONSTANT);if(null!=t)for(var e in t){var n=t[e];this.constantTable.set(n.Function,n)}var a=i.TableMgr.getTable(o.ETableName.STORETEMPLATE);if(null!=a){var r=0;for(var e in a){var s=a[e];this.storeTable.set(s.ID,s),this.storeIndexList.set(r,s.ID),r+=1}}var c=i.TableMgr.getTable(o.ETableName.TIPSTEMPLATE);if(null!=c)for(var e in c){var l=c[e];this.tipTable.push(l.Content)}var u=i.TableMgr.getTable(o.ETableName.DAILYQUESTTEMPLATE);if(null!=u)for(var e in u){var p=u[e];this.taskTable.set(p.ID,p)}var h=i.TableMgr.getTable(o.ETableName.LEVELTEMPLATE);if(null!=h)for(var e in h){var f=h[e];this.levelTable.set(f.ID,f)}this.InitConstant()},t.prototype.InitConstant=function(){var t=this.GetConstantTableValue("GameRow").Parameter,e=this.GetConstantTableValue("GameColumn").Parameter;r.EliminationDataManager.setRowAndColumn(Number(t),Number(e)),this.goldIconPath=this.GetConstantTableValue("GoldIcon").Parameter,this.trophyIconPath=this.GetConstantTableValue("TrophyIcon").Parameter,this.multiBuyNum=this.GetConstantTableValue("MultiBuyNum").Parameter,this.rankListCount=Number(this.GetConstantTableValue("LeaderboardMaxNum").Parameter),this.matchDelayTime=Number(this.GetConstantTableValue("MatchResultShowTime").Parameter)},t.prototype.GetStoreTable=function(){return this.storeTable},t.prototype.getStoreCount=function(){return this.storeTable.size},t.prototype.getStoreData=function(t){return this.storeTable.get(t)},t.prototype.getStoreID=function(t){return this.storeIndexList.has(t)?this.storeIndexList.get(t):0},t.prototype.GetConstantTableValue=function(t){return this.constantTable.has(t)?this.constantTable.get(t):null},t.prototype.GetRangeTipsContent=function(){if(null!=this.tipTable){var t=Math.random(),e=Math.round(t*this.tipTable.length);return this.tipTable[e]}return 0},t.prototype.GetCurrentTask=function(t){return null!=this.taskTable?this.taskTable.get(t):null},t.prototype.GetLevelTable=function(t){return null!=this.levelTable?this.levelTable.get(t):null},t.prototype.OnClean=function(){this.constantTable.clear(),this.storeTable.clear(),this.storeIndexList.clear()},t.prototype.OnDestory=function(){this.OnClean(),this.tipTable=null},e=a([c],t)}());n.default=l,n.TableDataManager=l.getInstance(),cc._RF.pop()},{"../../Config/ITable":"ITable","../../Framework/Data/TableManager":"TableManager","./EliminationData":"EliminationData"}],TableManager:[function(t,e,n){"use strict";cc._RF.push(e,"4f6acA0CqNM+4aItQqyRXsB","TableManager");var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.TableMgr=n.TableManager=void 0;var i=t("../Config/Config"),r=t("../Resources/LoaderManager"),s=function(){function t(){this.tableMap=new Map}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(){return a(this,void 0,Promise,function(){var t,e,n,a,s;return o(this,function(o){switch(o.label){case 0:return t=""+i.Config.TABLE_PATH,[4,r.LoaderMgr.loadJsonAssetDir(t)];case 1:for(e=o.sent(),n=0;n<e.length;n++)a=e[n]._name,s=e[n].json,this.tableMap.set(a,s);return[2,!0]}})})},t.prototype.getDataById=function(t,e){return this.tableMap.has(t)?this.tableMap.get(t)[e]:null},t.prototype.getTable=function(t){return this.tableMap.has(t)?this.tableMap.get(t):null},t}();n.TableManager=s,n.TableMgr=s.getInstance(),cc._RF.pop()},{"../Config/Config":"Config","../Resources/LoaderManager":"LoaderManager"}],TextureForWebGLByURLToImg:[function(t,e,n){"use strict";cc._RF.push(e,"0d95ca19aRIOpBvW3iVhBEl","TextureForWebGLByURLToImg");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator.ccclass,i=function(){function t(){}var e;return e=t,t.getTextureForWebGLByURLToImg=function(t,n){if(e.headBase64Cache[t])n.spriteFrame=e.headBase64Cache[t];else{var a=0,o=new Image;o.crossOrigin="anonymous",o.onload=function(){var a=new cc.Texture2D;a.initWithElement(o),a.handleLoadedTexture();var i=new cc.SpriteFrame(a);n&&n.enabled&&(n.spriteFrame=i),e.headBase64Cache[t]=i},o.onerror=function(){0==a&&(o.src=t,a++)},o.src=t}},t.headBase64Cache={},e=a([o],t)}();n.default=i,cc._RF.pop()},{}],TimeData:[function(t,e,n){"use strict";cc._RF.push(e,"2370bcv5GdPlKQa6Dm6AyO4","TimeData");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=(o.property,function(){function t(){this.currentTime=0,this.parseTime()}var e;return e=t,Object.defineProperty(t,"ins",{get:function(){return e._ins||(e._ins=new e),e._ins},enumerable:!1,configurable:!0}),t.prototype.parseTime=function(t){void 0===t&&(t=0),this.currentTime=Math.floor(t/1e3),this.timer&&clearInterval(this.timer),this.timer=setInterval(this.updateTime.bind(this),1e3)},t.prototype.updateTime=function(){this.currentTime++},t.prototype.getCurrentTime=function(){return this.currentTime},t._ins=null,e=a([i],t)}());n.default=r,cc._RF.pop()},{}],TimeUtil:[function(t,e,n){"use strict";cc._RF.push(e,"173b21awTVBV7N3BjdnR+/V","TimeUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.TimeUtil=void 0;var a=t("./SystemTicker"),o=function(){function t(){}return t.getTimer=function(){return a.SystemTicker.getTimer()},t.boolTimestampByDay=function(t,e){var n=(new Date).getTime(),a=n-1e3*t;if(!(a<0))return a>=e;cc.error("TimeUtil::boolTimestampByDay: nowTime: "+n+" < timestamp: "+1e3*t+" error")},t.getTimestampDate=function(t){var e={},n=new Date(1e3*t);return e.year=n.getFullYear(),e.month=n.getMonth()+1,e.day=n.getDate(),e.hour=n.getHours(),e.minute=n.getMinutes(),e.second=n.getSeconds(),e.week=n.getDay(),e},t.getTimestampByDate=function(t){var e=(new Date).getTime(),n=new Date(1e3*t),a=e-1e3*t;if(!(a<0)){var o=a/864e5,i=n.getMonth()+1+"\u6708",r=n.getDate()+"\u65e5",s=n.getHours()+":",c=n.getMinutes()+" ";return o>=1?i+r+"\uff08\u8ddd\u4eca"+parseInt(o.toString())+"\uff09":"\u4eca\u65e5 "+s+c}cc.error("TimeUtil::getTimestampByDate: nowTime: "+e+" < timestamp: "+1e3*t+" error")},t.getDateDiff=function(e,n){var a=t.getDateDiffArr(e,n),o="";return a[0]>0&&(o+=a[0]+"\u5929"),a[1]>0&&(o+=a[1]+"\u5c0f\u65f6"),a[2]>0&&(o+=a[2]+"\u5206"),a[3]>0&&(o+=a[3]+"\u79d2"),o},t.getDateDiffArr=function(t,e){var n=Math.abs(e-t),a=n%864e5,o=a%36e5,i=o%6e4;return[Math.floor(n/864e5),Math.floor(a/36e5),Math.floor(o/6e4),Math.round(i/1e3)]},t.formatTime=function(t,e){void 0===e&&(e=":");var n="",a=Math.floor(t/60);n=a<10?"0"+a:""+a,n+=e;var o=Math.floor(t%60);return n+(o<10?"0"+o:""+o)},t.dateFormat=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e},t.getFormatBySecond=function(t,e){void 0===e&&(e=1);var n="";switch(e){case 1:n=this.getFormatBySecond1(t);break;case 2:n=this.getFormatBySecond2(t);break;case 3:n=this.getFormatBySecond3(t);break;case 4:n=this.getFormatBySecond4(t);break;case 5:n=this.getFormatBySecond5(t)}return n},t.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,n=Math.floor(t/3600);e=0==n?"00":n<10?"0"+n:""+n;var a=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60);return e+":"+(0==a?"00":a<10?"0"+a:""+a)+":"+(0==o?"00":o<10?"0"+o:""+o)},t.getFormatBySecond3=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),a=Math.floor((t-3600*e)%60);return(0==n?"00":n<10?"0"+n:""+n)+":"+(0==a?"00":a<10?"0"+a:""+a)},t.getFormatBySecond2=function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},t.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return e>0?e>24?Math.floor(e/24)+"\u5929\u524d":e+"\u5c0f\u65f6\u524d":Math.floor(t/60)+"\u5206\u949f\u524d"},t.getFormatBySecond5=function(t){var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),a=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60);return t>0?0==e?0==n?0==a?0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2":a+"\u5206"+(0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2"):0==a?0==o?"":o<10?"0"+o+"\u79d2":o+"\u79d2":n+"\u5c0f\u65f6"+(a<10?"0"+a+"\u5206":a+"\u5206"):e+"\u5929"+(0==n?"":n<10?"0"+n+"\u5c0f\u65f6":n+"\u5c0f\u65f6"):""},t.setServertime=function(e){t.sServerTs=e,t.sLocalTs=t.getTimer()},t.getTimeNow=function(){return t.sServerTs+Math.floor((t.getTimer()-t.sLocalTs)/1e3)},t.sServerTs=0,t.sLocalTs=0,t}();n.TimeUtil=o,cc._RF.pop()},{"./SystemTicker":"SystemTicker"}],TimerManager:[function(t,e,n){"use strict";cc._RF.push(e,"6938e7UZDNDFIJPwJtzDY/0","TimerManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TimerManagerInstance=n.TimerHandler=n.TimerManager=void 0;var i=t("../Pool/AppPool"),r=t("../Singleton/Singleton"),s=t("../Updater/UpdateManager"),c=t("../Utils/TimeUtil"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnInit=function(){this._handlers=new Array,this._delHandlers=new Array,this._currTime=c.TimeUtil.getTimer(),this._currFrame=0,this._count=0,this._timeScale=1,s.UpdateManagerInstance.AddUpdate(this,this.onEnterFrame)},e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=c.TimeUtil.getTimer();for(var t=0;t<this._count;t++)(e=this._handlers[t]).forceDestroy?this._delHandlers.push(e):(e.userFrame?this._currFrame:this._currTime)>=e.exeTime&&(e.method.call(e.methodObj,(this._currTime-e.dealTime)*this._timeScale),e.dealTime=this._currTime,e.exeTime+=e.delay,e.repeat||(e.repeatCount>1?e.repeatCount--:(e.complateMethod&&e.complateMethod.apply(e.complateMethodObj),this._delHandlers.push(e))));for(;this._delHandlers.length>0;){var e=this._delHandlers.pop();this.remove(e.method,e.methodObj)}},e.prototype.create=function(t,e,n,a,o,r,s){if(!(e<0||n<0||null==a)){this.remove(a,o);var c=i.AppPool.apCreate(u);c.userFrame=t,c.repeat=0==n,c.repeatCount=n,c.delay=e,c.method=a,c.methodObj=o,c.complateMethod=r,c.complateMethodObj=s,c.exeTime=e+(t?this._currFrame:this._currTime),c.dealTime=this._currTime,c.forceDestroy=!1,this._handlers.push(c),this._count++}},e.prototype.doTimer=function(t,e,n,a,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!1,t,e,n,a,o,i)},e.prototype.doFrame=function(t,e,n,a,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!0,t,e,n,a,o,i)},e.prototype.callLater=function(t,e){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a]},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e.prototype.remove=function(t,e,n){void 0===n&&(n=!0);for(var a=0;a<this._count;a++){var o=this._handlers[a];if(o.method==t&&o.methodObj==e){n?(this._handlers.splice(a,1),i.AppPool.apDestroy(o),this._count--):o.forceDestroy=!0;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var n=this._handlers[e];n.methodObj==t&&(this._handlers.splice(e,1),i.AppPool.apDestroy(n),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var n=0;n<this._count;n++){var a=this._handlers[n];if(a.method==t&&a.methodObj==e)return!0}return!1},e.prototype.timerHandler=function(t,e){for(var n=0;n<this._count;n++){var a=this._handlers[n];if(a.method==t&&a.methodObj==e)return a}return null},e.prototype.OnCleanup=function(){s.UpdateManagerInstance.RemoveUpdate(this,this.onEnterFrame)},e}(r.Singleton);n.TimerManager=l;var u=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0,this.forceDestroy=!1}return t.prototype.onApReuse=function(){this.clear()},t.prototype.onApRecycle=function(){this.clear()},t.prototype.clear=function(){this.forceDestroy=!1,this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();n.TimerHandler=u,n.TimerManagerInstance=l.GetInstance(l),cc._RF.pop()},{"../Pool/AppPool":"AppPool","../Singleton/Singleton":"Singleton","../Updater/UpdateManager":"UpdateManager","../Utils/TimeUtil":"TimeUtil"}],Toast:[function(t,e,n){"use strict";cc._RF.push(e,"7f478ZNd2ZAloS0ki9EK6Ou","Toast"),Object.defineProperty(n,"__esModule",{value:!0}),n.Toast=void 0;var a=function(){function t(){this.toastNode=null,this.bgSprite=null,this.spriteFrame=null,this.textNode=null,this.textLabel=null,this.canvas=null,this.toastNode=new cc.Node,this.toastNode.active=!1,this.toastNode.zIndex=1e4,this.canvas=cc.Canvas.instance,this.canvas.node.addChild(this.toastNode),this.bgSprite=this.toastNode.addComponent(cc.Sprite),this.bgSprite.trim=!0,this.bgSprite.type=cc.Sprite.Type.SLICED;var t=this;cc.loader.loadRes("singleColor",function(e,n){e?cc.error(e):(t.spriteFrame=new cc.SpriteFrame(n),t.bgSprite.spriteFrame=t.spriteFrame)});var e=this.toastNode.addComponent(cc.Widget);e.isAlignBottom=!0,e.isAbsoluteBottom=!1,e.bottom=.1,e.isAlignHorizontalCenter=!0,e.horizontalCenter=0,e.alignMode=cc.Widget.AlignMode.ONCE;var n=this.toastNode.addComponent(cc.Layout);n.resizeMode=cc.Layout.ResizeMode.CONTAINER,n.padding=5,this.textNode=new cc.Node,this.toastNode.addChild(this.textNode),this.textNode.position=cc.Vec3.ZERO,this.textLabel=this.textNode.addComponent(cc.Label),this.textLabel.fontSize=25,this.textLabel.lineHeight=25}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.showText=function(t,e){var n=this;void 0===e&&(e=.5),t.length*this.textLabel.fontSize>.8*this.canvas.node.width&&(this.textLabel.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.textLabel.node.width=.8*this.canvas.node.width),this.textLabel.string=t,this.toastNode.active=!0,this.toastNode.opacity=200,this.toastNode.runAction(cc.sequence(cc.delayTime(e),cc.fadeOut(.2),cc.callFunc(function(){n.toastNode.active=!1},this)))},t._instance=null,t}();n.Toast=a,cc._RF.pop()},{}],Tool:[function(t,e,n){"use strict";cc._RF.push(e,"9bd56y3MD9C6ZncD9kKt7BO","Tool");var a=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Resources/LoaderManager"),i=t("../../GameLogic/Data/GameData"),r=cc._decorator.ccclass,s=function(){function t(){}var e;return e=t,t.rangeNum=function(t,e,n){void 0===n&&(n=!1);var a=Math.random()*(e-t);return n||(a=Math.floor(a)),a+t},t.findChildByPath=function(t,e,n){void 0===n&&(n="");for(var a=null,o=e.split("/"),i=0;i<o.length;i++){var r=o[i];if(!(a=t.getChildByName(r)))break;t=a}return n&&a&&(a=a.getComponent(n)),a},t.stringFormat=function(t,e,n,a){var o="";if(arguments.length>0){o=arguments[0];for(var i=1;i<arguments.length;i++){var r=arguments[i],s="{"+(i-1).toString()+"}";o=o.replace(s,r)}}return o},t.convertTime=function(t){var n=t/3600,a=t%3600/60,o=t%60>>0,i=((n=Math.floor(n))>9?"":"0")+n,r=((a=Math.floor(a))>9?"":"0")+a,s=((o=Math.max(o,0))>9?"":"0")+o;return n>0?e.stringFormat("{0}:{1}:{2}",i,r,s):e.stringFormat("{0}:{1}",r,s)},t.convertTimeDesp=function(t){var n=t/3600,a=t%3600/60,o=t%60>>0,i=((n=Math.floor(n))>9?"":"0")+n,r=((a=Math.floor(a))>9?"":"0")+a,s=((o=Math.max(o,0))>9?"":"0")+o;return n>0?e.stringFormat("{0}\u65f6{1}\u5206{2}\u79d2",i,r,s):e.stringFormat("{0}\u5206{1}\u79d2",r,s)},t.getAngle=function(t,e){var n=e.x,a=e.y,o=t.x,i=t.y,r=Math.abs(n-o),s=Math.abs(a-i),c=r/Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),l=Math.acos(c),u=Math.floor(180/(Math.PI/l));return o>n&&i<a?u=180-u:o>n&&i>a?u=180+u:o<n&&i>a?u=360-u:o<n&&i==a?u=0:o==n&&i<a?u=90:o>n&&i==a?u=180:o==n&&i>a&&(u=270),u},t.getNodePos=function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position);return e.convertToNodeSpaceAR(n)},t.getNodePosFromPos=function(t,e,n){var a=t.convertToWorldSpaceAR(e);return n.convertToNodeSpaceAR(a)},t.vibration=function(t){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&navigator.vibrate(t)},t.setSprite=function(t,e){o.LoaderMgr.loadAsset(e,cc.SpriteFrame).then(function(e){null!=e&&(t.spriteFrame=e)})},t.setFont=function(t,e){o.LoaderMgr.loadAsset(e,cc.Font).then(function(e){null!=e&&(t.font=e)})},t.setURLSprite=function(t,e){o.LoaderMgr.loadExternalAsset(i.GameDataManager.cdnURL+e).then(function(e){null!=e&&(t.spriteFrame=e)})},t.WaitTime=function(t){return new Promise(function(e){setTimeout(function(){return e(t)},t)})},t.getDateString=function(){var t=new Date,e=t.getFullYear().toString(),n="";return n+=(1==e.length?"0"+e:e)+":",n+=(1==(e=t.getMonth().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getDay().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getHours().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getMinutes().toString()).length?"0"+e:e)+":",n+=(1==(e=t.getSeconds().toString()).length?"0"+e:e)+":",1==(e=t.getMilliseconds().toString()).length&&(e="00"+e),2==e.length&&(e="0"+e),"["+(n+=e)+"]"},e=a([r],t)}();n.default=s,cc._RF.pop()},{"../../GameLogic/Data/GameData":"GameData","../Resources/LoaderManager":"LoaderManager"}],TweenFunc:[function(t,e,n){"use strict";cc._RF.push(e,"6bd31x4rC5K4IdmLP0LcJHf","TweenFunc"),Object.defineProperty(n,"__esModule",{value:!0}),n.TweenFunc=void 0,n.TweenFunc={Linear:function(t,e,n,a){return n*t/a+e},Quad:{easeIn:function(t,e,n,a){return n*(t/=a)*t+e},easeOut:function(t,e,n,a){return-n*(t/=a)*(t-2)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t+e},easeOut:function(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t*t+e},easeOut:function(t,e,n,a){return-n*((t=t/a-1)*t*t*t-1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t*t*t+e},easeOut:function(t,e,n,a){return n*((t=t/a-1)*t*t*t*t+1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+e},easeOut:function(t,e,n,a){return n*Math.sin(t/a*(Math.PI/2))+e},easeInOut:function(t,e,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+e}},Expo:{easeIn:function(t,e,n,a){return 0==t?e:n*Math.pow(2,10*(t/a-1))+e},easeOut:function(t,e,n,a){return t==a?e+n:n*(1-Math.pow(2,-10*t/a))+e},easeInOut:function(t,e,n,a){return 0==t?e:t==a?e+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e}},Circ:{easeIn:function(t,e,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOut:function(t,e,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,n,a,o,i){if(0==t)return e;if(1==(t/=a))return e+n;if(i||(i=.3*a),!o||o<Math.abs(n)){o=n;var r=i/4}else r=i/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)+e},easeOut:function(t,e,n,a,o,i){if(0==t)return e;if(1==(t/=a))return e+n;if(i||(i=.3*a),!o||o<Math.abs(n)){o=n;var r=i/4}else r=i/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*t)*Math.sin(2*(t*a-r)*Math.PI/i)+n+e},easeInOut:function(t,e,n,a,o,i){if(0==t)return e;if(2==(t/=a/2))return e+n;if(i||(i=.3*1.5*a),!o||o<Math.abs(n)){o=n;var r=i/4}else r=i/(2*Math.PI)*Math.asin(n/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)*.5+n+e}},Back:{easeIn:function(t,e,n,a,o){return null==o&&(o=1.70158),n*(t/=a)*t*((o+1)*t-o)+e},easeOut:function(t,e,n,a,o){return null==o&&(o=1.70158),n*((t=t/a-1)*t*((o+1)*t+o)+1)+e},easeInOut:function(t,e,n,a,o){return null==o&&(o=1.70158),(t/=a/2)<1?n/2*t*t*((1+(o*=1.525))*t-o)+e:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e}},Bounce:{easeIn:function(t,e,a,o){return a-n.TweenFunc.Bounce.easeOut(o-t,0,a,o)+e},easeOut:function(t,e,n,a){return(t/=a)<1/2.75?7.5625*n*t*t+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,a,o){return t<o/2?.5*n.TweenFunc.Bounce.easeIn(2*t,0,a,o)+e:.5*n.TweenFunc.Bounce.easeOut(2*t-o,0,a,o)+.5*a+e}}},cc._RF.pop()},{}],TweenUtil:[function(t,e,n){"use strict";cc._RF.push(e,"8c3c8Vo5iJP87Sva6gRqmWP","TweenUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.TweenUtil=void 0;var a=t("./TweenFunc"),o=t("../Container/LinkList"),i=t("../Timer/TimerManager"),r=function(){function t(){this.key=0,this.pool=[],this.iterList=new o.LinkList,this.pendingList=new o.LinkList}return t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.to=function(t){var e=t.node;if(!e||!cc.isValid(e))return cc.warn("invalid node"),0;var n=this.pool.pop();if(n||(n={node:null,elapsed:null,duration:null,delay:null,exectors:null,tweenFunc:null,onUpdate:null,onComplete:null}),n.node=e,n.elapsed=0,n.duration=t.duration||1,n.delay=t.delay||0,n.exectors=[],n.tweenFunc=t.tweenFunc||a.TweenFunc.Linear,n.onUpdate=t.onUpdate,n.onComplete=t.onComplete,null!=t.x){var o=e.x,r=t.x-o;n.exectors.push(function(t){var e=n.tweenFunc(t,o,r,n.duration);n.node.x=e})}if(null!=t.y){var s=e.y,c=t.y-s;n.exectors.push(function(t){var e=n.tweenFunc(t,s,c,n.duration);n.node.y=e})}if(null!=t.rotation){var l=e.rotation,u=t.rotation-l;n.exectors.push(function(t){var e=n.tweenFunc(t,l,u,n.duration);n.node.rotation=e})}if(null!=t.width){var p=e.width,h=t.width-p;n.exectors.push(function(t){var e=n.tweenFunc(t,p,h,n.duration);n.node.width=e})}if(null!=t.height){var f=e.height,m=t.height-f;n.exectors.push(function(t){var e=n.tweenFunc(t,f,m,n.duration);n.node.height=e})}if(null!=t.opacity){var d=e.opacity,_=t.opacity-d;n.exectors.push(function(t){var e=n.tweenFunc(t,d,_,n.duration);n.node.opacity=e})}return this.timer||(this.timer=1,i.TimerManagerInstance.doFrame(0,0,this.update,this)),this.pendingList.append(++this.key,n)},t.prototype.from=function(t){var e,n,a,o,i,r,s=t.node;return s&&cc.isValid(s)?(null!=t.x&&(e=[t.x,s.x],s.x=e[0],t.x=e[1]),null!=t.y&&(n=[t.y,s.y],s.y=n[0],t.y=n[1]),null!=t.rotation&&(a=[t.rotation,s.rotation],s.rotation=a[0],t.rotation=a[1]),null!=t.width&&(o=[t.width,s.width],s.width=o[0],t.width=o[1]),null!=t.height&&(i=[t.height,s.height],s.height=i[0],t.height=i[1]),null!=t.opacity&&(r=[t.opacity,s.opacity],s.opacity=r[0],t.opacity=r[1]),this.to(t)):(cc.warn("invalid node"),0)},t.prototype.kill=function(t){this.killIter(t)||this.killPending(t)},t.prototype.killIter=function(t){var e=this.iterList.remove(t);return!!e&&(this.pool.push(e.data),!0)},t.prototype.killPending=function(t){var e=this.pendingList.remove(t);return!!e&&(this.pool.push(e.data),!0)},t.from=function(t){return this.getInst().from(t)},t.to=function(t){return this.getInst().to(t)},t.kill=function(t){this.getInst().kill(t)},t.prototype.update=function(t){if(!this.iterList.head&&!this.pendingList.head)return i.TimerManagerInstance.remove(this.update,this),void(this.timer=0);for(var e=this.iterList.head,n=function(){var n=e.data.node;if(!n||!cc.isValid(n)){var o=e.next;return a.killIter(e.key),e=o,"continue"}var i=e.data.elapsed,r=e.data.delay,s=e.data.duration;if(i>=s+r){o=e.next;var c=e.key;return e.data.exectors.forEach(function(t){t(s)}),e.data.onComplete&&e.data.onComplete.exec(n,1),a.killIter(c),e=o,"continue"}i>=r?(o=e.next,e.data.elapsed+=t,e.data.exectors.forEach(function(t){t(i-r)}),e.data.onUpdate&&e.data.onUpdate.exec(n,a.clamp01((i-r)/s)),e=o):(e.data.elapsed+=t,e=e.next)},a=this;e;)n();for(e=this.pendingList.head;e;){var o=e.key,r=e.data;e=e.next,this.pendingList.remove(o),this.iterList.append(o,r)}},t.prototype.clamp01=function(t){return t<0&&(t=0),t>1&&(t=1),t},t}();n.TweenUtil=r,cc._RF.pop()},{"../Container/LinkList":"LinkList","../Timer/TimerManager":"TimerManager","./TweenFunc":"TweenFunc"}],Tween:[function(t,e,n){"use strict";cc._RF.push(e,"dee27W2NehPUr/gRBJlWTEY","Tween"),Object.defineProperty(n,"__esModule",{value:!0}),n.Ease=n.Tween=void 0;var a=function(){function t(t,e,n){this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,e,n)}return t.get=function(e,n,a,o){return void 0===a&&(a=null),void 0===o&&(o=!1),o&&t.removeTweens(e),new t(e,n,a)},t.removeTweens=function(e){if(e.tween_count){for(var n=t._tweens,a=n.length-1;a>=0;a--)n[a]._target==e&&(n[a].paused=!0,n.splice(a,1));e.tween_count=0}},t.pauseTweens=function(e){if(e.tween_count)for(var n=t._tweens,a=n.length-1;a>=0;a--)n[a]._target==e&&(n[a].paused=!0)},t.resumeTweens=function(e){if(e.tween_count)for(var n=t._tweens,a=n.length-1;a>=0;a--)n[a]._target==e&&(n[a].paused=!1)},t.tick=function(e,n){void 0===n&&(n=!1);for(var a=t._tweens.concat(),o=a.length-1;o>=0;o--){var i=a[o];n&&!i.ignoreGlobalPause||i.paused||i.$tick(i._useTicks?1:e)}},t._register=function(e,n){var a=e._target,o=t._tweens;if(n)a&&(a.tween_count=a.tween_count>0?a.tween_count+1:1),o.push(e),t._inited||(t._inited=!0);else{a&&a.tween_count--;for(var i=o.length;i--;)if(o[i]==e)return void o.splice(i,1)}},t.removeAllTweens=function(){for(var e=t._tweens,n=0,a=e.length;n<a;n++){var o=e[n];o.paused=!0,o._target.tween_count=0}e.length=0},t.prototype.initialize=function(e,n,a){this._target=e,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,this.onChange=n.onChange,this.onChangeObj=n.onChangeObj,n.override&&t.removeTweens(e)),this.pluginData=a||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],n&&n.paused?this.paused=!0:t._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,t.NONE)},t.prototype.setPosition=function(t,e){void 0===e&&(e=1),t<0&&(t=0);var n=t,a=!1;if(n>=this.duration)if(this.loop){var o=n%this.duration;n=n>0&&0===o?this.duration:o}else n=this.duration,a=!0;if(n==this._prevPos)return a;a&&this.setPaused(!0);var i=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=t,this._target&&this._steps.length>0){for(var r=this._steps.length,s=-1,c=0;c<r&&!("step"==this._steps[c].type&&(s=c,this._steps[c].t<=n&&this._steps[c].t+this._steps[c].d>=n));c++);for(c=0;c<r;c++)if("action"==this._steps[c].type)0!=e&&(this._useTicks?this._runAction(this._steps[c],n,n):1==e&&n<i?(i!=this.duration&&this._runAction(this._steps[c],i,this.duration),this._runAction(this._steps[c],0,n,!0)):this._runAction(this._steps[c],i,n));else if("step"==this._steps[c].type&&s==c){var l=this._steps[s];this._updateTargetProps(l,Math.min((this._stepPosition=n-l.t)/l.d,1))}}return this.onChange&&this.onChange.call(this.onChangeObj),a},t.prototype._runAction=function(t,e,n,a){void 0===a&&(a=!1);var o=e,i=n;e>n&&(o=n,i=e);var r=t.t;(r==i||r>o&&r<i||a&&r==e)&&t.f.apply(t.o,t.p)},t.prototype._updateTargetProps=function(e,n){var a,o,i,r,s,c;if(e||1!=n){if(this.passive=!!e.v,this.passive)return;e.e&&(n=e.e(n,0,1,1)),a=e.p0,o=e.p1}else this.passive=!1,a=o=this._curQueueProps;for(var l in this._initQueueProps){null==(r=a[l])&&(a[l]=r=this._initQueueProps[l]),null==(s=o[l])&&(o[l]=s=r),i=r==s||0==n||1==n||"number"!=typeof r?1==n?s:r:r+(s-r)*n;var u=!1;if(c=t._plugins[l])for(var p=0,h=c.length;p<h;p++){var f=c[p].tween(this,l,i,a,o,n,!!e&&a==o,!e);f==t.IGNORE?u=!0:i=f}u||(this._target[l]=i)}},t.prototype.setPaused=function(e){return this.paused==e?this:(this.paused=e,t._register(this,!e),this)},t.prototype._cloneProps=function(t){var e={};for(var n in t)e[n]=t[n];return e},t.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},t.prototype._appendQueueProps=function(e){var n,a,o,i,r;for(var s in e)if(void 0===this._initQueueProps[s]){if(a=this._target[s],n=t._plugins[s])for(o=0,i=n.length;o<i;o++)a=n[o].init(this,s,a);this._initQueueProps[s]=this._curQueueProps[s]=void 0===a?null:a}else a=this._curQueueProps[s];for(var s in e){if(a=this._curQueueProps[s],n=t._plugins[s])for(r=r||{},o=0,i=n.length;o<i;o++)n[o].step&&n[o].step(this,s,a,e[s],r);this._curQueueProps[s]=e[s]}return r&&this._appendQueueProps(r),this._curQueueProps},t.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},t.prototype._set=function(t,e){for(var n in t)e[n]=t[n]},t.prototype.wait=function(t,e){if(null==t||t<=0)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:n,p1:n,v:e})},t.prototype.to=function(t,e,n){return void 0===n&&(n=void 0),(isNaN(e)||e<0)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},t.prototype.call=function(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),this._addAction({f:t,p:n||[],o:e||this._target})},t.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},t.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},t.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},t.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},t.NONE=0,t.LOOP=1,t.REVERSE=2,t._tweens=[],t.IGNORE={},t._plugins={},t._inited=!1,t._lastTime=0,t}();n.Tween=a;var o=function(){function t(){}return t.get=function(t){return t<-1&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var n=2*Math.PI;return function(a){if(0==a||1==a)return a;var o=e/n*Math.asin(1/t);return-t*Math.pow(2,10*(a-=1))*Math.sin((a-o)*n/e)}},t.getElasticOut=function(t,e){var n=2*Math.PI;return function(a){if(0==a||1==a)return a;var o=e/n*Math.asin(1/t);return t*Math.pow(2,-10*a)*Math.sin((a-o)*n/e)+1}},t.getElasticInOut=function(t,e){var n=2*Math.PI;return function(a){var o=e/n*Math.asin(1/t);return(a*=2)<1?t*Math.pow(2,10*(a-=1))*Math.sin((a-o)*n/e)*-.5:t*Math.pow(2,-10*(a-=1))*Math.sin((a-o)*n/e)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();n.Ease=o,cc._RF.pop()},{}],UIBaseController:[function(t,e,n){"use strict";cc._RF.push(e,"abc13FzuNhIyp1LRBmNJP+j","UIBaseController"),Object.defineProperty(n,"__esModule",{value:!0}),n.UIBaseController=void 0;var a=t("../UIFinder/UIFinder_Base"),o=t("../UIManager"),i=t("./UIConfigEnum"),r=t("../../Updater/UpdateManager"),s=function(){function t(){this.gameObject=null,this.isViewInited=!1,this.activate=!1,this.view_active=!1,this.IsLoading=!1,this.IsCloseing=!1,this.isOpenCompleted=!1,this.IsCloseCompleted=!1,this.UIParam_BaseInstance=null}return t.prototype.CreateModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.OnCreateModel.apply(this,t)},t.prototype.OnCreateModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.OnLoadUIContainerComplate=function(t){this.isViewInited=!0,this.gameObject=cc.instantiate(t),o.UIManagerInstance.GetUILayerNode(this.UILayer).addChild(this.gameObject)},Object.defineProperty(t.prototype,"UILayer",{get:function(){return i.UIConfigEnum.UILayer.BackgroudLayer},enumerable:!1,configurable:!0}),t.prototype.CreateView=function(){this.InitUIFinder(),this.OnCreateView()},t.prototype.OnCreateView=function(){},t.prototype.InitUIFinder=function(){this.UIParam_BaseInstance=this.gameObject.getComponent(a.default),this.OnInitUIFinder()},t.prototype.OnInitUIFinder=function(){},t.prototype.OnEnable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.activate=!0,this.SetViewActive(!0),this.OnAddListener(),this.AddUpdate()},t.prototype.AddUpdate=function(){r.UpdateManagerInstance.AddUpdate(this,this.OnUpdate)},t.prototype.RemoveUpdate=function(){r.UpdateManagerInstance.RemoveUpdate(this,this.OnUpdate)},t.prototype.OnUpdate=function(){},t.prototype.OnEnableEffect=function(){this.isOpenCompleted=!1,this.OnEnableEffectComplete()},t.prototype.OnEnableEffectComplete=function(){this.isOpenCompleted=!0},t.prototype.OnEnableSound=function(){},t.prototype.OnDisableEffect=function(){this.IsCloseCompleted=!1,this.OnDisableEffectComplete()},t.prototype.OnDisableEffectComplete=function(){this.IsCloseCompleted=!0,this.SetViewActive(!1)},t.prototype.OnDisableSound=function(){},t.prototype.OnAddListener=function(){},t.prototype.OnRemoveListener=function(){},t.prototype.GetUIResourcePath=function(){return""},t.prototype.SetViewActive=function(t){this.view_active=t,this.gameObject.active=this.view_active},t.prototype.OnDisable=function(){this.activate=!1,this.OnRemoveListener(),this.SetViewActive(!1),this.RemoveUpdate()},t.prototype.OnDestroy=function(){},t}();n.UIBaseController=s,cc._RF.pop()},{"../../Updater/UpdateManager":"UpdateManager","../UIFinder/UIFinder_Base":"UIFinder_Base","../UIManager":"UIManager","./UIConfigEnum":"UIConfigEnum"}],UIBattleController:[function(t,e,n){"use strict";cc._RF.push(e,"85956K9CIFF1a1OHHe3T4zR","UIBattleController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))(function(o,i){function r(t){try{c(a.next(t))}catch(e){i(e)}}function s(t){try{c(a.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((a=a.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UIBattleController=void 0;var s=t("../../../../Framework/UI/UIBase/UIBaseController"),c=t("../../../../Framework/UI/UIBase/UIConfigEnum"),l=t("../../../Data/EliminationData"),u=t("../../../../Framework/Net/NetListenerRegister"),p=t("../../../../NetWork/NetWorkMsgID"),h=t("../../../../Framework/Event/EventManager"),f=t("../../../../Framework/Event/EventMessages"),m=t("../../../../Framework/Utils/Tool"),d=t("../../../Data/GameData"),_=t("../../../Data/TimeData"),g=t("../../../../Framework/Net/Net"),I=t("./EliminationCell"),y=t("../../../../Config/GameEnum"),E=t("../../../../Framework/UI/UIManager"),v=t("../UIGameOverWindows/UIGameOverController"),M=t("../../../Data/SkillData"),S=t("../../../../Config/ResConfig"),C=t("../../../../Framework/Localization/LocalizationManager"),P=t("../../../../Framework/Utils/Logger"),O=t("../../../Data/TableData"),U=t("../UIMatchWindows/UIMatchController"),T=t("./UIHeadItem"),b=t("../../../../Framework/Audio/AudioManager"),D=t("../UITipsWindows/UITipsController"),R=t("../UIMainWindows/UIMainController"),k=t("../../../../Framework/Resources/LoaderManager"),w=t("../../Elimination/EliminationEffect"),L=t("../../../SDK/SDKManager"),N=t("../../../SDK/GameSDKEnum"),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.isMoveCell=!1,e.isStartGame=!1,e.moveCount=0,e.myMoveCount=0,e.otherMoveCount=0,e.skillData=new Map,e.isRound=!1,e.remainTime=0,e.timeSpeed=1,e.levelTime=0,e.isOtherRound=!1,e.currentCamp=y.GameEnum.CampType.None,e.hammerCount=0,e.isHammer=!1,e.shuffleCount=0,e.my_SkillCount=0,e.other_SkillCount=0,e.my_Score=0,e.other_Score=0,e.my_SkillID=0,e.isPlayerFrist=!1,e.skillDic=new Map,e.currentRoundIndex=0,e.currentUID="",e.currentTime=0,e.currItemTipEliIndex=-1,e.currMoveIndex=-1,e.gameHideTime=0,e.repairTime=0,e.headItemDic=new Map,e.headItemUIDDic=new Map,e.manyScoreDic=new Map,e.headNodeDic=new Map,e.isStartScore=!1,e.scoreTime=0,e.isStartAnimation=!1,e.rotation=0,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIBattleController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.OPERATE_ELEMENT_RESPONSE,this.OnRespOperateAnswer.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.GAME_SHUFFLE_NOTIFY,this.onGameShuffleNotify.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.PLAYER_OPERATE_TIMEOUT_GAME_UPDATE,this.OnRespRange.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.GAME_RESULT_BROADCAST,this.OnGameOver.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.Game_OVER_MANY_RESPONSE,this.OnGameOverManyNotify.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.Game_OVER_MANY_ROUND_RESPONSE,this.OnRespManyRange.bind(this)),u.NetListenerRegisterInstance.RegistScListener(p.NetWorkMsgID.GAME_MANY_SCORE_RESPONSE,this.OnRefreshManyScore.bind(this)),this.OnInit()},e.prototype.OnInit=function(){this.headItemDic.clear();for(var t=this.UIParam_Instance.many_Head_Node.childrenCount,e=0;e<t;e++){var n=this.UIParam_Instance.many_Head_Node.children[e],a=n.getComponent(T.default);this.headItemDic.set(e+1,a),this.headNodeDic.set(e+1,n.position)}this.OnLoadEffectRoot()},e.prototype.OnLoadEffectRoot=function(){var t=this;k.LoaderMgr.loadPrefab(S.ResConfig.UI_ITEM.UI_BATTLEEFFECT).then(function(e){if(null!=e){var n=cc.instantiate(e);n.setParent(t.UIParam_Instance.node),n.position=new cc.Vec3(0,0,0),t.UIParam_Instance.effectScript=n.getComponent(w.default),t.UIParam_Instance.effectScript.setBattleController(t),l.EliminationDataManager.isOpenEfffect=!0}})},Object.defineProperty(e.prototype,"UILayer",{get:function(){return c.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.InitLevelData(),this.GameStart(e[0]),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Page_Open,L.SDKInstance.Page_PointData("UIBattle",d.GameDataManager.gameMode))},e.prototype.GetUIResourcePath=function(){return"UI/View/UIBattleWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance,this.eliminationContent=this.UIParam_Instance.eliminationContent,this.skillmanyleft_animation=this.UIParam_Instance.many_Skill_Button.getComponent(cc.Animation),this.skillleft_animation=this.UIParam_Instance.my_Skill_Button.getComponent(cc.Animation),this.skillright_animation=this.UIParam_Instance.other_Skill_Button.getComponent(cc.Animation)},e.prototype.OnAddListener=function(){this.updateCellType_handel=this.updateCellType.bind(this),this.createAndMoveEliminationCell_handel=this.createAndMoveEliminationCell.bind(this),this.eliminationFinish_handel=this.eliminationFinish.bind(this),this.updateAllCell_handel=this.ShuffleAnimation.bind(this),this.eliminationShake_handel=this.eliminationShake.bind(this),this.OnReqShowTipContent_handel=this.OnReqShowTipContent.bind(this),this.startElimination_handel=this.startElimination.bind(this),this.resetCellGrids_handel=this.resetCellGrids.bind(this),h.EventManager.AddListener(f.EventMessages.GAME_UPDATECELLTYPEKEY,this.updateCellType_handel),h.EventManager.AddListener(f.EventMessages.GAME_CREATEELIMINATIONKEY,this.createAndMoveEliminationCell_handel),h.EventManager.AddListener(f.EventMessages.GAME_ELIMINATIONFINISHKEY,this.eliminationFinish_handel),h.EventManager.AddListener(f.EventMessages.GAME_UPDATEALLELIMINATION,this.updateAllCell_handel),h.EventManager.AddListener(f.EventMessages.GAME_ELIMINATIONSHAKEKEY,this.eliminationShake_handel),h.EventManager.AddListener(f.EventMessages.GAME_REFRESHHINT,this.OnReqShowTipContent_handel),h.EventManager.AddListener(f.EventMessages.GAME_ELIMINATIONKEY,this.startElimination_handel),h.EventManager.AddListener(f.EventMessages.GAME_RESET_CELLGRIDS,this.resetCellGrids_handel),this.eliminationContent.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.eliminationContent.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.eliminationContent.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.eliminationContent.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this),this.UIParam_Instance.my_Shuffle_Button.node.on("click",this.OnReqRefreshShuffle,this),this.UIParam_Instance.my_Skill_Button.node.on("click",this.OnReqUseSkill,this),this.UIParam_Instance.other_Skill_Button.node.on("click",this.OnReqUseSkill,this),this.UIParam_Instance.my_Hammer_Button.node.on("click",this.OnClickUseHammer,this),this.UIParam_Instance.many_Shuffle_Button.node.on("click",this.OnReqRefreshShuffle,this),this.UIParam_Instance.many_Hammer_Button.node.on("click",this.OnClickUseHammer,this),this.UIParam_Instance.many_Skill_Button.node.on("click",this.OnReqUseSkill,this),this.UIParam_Instance.close_Button.node.on("click",this.onGameOverNotify,this)},e.prototype.OnRemoveListener=function(){h.EventManager.RemoveListener(f.EventMessages.GAME_UPDATECELLTYPEKEY,this.updateCellType_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_CREATEELIMINATIONKEY,this.createAndMoveEliminationCell_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_ELIMINATIONFINISHKEY,this.eliminationFinish_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_UPDATEALLELIMINATION,this.updateAllCell_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_ELIMINATIONSHAKEKEY,this.eliminationShake_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_ELIMINATIONKEY,this.startElimination_handel),h.EventManager.RemoveListener(f.EventMessages.GAME_RESET_CELLGRIDS,this.resetCellGrids_handel),this.eliminationContent.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.eliminationContent.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.eliminationContent.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.eliminationContent.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),cc.game.off(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.off(cc.game.EVENT_SHOW,this.onGameShow,this),this.UIParam_Instance.my_Shuffle_Button.node.off("click",this.OnReqRefreshShuffle,this),this.UIParam_Instance.my_Skill_Button.node.off("click",this.OnReqUseSkill,this),this.UIParam_Instance.my_Hammer_Button.node.off("click",this.OnClickUseHammer,this),this.UIParam_Instance.many_Shuffle_Button.node.off("click",this.OnReqRefreshShuffle,this),this.UIParam_Instance.many_Hammer_Button.node.off("click",this.OnClickUseHammer,this),this.UIParam_Instance.many_Skill_Button.node.off("click",this.OnReqUseSkill,this),this.UIParam_Instance.close_Button.node.off("click",this.onGameOverNotify,this)},e.prototype.InitLevelData=function(){var t=O.TableDataManager.GetLevelTable(d.GameDataManager.gameMode);t&&(this.moveCount=t.MovesNum,this.roundCount=t.RoundNum,this.levelTime=t.RoundTime,this.myMoveCount=this.moveCount,this.otherMoveCount=this.moveCount)},e.prototype.GameStart=function(t){P.Logger.logModel(t,"\u6e38\u620f\u9884\u5907\u5f00\u59cb"),this.isStartGame=!1,this.cleanTipContent(),this.UIParam_Instance.back_Button.node.active=!0,d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament?(this.UIParam_Instance.manyPvpBottom.active=!0,this.UIParam_Instance.manyPvpTop.active=!0,this.UIParam_Instance.pvpBottom.active=!1,this.UIParam_Instance.pvpTop.active=!1,this.InitUIManyInfo(t)):(this.UIParam_Instance.manyPvpBottom.active=!1,this.UIParam_Instance.manyPvpTop.active=!1,this.UIParam_Instance.pvpBottom.active=!0,this.UIParam_Instance.pvpTop.active=!0,this.InitUIInfo(t)),0==t.roundIdx?this.StartAnimation(t.currentTurnPlayerId):(this.isStartGame=!0,this.eliminationFinish()),!this.cellNodeDict&&t.gridData&&this.CreateGame(t.gridData)},e.prototype.OnClickUseHammer=function(){this.isHammer?(this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None),this.isHammer=!1):this.hammerCount>0&&(this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.TopMask),this.isHammer=!0)},e.prototype.OnReqUseHammerProp=function(t){if(this.hammerCount>0){var e={};e.idList=new Array,e.idList.push(y.GameEnum.UseItemType.Hammer),e.idList.push(l.EliminationDataManager.index2Id[t]),e.userId=d.GameDataManager.uid,e.roomId=d.GameDataManager.roomId,e.opType=y.GameEnum.OperateType.ItemUse,g.NetInstance.sendMessage(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,e),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Req,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,e)),P.Logger.logModel(e,"\u9524\u5b50\u9053\u5177\u4f7f\u7528")}L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Click_Battle_Item,L.SDKInstance.ClickSkill_PointData(d.GameDataManager.gameMode,y.GameEnum.UseItemType.Hammer))},e.prototype.OnReqRefreshShuffle=function(){if(!this.isHammer&&this.shuffleCount>0){var t={};t.idList=new Array,t.idList.push(y.GameEnum.UseItemType.Shuffle),t.userId=d.GameDataManager.uid,t.roomId=d.GameDataManager.roomId,t.opType=y.GameEnum.OperateType.ItemUse,g.NetInstance.sendMessage(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Req,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t))}L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Click_Battle_Item,L.SDKInstance.ClickSkill_PointData(d.GameDataManager.gameMode,y.GameEnum.UseItemType.Shuffle))},e.prototype.OnReqShowTipContent=function(){this.cleanTipContent();var t={};t.idList=new Array,t.userId=d.GameDataManager.uid,t.roomId=d.GameDataManager.roomId,t.opType=y.GameEnum.OperateType.Hint,g.NetInstance.sendMessage(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Req,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t))},e.prototype.OnReqUseSkill=function(){if(this.skillDic.get(d.GameDataManager.uid)/this.my_SkillCount>=1){var t={};t.idList=new Array,t.userId=d.GameDataManager.uid,t.roomId=d.GameDataManager.roomId,t.opType=y.GameEnum.OperateType.Skill,g.NetInstance.sendMessage(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Req,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,t)),P.Logger.logModel(t,"\u70b9\u51fb\u6280\u80fd")}else E.UIManagerInstance.OpenWindows(D.UITipsController,y.GameEnum.TipType.Head,1015);var e=this.skillData.get(d.GameDataManager.uid);e&&L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Click_Battle_Skill,L.SDKInstance.ClickSkill_PointData(d.GameDataManager.gameMode,e.skillId))},e.prototype.onGameOverNotify=function(){L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Click_Battle_Quit,L.SDKInstance.Click_PointData(d.GameDataManager.gameMode));var t={};t.userId=d.GameDataManager.uid,g.NetInstance.sendMessage(p.NetWorkMsgID.GAME_PLAYER_QUIT_REQUEST,t),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Req,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.GAME_PLAYER_QUIT_REQUEST,t));var n=function(){E.UIManagerInstance.CloseWindow(U.UIMatchController),E.UIManagerInstance.CloseWindow(e),E.UIManagerInstance.OpenWindows(v.default,y.GameEnum.GameOverType.Active,this.my_Score,this.other_Score,this.otherUID,this.my_SkillID,null)}.bind(this);this.GameOverAnimation(!1,n)},e.prototype.OnGameOver=function(t){if(P.Logger.logModel(t,"\u6e38\u620f\u7ed3\u675f"),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.GAME_RESULT_BROADCAST,t)),null!=t)for(var n=function(){E.UIManagerInstance.CloseWindow(U.UIMatchController),E.UIManagerInstance.CloseWindow(e),E.UIManagerInstance.OpenWindows(v.default,y.GameEnum.GameOverType.Passive,this.my_Score,this.other_Score,this.otherUID,this.my_SkillID,t)}.bind(this),a=0;a<t.ranking.length;a++){var o=t.ranking[a];if(o.userId==d.GameDataManager.uid){this.GameOverAnimation(o.isWinner,n);break}}},e.prototype.OnGameOverManyNotify=function(t){if(P.Logger.logModel(t,"\u591a\u4eba\u6e38\u620f\u88ab\u6dd8\u6c70"),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.Game_OVER_MANY_RESPONSE,t)),t.passedUserId==d.GameDataManager.uid){var n=function(){E.UIManagerInstance.CloseWindow(U.UIMatchController),E.UIManagerInstance.CloseWindow(e),E.UIManagerInstance.OpenWindows(v.default,y.GameEnum.GameOverType.Active,this.my_Score,this.other_Score,this.otherUID,this.my_SkillID,null)}.bind(this);this.GameOverAnimation(!1,n)}},e.prototype.OnRespManyRange=function(t){L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.Game_OVER_MANY_ROUND_RESPONSE,t)),P.Logger.logModel(t,"\u56de\u5408"),this.RefreshMoveCount(t.currentTurnPlayerId,t.currentTurnLeftSteps,t.roundIdx),this.RefreshTimeRound(t.currentTurnPlayerId,t.toNextLeftTime,t.roundIdx,t.currentTurnLeftSteps),this.RefreshRound(t.roundIdx),this.RefreshShowMySkil(t.useSkillInfo),this.RefreshScore(t.scores),this.RefreshItemButton(t.currentTurnPlayerId,t.useItemInfo),this.RefreshItemData(t.useItemInfo),this.OnResetItem()},e.prototype.InitUIManyInfo=function(t){var e=this;for(var n in t.useSkillInfo)if(P.Logger.logModel(t.useSkillInfo[n],"\u6280\u80fd\u663e\u793a"),d.GameDataManager.uid==n){var a=M.SkillDataManager.getSkillData(t.useSkillInfo[n].skillId);this.my_SkillCount=a.UseReqNum,this.my_SkillID=t.useSkillInfo[n].skillId,this.UIParam_Instance.many_SkillNum_Lable.string="0/"+a.UseReqNum,m.default.setSprite(this.UIParam_Instance.many_Skill_Sprite,a.Icon),this.currentCamp=t.useSkillInfo[n].powerType,l.EliminationDataManager.campType=this.currentCamp,this.UIParam_Instance.many_Skill_ProgressBar.progress=0;break}if(this.otherUID=d.GameDataManager.uid,d.GameDataManager.teamInfoDic.size>0){if(this.headItemUIDDic.clear(),this.headItemDic.has(1)){var o=this.headItemDic.get(1);o.RefeshMyHead(),this.headItemUIDDic.set(d.GameDataManager.uid,o)}d.GameDataManager.teamInfoDic.forEach(function(t,n){if(e.headItemDic.has(n)){var a=e.headItemDic.get(n);a.RefreshHead(t),e.headItemUIDDic.set(t.userId,a)}})}this.RefreshMoveCount(t.currentTurnPlayerId,t.currentTurnLeftSteps,t.roundIdx),this.RefreshScore(t.scores),this.RefreshTimeRound(t.currentTurnPlayerId,t.toNextLeftTime,t.roundIdx,t.currentTurnLeftSteps),this.RefreshRound(t.roundIdx),this.RefreshItemData(t.useItemInfo)},e.prototype.InitUIInfo=function(t){for(var e in P.Logger.logModel(d.GameDataManager.teamInfoDic,"\u4eba\u7269\u4fe1\u606f\u663e\u793a"),t.useSkillInfo)if(P.Logger.logModel(t.useSkillInfo[e],"\u6280\u80fd\u663e\u793a"),d.GameDataManager.uid==e){var n=M.SkillDataManager.getSkillData(t.useSkillInfo[e].skillId);this.my_SkillCount=n.UseReqNum,this.my_SkillID=t.useSkillInfo[e].skillId,this.UIParam_Instance.my_SkillNum_Lable.string="0/"+n.UseReqNum,m.default.setSprite(this.UIParam_Instance.my_Skill_Sprite,n.Icon),this.currentCamp=t.useSkillInfo[e].powerType,l.EliminationDataManager.campType=this.currentCamp,this.UIParam_Instance.my_Skill_ProgressBar.progress=0}else{this.otherUID=e;var a=M.SkillDataManager.getSkillData(t.useSkillInfo[e].skillId);this.other_SkillCount=a.UseReqNum,this.UIParam_Instance.other_SkillNum_Lable.string="0/"+a.UseReqNum,m.default.setSprite(this.UIParam_Instance.other_Skill_Sprite,a.Icon),this.UIParam_Instance.other_Skill_ProgressBar.progress=0}d.GameDataManager.teamInfoDic.size>0&&(this.UIParam_Instance.my_Name_Lable.string=d.GameDataManager.playerName,this.UIParam_Instance.other_Name_Lable.string=d.GameDataManager.getUserName(this.otherUID)),t.currentTurnPlayerId==d.GameDataManager.uid&&(this.isPlayerFrist=!0),this.ScoreRefresh(),this.RefreshMoveCount(t.currentTurnPlayerId,t.currentTurnLeftSteps,t.roundIdx),this.RefreshScore(t.scores),this.RefreshTimeRound(t.currentTurnPlayerId,t.toNextLeftTime,t.roundIdx,t.currentTurnLeftSteps),this.RefreshRound(t.roundIdx),this.RefreshItemData(t.useItemInfo),this.onGameShow()},e.prototype.getCurrentCamp=function(){return this.currentCamp},e.prototype.OnRespRange=function(t){this.RefreshMoveCount(t.currentTurnPlayerId,t.currentTurnLeftSteps,t.roundIdx,!0),this.RefreshTimeRound(t.currentTurnPlayerId,t.toNextLeftTime,t.roundIdx,t.currentTurnLeftSteps),this.RefreshRound(t.roundIdx),this.RefreshShowMySkil(t.useSkillInfo),this.RefreshScore(t.scores),this.RefreshItemButton(t.currentTurnPlayerId,t.useItemInfo),this.RefreshItemData(t.useItemInfo),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.PLAYER_OPERATE_TIMEOUT_GAME_UPDATE,t))},e.prototype.OnRespOperateAnswer=function(t){if(P.Logger.logModel(t,"\u64cd\u4f5c\u6570\u636e"),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.OPERATE_ELEMENT_RESPONSE,t)),null!=t)switch(t.opType){case y.GameEnum.OperateType.Move:this.timeSpeed=1,this.onMoveElementAnswer(t);break;case y.GameEnum.OperateType.Hint:this.onGameTipAnswer(t);break;case y.GameEnum.OperateType.Skill:this.timeSpeed=1,this.onSkillElementAnswer(t);break;case y.GameEnum.OperateType.ItemUse:this.timeSpeed=1,this.onUseItemElementAnswer(t)}0!=t.errorCode&&t.opType!=y.GameEnum.OperateType.Hint&&(1005==t.errorCode?E.UIManagerInstance.OpenWindows(D.UITipsController,y.GameEnum.TipType.Nomal_Sure,t.errorCode,function(){E.UIManagerInstance.CloseWindow(e),E.UIManagerInstance.OpenWindows(R.UIMainController)}):1006!=t.errorCode&&1010!=t.errorCode&&1011!=t.errorCode&&1015!=t.errorCode||d.GameDataManager.OpenHeadTips(t.errorCode))},e.prototype.RefreshGameInfo=function(t,e){void 0===e&&(e=!1),this.RefreshItemData(t.useItemInfo),e&&this.RefreshMoveCount(t.currentTurnPlayerId,t.currentTurnLeftSteps,t.roundIdx),this.RefreshShowMySkil(t.useSkillInfo),this.RefreshScore(t.scores),this.RefreshItemButton(t.currentTurnPlayerId,t.useItemInfo)},e.prototype.RefreshShowMySkil=function(t){if(P.Logger.logModel(t,"\u6280\u80fd\u6570\u636e"),d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament)this.my_SkillID=t[d.GameDataManager.uid].skillId,this.skillDic.set(d.GameDataManager.uid,t[d.GameDataManager.uid].progress);else for(var e in t)this.skillDic.set(e,t[e].progress),e==d.GameDataManager.uid&&(this.my_SkillID=t[e].skillId)},e.prototype.RefreshScore=function(t){if(d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament)for(var e in t)this.manyScoreDic.set(e,t[e]);else for(var e in t)this.manyScoreDic.set(e,t[e]),e==d.GameDataManager.uid?this.my_Score=t[e]:this.other_Score=t[e]},e.prototype.OnRefreshManyScore=function(t){this.isStartScore=!0,this.manyScoreDic.set(t.userId,t.score),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.GAME_MANY_SCORE_RESPONSE,t))},e.prototype.RefreshMask=function(t,e){t==d.GameDataManager.uid?(this.isPlayerFrist?this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.RoundFristMask,129,e,d.GameDataManager.uid):this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.RoundMask,129,e+1,d.GameDataManager.uid),this.UIParam_Instance.maskScript.scheduleOnce(function(){this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None)}.bind(this),1.5)):(this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.RoundMask,130,e,this.otherUID),this.UIParam_Instance.maskScript.scheduleOnce(function(){this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.FullMask)}.bind(this),1.5))},e.prototype.SetSkillMask=function(t){this.UIParam_Instance.maskScript.SetSkillMask(t)},e.prototype.RefreshMoveCount=function(t,e,n,a){if(void 0===a&&(a=!1),d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament){0==n&&(e=0);for(var o=0;o<this.UIParam_Instance.many_Move_Node.childrenCount;o++)(i=this.UIParam_Instance.many_Move_Node.children[o].getChildByName("light")).active=o<=e-1;e<=0&&this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.ManyFullMask)}else{for(0==n&&(this.myMoveCount=0,this.otherMoveCount=0),t==d.GameDataManager.uid&&(this.myMoveCount=e),t==this.otherUID&&(this.otherMoveCount=e),o=0;o<this.UIParam_Instance.my_Move_Node.childrenCount;o++){var i=this.UIParam_Instance.my_Move_Node.children[o].getChildByName("light");o<=this.myMoveCount-1?i.active=!0:i.active=!1}for(o=0;o<this.UIParam_Instance.other_Move_Node.childrenCount;o++)i=this.UIParam_Instance.other_Move_Node.children[o].getChildByName("light"),o<=this.otherMoveCount-1?i.active=!0:i.active=!1}},e.prototype.RefreshTimeRound=function(t,e,n){0!=n&&(d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament?(this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.RoundFristMask,129,n,d.GameDataManager.uid),this.UIParam_Instance.scheduleOnce(function(){this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None)}.bind(this),1.5),this.UIParam_Instance.many_time_Round_ProgressBar.reverse=!1,this.UIParam_Instance.many_time_Round_ProgressBar.progress=1,this.UIParam_Instance.many_time_Round_Lable.string=C.LocalizationManagerInstancec.Get(129),m.default.setSprite(this.UIParam_Instance.many_time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_MY),this.remainTime=this.levelTime,e/1e3>=this.levelTime?(this.remainTime=Math.floor(e/1e3),this.timeSpeed=1):this.timeSpeed=2,this.isRound=!0):(t==d.GameDataManager.uid?(this.isOtherRound=!1,this.RefreshMask(d.GameDataManager.uid,n),this.UIParam_Instance.time_Round_ProgressBar.reverse=!1,this.UIParam_Instance.time_Round_ProgressBar.progress=1,this.UIParam_Instance.time_Round_Lable.string=C.LocalizationManagerInstancec.Get(129),m.default.setSprite(this.UIParam_Instance.time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_MY)):(this.isOtherRound=!0,this.RefreshMask(this.otherUID,n),this.UIParam_Instance.time_Round_ProgressBar.reverse=!0,this.UIParam_Instance.time_Round_ProgressBar.progress=1,this.UIParam_Instance.time_Round_Lable.string=C.LocalizationManagerInstancec.Get(130),m.default.setSprite(this.UIParam_Instance.time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_OTHER)),this.remainTime=this.levelTime,e/1e3>=this.levelTime?(this.remainTime=Math.floor(e/1e3),this.timeSpeed=1):this.timeSpeed=2,this.isRound=!0))},e.prototype.RefreshTimeProgress=function(t){this.isRound&&this.isStartGame&&(this.remainTime=this.remainTime-t*this.timeSpeed,this.remainTime<=0?(this.isRound=!1,this.UIParam_Instance.time_Round_ProgressBar.progress=0,this.UIParam_Instance.many_time_Round_ProgressBar.progress=0):(this.UIParam_Instance.time_Round_ProgressBar.progress=this.remainTime/this.levelTime,this.UIParam_Instance.many_time_Round_ProgressBar.progress=this.remainTime/this.levelTime)),this.isStartAnimation&&(this.remainTime=this.remainTime+t,this.remainTime>=1?(this.isStartAnimation=!1,this.UIParam_Instance.time_Round_ProgressBar.progress=1,this.UIParam_Instance.many_time_Round_ProgressBar.progress=1):(this.UIParam_Instance.time_Round_ProgressBar.progress=this.remainTime,this.UIParam_Instance.many_time_Round_ProgressBar.progress=this.remainTime))},e.prototype.RefreshManyScore=function(t){d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament&&this.isStartGame&&this.manyScoreDic.size>0&&this.isStartScore&&(this.scoreTime=this.scoreTime+t,this.scoreTime>=3&&(this.scoreTime=0,this.PVPManyHeadMoveAnimation()))},e.prototype.RefreshRound=function(t){if(P.Logger.logModel(t,"\u7b2c\u56de\u5408"),d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament){if(this.UIParam_Instance.many_Round_Node)for(var e=this.UIParam_Instance.many_Round_Node.childrenCount,n=0;n<e;n++)(a=this.UIParam_Instance.many_Round_Node.children[n].getComponent(cc.Sprite))&&(n==t-1?m.default.setSprite(a,S.ResConfig.UI_TEXTURE.UI_ROUND_NUM_BIG+(n+1)):m.default.setSprite(a,S.ResConfig.UI_TEXTURE.UI_ROUND_NUM_SMALL+(n+1)))}else if(this.UIParam_Instance.pvp_Round)for(e=this.UIParam_Instance.pvp_Round.childrenCount,n=0;n<e;n++){var a;(a=this.UIParam_Instance.pvp_Round.children[n].getComponent(cc.Sprite))&&(n==t-1?m.default.setSprite(a,S.ResConfig.UI_TEXTURE.UI_ROUND_NUM_BIG+(n+1)):m.default.setSprite(a,S.ResConfig.UI_TEXTURE.UI_ROUND_NUM_SMALL+(n+1)))}},e.prototype.RefreshItemData=function(t){for(var e in t)for(var n=0,a=t[e];n<a.length;n++){var o=a[n];if(d.GameDataManager.uid==e)if(o.itemId==y.GameEnum.UseItemType.Hammer){this.hammerCount=o.count;var i=this.UIParam_Instance.my_Hammer_Button.target.getComponent(cc.Sprite),r=this.UIParam_Instance.many_Hammer_Button.target.getComponent(cc.Sprite);this.hammerCount>0?(m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_HAMMER_NORMAL_MY),m.default.setSprite(r,S.ResConfig.UI_TEXTURE.UI_HAMMER_NORMAL_MY)):(m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_HAMMER_DARK_MY),m.default.setSprite(r,S.ResConfig.UI_TEXTURE.UI_HAMMER_DARK_MY))}else this.shuffleCount=o.count,i=this.UIParam_Instance.my_Shuffle_Button.target.getComponent(cc.Sprite),r=this.UIParam_Instance.many_Shuffle_Button.target.getComponent(cc.Sprite),this.shuffleCount>0?(m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_NORMAL_MY),m.default.setSprite(r,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_NORMAL_MY)):(m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_DARK_MY),m.default.setSprite(r,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_DARK_MY));else o.itemId==y.GameEnum.UseItemType.Hammer?(i=this.UIParam_Instance.other_Hammer_Button.target.getComponent(cc.Sprite),o.count>0?m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_HAMMER_NORMAL_OTHER):m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_HAMMER_DARK_OTHER)):(i=this.UIParam_Instance.other_Shuffle_Button.target.getComponent(cc.Sprite),o.count>0?m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_NORMAL_OTHER):m.default.setSprite(i,S.ResConfig.UI_TEXTURE.UI_SHUFFLE_DARK_OTHER))}},e.prototype.RefreshItemButton=function(t){d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament?(this.UIParam_Instance.many_Hammer_Button.interactable=!0,this.UIParam_Instance.many_Shuffle_Button.interactable=!0,this.UIParam_Instance.many_Skill_Button.interactable=!0):d.GameDataManager.uid==t?(this.UIParam_Instance.my_Shuffle_Button.interactable=!0,this.UIParam_Instance.my_Hammer_Button.interactable=!0,this.UIParam_Instance.my_Skill_Button.interactable=!0,this.UIParam_Instance.other_Hammer_Button.interactable=!1,this.UIParam_Instance.other_Shuffle_Button.interactable=!1,this.UIParam_Instance.other_Skill_Button.interactable=!1):(this.UIParam_Instance.my_Shuffle_Button.interactable=!1,this.UIParam_Instance.my_Hammer_Button.interactable=!1,this.UIParam_Instance.my_Skill_Button.interactable=!1,this.UIParam_Instance.other_Hammer_Button.interactable=!0,this.UIParam_Instance.other_Shuffle_Button.interactable=!0,this.UIParam_Instance.other_Skill_Button.interactable=!0)},e.prototype.onGameHide=function(){this.gameHideTime=(new Date).getTime()},e.prototype.onGameShow=function(){this.repairTime=(new Date).getTime()-this.gameHideTime,this.repairTime/=1e3},e.prototype.CreateGame=function(t){if(t){var e={};l.EliminationDataManager.index2Id={},l.EliminationDataManager.id2Index={};for(var n=0,a=t;n<a.length;n++){var o=a[n].split(":").map(Number);e[o[0]]={type:o[1],state:o[2],square:o[3],item:o[4]}}for(var i=[],r=0;r<l.EliminationDataManager.maxRow;r++)for(var s=0;s<l.EliminationDataManager.maxColumn;s++){var c=r+10*s;l.EliminationDataManager.index2Id[i.length]=c,l.EliminationDataManager.id2Index[c]=i.length,i.push(e[c])}l.EliminationDataManager.initLevelData(i),this.initUI(),this.setContent(!0),this.eliminationFinish()}},e.prototype.resetCellGrids=function(t){if(this.cleanTipContent(),this.currItemTip){this.currItemTip.destroy(),this.currItemTip=null;var e=this.cellNodeDict[this.currItemTipEliIndex];cc.Tween.stopAllByTarget(e),e.position=this.cellPosDict[this.currItemTipEliIndex]}for(var n={},a=0,o=t;a<o.length;a++){var i=o[a].split(":").map(Number);n[i[0]]={type:i[1],state:i[2],square:i[3],item:i[4]}}for(var r=[],s=0;s<l.EliminationDataManager.maxRow;s++)for(var c=0;c<l.EliminationDataManager.maxColumn;c++){var u=s+10*c;r.push(n[u])}l.EliminationDataManager.cellList=r,this.setContent(!1),this.eliminationFinish()},e.prototype.OnUpdate=function(t){if(this.RefreshTimeProgress(t),this.RefreshManyScore(t),this.isStartGame&&!this.isMoveCell&&!this.isOtherRound&&!l.EliminationDataManager.isEliminating){var e=_.default.ins.getCurrentTime();e-this.currentTime>3&&(this.OnReqShowTipContent(),this.eliminationFinish(),this.currentTime=e)}},e.prototype.eliminationFinish=function(){this.currentTime=_.default.ins.getCurrentTime()},e.prototype.eliminationShake=function(){var t=cc.moveBy(.03,cc.v2(-10,5)),e=cc.moveBy(.05,cc.v2(20,5)),n=cc.moveBy(.05,cc.v2(-5,-20)),a=cc.moveBy(.03,cc.v2(-5,10)),o=cc.sequence(t,e,n,a),i=cc.repeat(o,2);this.UIParam_Instance.node.getChildByName("Center").runAction(i)},e.prototype.cleanTipContent=function(){if(this.eliminationFinish(),-1!=this.currMoveIndex){var t=this.cellNodeDict[this.currMoveIndex];cc.Tween.stopAllByTarget(t),t.position=this.cellPosDict[this.currMoveIndex],this.UIParam_Instance.effect_biankuang.active=!1,this.currMoveIndex=-1}},e.prototype.onGameTipAnswer=function(t){if(!(!this.isStartGame||this.isHammer||this.isMoveCell||this.isOtherRound||l.EliminationDataManager.isEliminating)&&0==t.errorCode){var e=JSON.parse(t.datas),n=l.EliminationDataManager.id2Index[e.moveId];this.currMoveIndex=n;var a=l.EliminationDataManager.getRowColumn(n),o={row:a.row,column:a.column};if(1==e.dir){if(a.row>=l.EliminationDataManager.maxRow-1)return;o.row+=1,cc.tween(this.cellNodeDict[n]).then(cc.tween().to(.5,{y:this.cellPosDict[n].y+10}).to(.5,{y:this.cellPosDict[n].y})).repeat(1e5).start()}else if(2==e.dir){if(a.row<=0)return;o.row-=1,cc.tween(this.cellNodeDict[n]).then(cc.tween().to(.5,{y:this.cellPosDict[n].y-10}).to(.5,{y:this.cellPosDict[n].y})).repeat(1e5).start()}else if(3==e.dir){if(o.column<=0)return;o.column-=1,cc.tween(this.cellNodeDict[n]).then(cc.tween().to(.5,{x:this.cellPosDict[n].x-10}).to(.5,{x:this.cellPosDict[n].x})).repeat(1e5).start()}else if(4==e.dir){if(o.column>=l.EliminationDataManager.maxColumn-1)return;o.column+=1,cc.tween(this.cellNodeDict[n]).then(cc.tween().to(.5,{x:this.cellPosDict[n].x+10}).to(.5,{x:this.cellPosDict[n].x})).repeat(1e5).start()}var i=l.EliminationDataManager.getCellIndex(o.row,o.column),r=l.EliminationDataManager.index2Id[i],s=e.ids?e.ids.split(",").map(Number):[];if(s.length>=3&&s.indexOf(r)>-1){var c,u=s.indexOf(r),p=0==u?s[u+1]:s[u-1];c=0!=u&&u!=s.length-1?r:p;var h=l.EliminationDataManager.id2Index[c];this.UIParam_Instance.effect_biankuang.active=!0,this.UIParam_Instance.effect_biankuang.scaleX=1,this.UIParam_Instance.effect_biankuang.position=this.cellPosDict[h],1==Math.abs(r-p)?this.UIParam_Instance.effect_biankuang.angle=-90:this.UIParam_Instance.effect_biankuang.angle=0}else if(2==s.length&&s.indexOf(r)>-1){this.UIParam_Instance.effect_biankuang.active=!0,this.UIParam_Instance.effect_biankuang.scaleX=.66;var f=.5*this.UIParam_Instance.cellPrefab.data.height;1==e.dir?(this.UIParam_Instance.effect_biankuang.position=cc.v3(this.cellPosDict[n].x,this.cellPosDict[n].y+f),this.UIParam_Instance.effect_biankuang.angle=-90):2==e.dir?(this.UIParam_Instance.effect_biankuang.position=cc.v3(this.cellPosDict[n].x,this.cellPosDict[n].y-f),this.UIParam_Instance.effect_biankuang.angle=-90):3==e.dir?(this.UIParam_Instance.effect_biankuang.position=cc.v3(this.cellPosDict[n].x-f,this.cellPosDict[n].y),this.UIParam_Instance.effect_biankuang.angle=0):4==e.dir&&(this.UIParam_Instance.effect_biankuang.angle=0,this.UIParam_Instance.effect_biankuang.position=cc.v3(this.cellPosDict[n].x+f,this.cellPosDict[n].y))}}},e.prototype.initUI=function(){this.eliminationPool=new cc.NodePool,this.forbidPool=new cc.NodePool,this.tipPool=new cc.NodePool},e.prototype.setContent=function(t){void 0===t&&(t=!0),this.UIParam_Instance.eliminationContent.removeAllChildren(),this.UIParam_Instance.eliminationLayout.enabled=!0;for(var e=0;e<l.EliminationDataManager.maxRow;e++)for(var n=0;n<l.EliminationDataManager.maxColumn;n++){var a=this.eliminationPool.get();a||(a=cc.instantiate(this.UIParam_Instance.cellPrefab)),a.scale=1,a.opacity=255,a.parent=this.eliminationContent,a.getComponent("EliminationCell").initData(e,n,this)}this.UIParam_Instance.eliminationLayout.updateLayout(),this.UIParam_Instance.eliminationLayout.enabled=!1,this.cellPosDict={},this.cellNodeDict={},this.destroyCellCount=0;for(var o=0;o<this.eliminationContent.childrenCount;o++){var i=this.eliminationContent.children[o];this.cellPosDict[o]=i.position,this.cellNodeDict[o]=i}t&&this.setFirstAnim()},e.prototype.setForbidContent=function(){var t=l.EliminationDataManager.forbidDict;for(var e in t){var n=this.forbidPool.get();n||(n=cc.instantiate(this.UIParam_Instance.forbidPrefab)),n.parent=this.UIParam_Instance.forbidContent,n.position=this.cellPosDict[e]}},e.prototype.setFirstAnim=function(){var t=this.UIParam_Instance.eliminationLayout.spacingY,e=this.UIParam_Instance.cellPrefab.data.height;for(var n in this.cellNodeDict){var a=this.cellPosDict[n],o=a.y+(t+e)*l.EliminationDataManager.maxColumn-e/2,i=this.cellNodeDict[n].getComponent("EliminationCell");i.node.position=cc.v3(a.x,o),i.updatePosition(null,.6)}},e.prototype.touchStart=function(t){if(this.isStartGame&&!this.isMoveCell&&!this.isOtherRound&&!l.EliminationDataManager.isEliminating){if(this.currItemTip){this.currItemTip.destroy(),this.currItemTip=null;var e=this.cellNodeDict[this.currItemTipEliIndex];cc.Tween.stopAllByTarget(e),e.position=this.cellPosDict[this.currItemTipEliIndex]}this.cleanTipContent();for(var n=t.target.convertToNodeSpaceAR(t.touch._point),a=-1,o=0;o<l.EliminationDataManager.maxColumn;o++){var i=l.EliminationDataManager.getCellIndex(0,o);if(c=this.cellNodeDict[i]){var r=c.position;if(n.x>r.x-c.width/2&&n.x<r.x+c.width/2){a=o;break}}}var s=-1;for(o=0;o<l.EliminationDataManager.maxRow;o++){var c;if(i=l.EliminationDataManager.getCellIndex(o,0),(c=this.cellNodeDict[i])&&(r=c.position,n.y>r.y-c.height/2&&n.y<r.y+c.height/2)){s=o;break}}this.isHammer?(i=l.EliminationDataManager.getCellIndex(s,a),this.OnReqUseHammerProp(i)):l.EliminationDataManager.getIsCanMove(s,a)&&(this.startInfo={},this.startInfo.row=s,this.startInfo.column=a,this.startInfo.position=n)}},e.prototype.touchMove=function(t){if(this.startInfo){var e=t.target.convertToNodeSpaceAR(t.touch._point),n=this.startInfo.position;if(n.sub(e).mag()>15){var a=this.startInfo.row,o=this.startInfo.column,i=180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI;if(this.rotation=0,i>-135&&i<=-45){if(a<=0)return;a-=1}else if(i>-45&&i<=45){if(o>=l.EliminationDataManager.maxColumn-1)return;o+=1,this.rotation=90}else if(i>45&&i<=135){if(a>=l.EliminationDataManager.maxRow-1)return;a+=1,this.rotation=180}else{if(o<=0)return;o-=1,this.rotation=-90}if(l.EliminationDataManager.getIsCanMove(a,o)){var r=l.EliminationDataManager.getCellIndex(this.startInfo.row,this.startInfo.column),s=l.EliminationDataManager.getCellIndex(a,o);l.EliminationDataManager.exchangeIndex1=r,l.EliminationDataManager.exchangeIndex2=s,l.EliminationDataManager.lastingExchangeIndex1=r,l.EliminationDataManager.lastingExchangeIndex2=s;var c={};c.idList=new Array,c.idList.push(l.EliminationDataManager.index2Id[r]),c.idList.push(l.EliminationDataManager.index2Id[s]),c.userId=d.GameDataManager.uid,c.roomId=d.GameDataManager.roomId,c.opType=y.GameEnum.OperateType.Move,g.NetInstance.sendMessage(p.NetWorkMsgID.OPERATE_ELEMENT_REQUEST,c)}this.startInfo=null}}},e.prototype.touchEnd=function(){this.startInfo=null},e.prototype.touchCancel=function(){this.startInfo=null},e.prototype.onMoveElementAnswer=function(t){P.Logger.logModel(t,"\u79fb\u52a8\u53cd\u9988");var e=t.errorCode;if(this.cleanTipContent(),0!=e)this.exchangeAction(!1,this.rotation),b.AudioMgr.playSFX("sfx_battle_errormove",b.AudioType.EAudio_Voice);else{b.AudioMgr.playSFX("sfx_battle_move",b.AudioType.EAudio_Voice),l.EliminationDataManager.comboCount=0;for(var n=0,a=JSON.parse(t.datas);n<a.length;n++){var o=a[n];if(1==o.act){var i=o.grids.split(",").map(Number);l.EliminationDataManager.exchangeIndex1=l.EliminationDataManager.id2Index[i[0]],l.EliminationDataManager.exchangeIndex2=l.EliminationDataManager.id2Index[i[1]],l.EliminationDataManager.lastingExchangeIndex1=l.EliminationDataManager.id2Index[i[0]],l.EliminationDataManager.lastingExchangeIndex2=l.EliminationDataManager.id2Index[i[1]]}else 2==o.act?l.EliminationDataManager.loginList.push(o):4==o.act&&l.EliminationDataManager.loginList.push(o)}var r=l.EliminationDataManager.getRowColumn(l.EliminationDataManager.exchangeIndex1),s=l.EliminationDataManager.getRowColumn(l.EliminationDataManager.exchangeIndex2);l.EliminationDataManager.onlyExchangeCell(r.row,r.column,s.row,s.column),this.exchangeAction(!0,this.rotation),this.RefreshGameInfo(t.gameInfo,!0)}},e.prototype.exchangeAction=function(t){this.isMoveCell=!0;var e=l.EliminationDataManager.exchangeIndex1,n=l.EliminationDataManager.exchangeIndex2,a=this.cellNodeDict[e],o=this.cellNodeDict[n],i=this.cellPosDict[e],r=this.cellPosDict[n],s=this,c=function(t,e,n,a){void 0===a&&(a=null);var o=t.getComponent("EliminationCell");o&&o.setMoveAnimation(),n>1&&(t.zIndex=1,cc.tween(t).to(.1,{scale:n}).to(.1,{scale:1}).start()),cc.tween(t).to(.2,{position:e}).call(function(){t.zIndex=0,a&&a()}).start()},u=l.EliminationDataManager.cellList[e],p=l.EliminationDataManager.cellList[n];u.state>1&&p.state>1&&(i=r),c(a,r,1.5),c(o,i,1,function(){t?(s.isMoveCell=!1,this.cellNodeDict[e]=o,this.cellNodeDict[n]=a,l.EliminationDataManager.isEliminating||l.EliminationDataManager.runLogin()):(c(a,i,1.5),c(o,r,1,function(){s.isMoveCell=!1}))}.bind(this))},e.prototype.onSkillElementAnswer=function(t){if(P.Logger.logModel(t,"\u6280\u80fd"),0==t.errorCode){for(var e=0,n=JSON.parse(t.datas);e<n.length;e++){var a=n[e];2==a.act?l.EliminationDataManager.loginList.push(a):4==a.act&&l.EliminationDataManager.loginList.push(a)}this.cleanTipContent(),l.EliminationDataManager.isEliminating||l.EliminationDataManager.runLogin(),this.RefreshGameInfo(t.gameInfo),this.SkillRefresh()}else P.Logger.logModel(t,"\u6280\u80fd\u6570\u636e")},e.prototype.OnResetItem=function(){this.hammerCount>0&&this.isHammer&&(this.isHammer=!1)},e.prototype.onUseItemElementAnswer=function(t){if(0==t.errorCode){P.Logger.logModel(t,"\u5c0f\u9524\u5b50"),this.isHammer=!1;for(var e=0,n=JSON.parse(t.datas);e<n.length;e++){var a=n[e];2==a.act?l.EliminationDataManager.loginList.push(a):4==a.act&&l.EliminationDataManager.loginList.push(a)}this.cleanTipContent(),l.EliminationDataManager.isEliminating||l.EliminationDataManager.runLogin(),this.RefreshGameInfo(t.gameInfo),d.GameDataManager.gameMode!=y.GameEnum.PVPType.Tournament&&t.gameInfo.currentTurnPlayerId!=d.GameDataManager.uid||this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None)}else 1018==t.errorCode?this.RefreshGameInfo(t.gameInfo):P.Logger.logModel(t,"\u9053\u5177\u6570\u636e\u9519\u8bef")},e.prototype.onGameShuffleNotify=function(t){if(P.Logger.logModel(t,"\u6d17\u724c"),this.timeSpeed=1,this.cleanTipContent(),this.currItemTip){this.currItemTip.destroy(),this.currItemTip=null;var e=this.cellNodeDict[this.currItemTipEliIndex];cc.Tween.stopAllByTarget(e),e.position=this.cellPosDict[this.currItemTipEliIndex]}l.EliminationDataManager.loginList.push({act:101,grids:t.grids}),P.Logger.logModel(l.EliminationDataManager.isEliminating,"\u6d17\u724c"),l.EliminationDataManager.isEliminating||l.EliminationDataManager.runLogin(),L.SDKInstance.GameDataPoint(N.GameSDKEnum.PointType.Protocol_Resp,L.SDKInstance.Protocol_PointData(p.NetWorkMsgID.GAME_SHUFFLE_NOTIFY,t))},e.prototype.updateCellType=function(){for(var t=l.EliminationDataManager.updateTypeList,e=0;e<t.length;e++){var n=t[e],a=this.cellNodeDict[n];a&&a.getComponent("EliminationCell").updateType()}},e.prototype.updateCellState=function(){for(var t=l.EliminationDataManager.updateStateList,e=0;e<t.length;e++){var n=t[e],a=this.cellNodeDict[n];a&&a.getComponent("EliminationCell").updateState()}},e.prototype.updateCellSquare=function(){for(var t=l.EliminationDataManager.updateStateList,e=0;e<t.length;e++){var n=t[e],a=this.cellNodeDict[n];a&&a.getComponent("EliminationCell").updateSquare()}},e.prototype.updateCellItem=function(){for(var t=l.EliminationDataManager.updateStateList,e=0;e<t.length;e++){var n=t[e],a=this.cellNodeDict[n];a&&a.getComponent("EliminationCell").updateItem()}},e.prototype.removeCreateSpecial=function(t){for(var e=this,n=l.EliminationDataManager.createSpecialList,a=0;a<n.length;a++)for(var o=n[a],i=o.list,r=function(n){var a=i[n],r=s.cellNodeDict[a];if(l.EliminationDataManager.cellList[a],a!==o.index&&r){s.removeElimination(l.EliminationDataManager.cellList[a],r,s.eliminationPool);var c=s.cellPosDict[o.index];s.cellNodeDict[a]=null,cc.tween(r);var u=cc.scaleTo(.1,1.2),p=cc.scaleTo(.1,0),h=cc.moveTo(.2,c),f=cc.callFunc(function(){r.zIndex=0,r.active=!1,e.eliminationPool.put(r),e.checkIsComplete(t)}),m=cc.sequence(cc.spawn(cc.sequence(u,p),h),f);r.runAction(m),r.zIndex=1}},s=this,c=0;c<i.length;c++)r(c)},e.prototype.startElimination=function(){var t=this;this.updateCellType(),this.updateCellState(),this.updateCellSquare(),this.updateCellItem();var e={},n=l.EliminationDataManager.preEliminationDict;for(var a in n){var o=l.EliminationDataManager.cellList[a];if(o){var i=o.type+":"+o.state;e[i]||(e[i]=0),e[i]++}}this.removeEliminationAll(e);var r=Object.keys(n).length;if(this.removeCreateSpecial(r),this.destroyCellCount=0,r>0){var s=function(e){var n=c.cellNodeDict[e];n&&(c.removeElimination(l.EliminationDataManager.cellList[e],n,c.eliminationPool),c.cellNodeDict[e]=null,cc.tween(n).to(.2,{scale:0}).call(function(){n.active=!1,t.eliminationPool.put(n),t.checkIsComplete(r)}).start())},c=this;for(var a in n)s(a)}else l.EliminationDataManager.delCompleteElimination()},e.prototype.checkIsComplete=function(t){this.destroyCellCount++,this.destroyCellCount===t&&(this.destroyCellCount=0,this.updateAllCell(),l.EliminationDataManager.delCompleteElimination())},e.prototype.updateAllCell=function(){for(var t in this.cellNodeDict){var e=this.cellNodeDict[t];if(e){var n=e.getComponent("EliminationCell");n.updateType(),n.updateState(),n.updateSquare(),n.updateItem()}}},e.prototype.createAndMoveEliminationCell=function(t,e){for(var n=0,a=0;a<e.length;a++){var o=e[a],i=o[0],r=this.cellNodeDict[i];if(r){var s=r.getComponent("EliminationCell"),c=o[o.length-1];this.cellNodeDict[i]=null,this.cellNodeDict[c]=r,o.shift(),s.setPositionFromNodes(o,function(){++n===e.length&&t.length<=0&&l.EliminationDataManager.createNewEndElimination()})}else n++}var u=this.UIParam_Instance.eliminationLayout.spacingY,p=this.UIParam_Instance.cellPrefab.data.height,h=0;for(a=0;a<t.length;a++){i=t[a];var f=l.EliminationDataManager.cellList[i],m=this.cellPosDict[i],d=f.addRow,_=m.y+(u+p)*d-p/2,g=this.eliminationPool.get();g||(g=cc.instantiate(this.UIParam_Instance.cellPrefab)),g.active=!0,g.parent=this.eliminationContent,g.scale=1,g.opacity=255,g.position=cc.v3(m.x,_),this.cellNodeDict[i]=g,(s=g.getComponent("EliminationCell")).initData(f.row,f.column,this),s.setPositionFromNodes(f.move,function(){++h===t.length&&l.EliminationDataManager.createNewEndElimination()})}},e.prototype.createEliminationCell=function(t,e){for(var n=0;n<e.length;n++){var a=e[n],o=this.cellNodeDict[a];if(o){var i=(d=o.getComponent("EliminationCell")).getCellIndex();this.cellNodeDict[a]=null,this.cellNodeDict[i]=o,d.updatePosition()}}var r=this.UIParam_Instance.eliminationLayout.spacingY,s=this.UIParam_Instance.cellPrefab.data.height,c=0;for(n=0;n<t.length;n++){a=t[n];var u=l.EliminationDataManager.cellList[a],p=this.cellPosDict[a],h=u.addRow,f=p.y+(r+s)*h-s/2,m=this.eliminationPool.get();m||(m=cc.instantiate(this.UIParam_Instance.cellPrefab)),m.parent=this.eliminationContent,m.scale=1,m.opacity=255,m.position=cc.v3(p.x,f),this.cellNodeDict[a]=m;var d,_=l.EliminationDataManager.cellList[a];(d=m.getComponent("EliminationCell")).initData(_.row,_.column,this),d.updatePosition(function(){++c===t.length&&l.EliminationDataManager.checkNewElimination()})}},e.prototype.OnClean=function(){var t=this;this.cleanTipContent(),this.isMoveCell=!1,this.startInfo=null,this.cellPosDict=null,this.cellNodeDict=null,this.destroyCellCount=0,this.isStartGame=!1,this.moveCount=0,this.roundCount=0,this.skillData.clear(),this.isRound=!1,this.remainTime=0,this.timeSpeed=1,this.isPlayerFrist=!1,this.currentRoundIndex=0,this.currentTime=0,this.currItemTipEliIndex=-1,this.currMoveIndex=-1,this.gameHideTime=0,this.repairTime=0,this.manyScoreDic.clear(),this.scoreTime=0,this.isStartScore=!1,this.isOtherRound=!1,this.currentCamp=y.GameEnum.CampType.None,this.hammerCount=0,this.isHammer=!1,this.shuffleCount=0,this.skillDic.clear(),this.eliminationPool.clear(),this.forbidPool.clear(),this.tipPool.clear(),this.headItemUIDDic.clear(),this.eliminationContent.destroyAllChildren(),this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None),d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament?(this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.destroySkillIconEffect(this.UIParam_Instance.many_skill_effectNode),this.headNodeDic.forEach(function(e,n){t.headItemDic.has(n)&&(t.headItemDic.get(n).node.position=e)})):this.UIParam_Instance.effectScript&&(this.UIParam_Instance.effectScript.destroySkillIconEffect(this.UIParam_Instance.my_skill_effectNode),this.UIParam_Instance.effectScript.destroySkillIconEffect(this.UIParam_Instance.other_skill_effectNode))},e.prototype.OnDisable=function(){t.prototype.OnDisable.call(this),l.EliminationDataManager.cleanData(),this.OnClean()},e.prototype.OnDestroy=function(){u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.OPERATE_ELEMENT_RESPONSE),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.GAME_SHUFFLE_NOTIFY),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.PLAYER_OPERATE_TIMEOUT_GAME_UPDATE),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.GAME_RESULT_BROADCAST),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.Game_OVER_MANY_RESPONSE),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.Game_OVER_MANY_ROUND_RESPONSE),u.NetListenerRegisterInstance.UnRegistScListener(p.NetWorkMsgID.GAME_MANY_SCORE_RESPONSE),this.headItemDic.clear(),this.headNodeDic.clear()},e.prototype.StartAnimation=function(t){d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament?this.skillmanyleft_animation&&(m.default.setSprite(this.UIParam_Instance.many_time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_MY),this.UIParam_Instance.many_time_Round_ProgressBar.progress=0,this.UIParam_Instance.many_time_Round_Lable.string=C.LocalizationManagerInstancec.Get(129),this.skillmanyleft_animation.play("battle_skillbutton_left_start_animation"),this.skillmanyleft_animation.on("finished",function(){for(var t=this,e=0;e<this.UIParam_Instance.many_Move_Node.childrenCount;e++){var n=this.UIParam_Instance.many_Move_Node.children[e].getChildByName("light");n.active=!0,this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.showMoveEffect(n)}this.UIParam_Instance.scheduleOnce(function(){t.isStartAnimation=!0,t.currentUID=d.GameDataManager.uid,b.AudioMgr.playSFX("sfx_battle_timebar",b.AudioType.EAudio_Voice)},.2)},this)):this.skillleft_animation&&this.skillright_animation&&(this.UIParam_Instance.time_Round_ProgressBar.progress=0,t==d.GameDataManager.uid?(m.default.setSprite(this.UIParam_Instance.time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_MY),this.UIParam_Instance.time_Round_ProgressBar.reverse=!1,this.UIParam_Instance.time_Round_Lable.string=C.LocalizationManagerInstancec.Get(129)):(m.default.setSprite(this.UIParam_Instance.time_Bar_Sprite,S.ResConfig.UI_TEXTURE.UI_ROUND_OTHER),this.UIParam_Instance.time_Round_ProgressBar.reverse=!0,this.UIParam_Instance.time_Round_Lable.string=C.LocalizationManagerInstancec.Get(130)),this.UIParam_Instance.time_Round_ProgressBar.progress=0,this.skillleft_animation.play("battle_skillbutton_left_start_animation"),this.skillright_animation.play("battle_skillbutton_right_start_animation"),this.skillleft_animation.on("finished",function(){var e=this;b.AudioMgr.playSFX("sfx_battle_moverefill",b.AudioType.EAudio_Voice),this.myMoveCount=this.moveCount,this.otherMoveCount=this.moveCount,this.currentRoundIndex=1;for(var n=0;n<this.UIParam_Instance.my_Move_Node.childrenCount;n++)(a=this.UIParam_Instance.my_Move_Node.children[n].getChildByName("light")).active=!0,this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.showMoveEffect(a);for(n=0;n<this.UIParam_Instance.other_Move_Node.childrenCount;n++){var a;(a=this.UIParam_Instance.other_Move_Node.children[n].getChildByName("light")).active=!0,this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.showMoveEffect(a)}this.UIParam_Instance.scheduleOnce(function(){e.isStartAnimation=!0,e.currentUID=t,b.AudioMgr.playSFX("sfx_battle_timebar",b.AudioType.EAudio_Voice)},.2)},this)),this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None)},e.prototype.GameOverAnimation=function(t,e){return i(this,void 0,void 0,function(){var n,a,o,i;return r(this,function(r){switch(r.label){case 0:this.UIParam_Instance.back_Button.node.active=!1,this.isStartGame=!1,r.label=1;case 1:return l.EliminationDataManager.isEliminating?[4,m.default.WaitTime(cc.director.getDeltaTime())]:[3,3];case 2:return r.sent(),[3,1];case 3:return[4,m.default.WaitTime(.2)];case 4:for(r.sent(),l.EliminationDataManager.isEliminating=!0,this.UIParam_Instance.maskScript.SetMaskModel(y.GameEnum.BattleMaskType.None),this.cleanTipContent(),this.isRound=!1,n=0,a=l.EliminationDataManager.maxRow*l.EliminationDataManager.maxColumn-1;a>=0;a--)o=this.cellNodeDict[a],i=l.EliminationDataManager.maxColumn-Math.ceil((a+1)/l.EliminationDataManager.maxColumn),n!=i&&(n=i,this.UIParam_Instance.scheduleOnce(function(){b.AudioMgr.playSFX("sfx_battle_endani",b.AudioType.EAudio_Voice)},.1*n)),o&&o.getComponent("EliminationCell").setGameOverAnimation(t,.1*i);return this.UIParam_Instance.scheduleOnce(function(){e&&e()},2),[2]}})})},e.prototype.ShuffleAnimation=function(){return i(this,void 0,void 0,function(){var t,e,n,a;return r(this,function(){for(this.cleanTipContent(),t=0,e=l.EliminationDataManager.maxRow*l.EliminationDataManager.maxColumn-1;e>=0;e--)n=this.cellNodeDict[e],a=l.EliminationDataManager.maxColumn-Math.ceil((e+1)/l.EliminationDataManager.maxColumn),t!=a&&(t=a,this.UIParam_Instance.scheduleOnce(function(){b.AudioMgr.playSFX("sfx_battle_shuffle",b.AudioType.EAudio_Voice)},.1*t)),n&&(n.getComponent("EliminationCell").setShuffleAnimation(.1*a),this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.showShuffleEffect(n,.1*a));return this.UIParam_Instance.scheduleOnce(function(){l.EliminationDataManager.runLogin()},.1*t),[2]})})},e.prototype.PVPManyHeadMoveAnimation=function(){var t=new Array;this.manyScoreDic.forEach(function(e,n){var a={};a.uid=n,a.score=e,t.push(a)}),t.sort(function(t,e){return e.score-t.score});for(var e=function(){var e=t[a];if(n.headItemUIDDic.has(e.uid)){var o=n.headItemUIDDic.get(e.uid),i=n.headNodeDic.get(a+1);cc.tween(o.node).to(.5,{position:i}).call(function(){o.RefreshHeadAndScore(e.score,e.uid)}).start()}},n=this,a=0;a<t.length;a++)e();t.length=0},e.prototype.ScoreRefresh=function(){this.UIParam_Instance.my_Score_Lable.string=this.my_Score+"",this.UIParam_Instance.other_Score_Lable.string=this.other_Score+""},e.prototype.SkillRefresh=function(){var t=this;if(d.GameDataManager.gameMode==y.GameEnum.PVPType.Tournament){if(this.skillDic.has(d.GameDataManager.uid)){var e=this.skillDic.get(d.GameDataManager.uid);this.UIParam_Instance.many_SkillNum_Lable.string=e+"/"+this.my_SkillCount,this.UIParam_Instance.many_Skill_ProgressBar.progress=e/this.my_SkillCount;var n=this.skillmanyleft_animation.getAnimationState("battle_skillbutton_active_animation");e/this.my_SkillCount>=1?n.isPlaying||(this.skillmanyleft_animation.play("battle_skillbutton_active_animation"),this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.showSkillIconEffect(this.UIParam_Instance.many_skill_effectNode)):(n.isPlaying&&this.skillmanyleft_animation.stop("battle_skillbutton_active_animation"),this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.destroySkillIconEffect(this.UIParam_Instance.many_skill_effectNode))}}else this.skillDic.forEach(function(e,n){if(d.GameDataManager.uid==n){t.UIParam_Instance.my_SkillNum_Lable.string=e+"/"+t.my_SkillCount,t.UIParam_Instance.my_Skill_ProgressBar.progress=e/t.my_SkillCount;var a=t.skillleft_animation.getAnimationState("battle_skillbutton_active_animation");e/t.my_SkillCount>=1?a.isPlaying||(t.skillleft_animation.play("battle_skillbutton_active_animation"),t.UIParam_Instance.effectScript&&t.UIParam_Instance.effectScript.showSkillIconEffect(t.UIParam_Instance.my_skill_effectNode)):(a.isPlaying&&t.skillleft_animation.stop("battle_skillbutton_active_animation"),t.UIParam_Instance.effectScript&&t.UIParam_Instance.effectScript.destroySkillIconEffect(t.UIParam_Instance.my_skill_effectNode))}else t.UIParam_Instance.other_SkillNum_Lable.string=e+"/"+t.other_SkillCount,t.UIParam_Instance.other_Skill_ProgressBar.progress=e/t.other_SkillCount,a=t.skillright_animation.getAnimationState("battle_skillbutton_active_animation"),e/t.other_SkillCount>=1?a.isPlaying||(t.skillright_animation.play("battle_skillbutton_active_animation"),t.UIParam_Instance.effectScript&&t.UIParam_Instance.effectScript.showSkillIconEffect(t.UIParam_Instance.other_skill_effectNode,!1)):(a.isPlaying&&t.skillright_animation.stop("battle_skillbutton_active_animation"),t.UIParam_Instance.effectScript&&t.UIParam_Instance.effectScript.destroySkillIconEffect(t.UIParam_Instance.other_skill_effectNode))})},e.prototype.removeElimination=function(t,e){var n=e.getComponent(I.default);d.GameDataManager.gameMode!=y.GameEnum.PVPType.Tournament?(this.isOtherRound?this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.setTuoweiEffectScore(t,e,this.UIParam_Instance.other_Score_Lable.node.parent,this.ScoreRefresh.bind(this)):this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.setTuoweiEffectScore(t,e,this.UIParam_Instance.my_Score_Lable.node.parent,this.ScoreRefresh.bind(this)),this.isOtherRound?n.getCurrentType()==y.GameEnum.CellType.RED&&this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.setTuoweiEffectSKill(t,e,this.UIParam_Instance.other_Skill_Button.node,this.SkillRefresh.bind(this)):n.getCurrentType()==y.GameEnum.CellType.BLUE&&this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.setTuoweiEffectSKill(t,e,this.UIParam_Instance.my_Skill_Button.node,this.SkillRefresh.bind(this))):n.getCurrentType()==y.GameEnum.CellType.BLUE&&this.UIParam_Instance.effectScript&&this.UIParam_Instance.effectScript.setTuoweiEffectSKill(t,e,this.UIParam_Instance.many_Skill_Button.node,this.SkillRefresh.bind(this))},e.prototype.removeEliminationAll=function(){b.AudioMgr.playSFX("sfx_battle_pointfly",b.AudioType.EAudio_Voice)},e}(s.UIBaseController);n.UIBattleController=A,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/Net/Net":"Net","../../../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../../../Framework/Resources/LoaderManager":"LoaderManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/EliminationData":"EliminationData","../../../Data/GameData":"GameData","../../../Data/SkillData":"SkillData","../../../Data/TableData":"TableData","../../../Data/TimeData":"TimeData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../../Elimination/EliminationEffect":"EliminationEffect","../UIGameOverWindows/UIGameOverController":"UIGameOverController","../UIMainWindows/UIMainController":"UIMainController","../UIMatchWindows/UIMatchController":"UIMatchController","../UITipsWindows/UITipsController":"UITipsController","./EliminationCell":"EliminationCell","./UIHeadItem":"UIHeadItem"}],UIBattleMask:[function(t,e,n){"use strict";cc._RF.push(e,"d72b5ptomVGQLG2ZyWjAAYY","UIBattleMask");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Config/GameEnum"),s=t("../../../../Framework/Localization/LocalizationManager"),c=t("../../../../Framework/Utils/Utils"),l=t("../../../Data/GameData"),u=t("../../../../Framework/Utils/Tool"),p=t("../../../../Config/ResConfig"),h=t("../../../../Framework/Utils/Logger"),f=t("../../../../Framework/Audio/AudioManager"),m=cc._decorator,d=m.ccclass,_=m.property,g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEnable=function(){this.skillMask_Node.active=!1},e.prototype.onDisable=function(){this.skillMask_Node.active=!1},e.prototype.SetSkillMask=function(t){this.skillMask_Node.active=t},e.prototype.SetMaskModel=function(t,e,n,a){switch(void 0===e&&(e=0),void 0===n&&(n=0),void 0===a&&(a=""),t){case r.GameEnum.BattleMaskType.None:this.topMask_Node.active=!1,this.fullMask_Node.active=!1,this.roundMask_Node.active=!1;break;case r.GameEnum.BattleMaskType.ManyFullMask:this.topMask_Node.active=!1,this.fullMask_Node.active=!0,this.roundMask_Node.active=!1,this.manyfullLabel_Node.active=!0;break;case r.GameEnum.BattleMaskType.FullMask:this.topMask_Node.active=!1,this.fullMask_Node.active=!0,this.roundMask_Node.active=!1,this.manyfullLabel_Node.active=!1;break;case r.GameEnum.BattleMaskType.TopMask:this.topMask_Node.active=!0,this.fullMask_Node.active=!1,this.roundMask_Node.active=!1;break;case r.GameEnum.BattleMaskType.RoundFristMask:this.topMask_Node.active=!1,this.fullMask_Node.active=!1,this.roundMask_Node.active=!0,this.round_Move1_Sprite.node.active=!0,this.round_Move2_Sprite.node.active=!1,this.round_Lable.node.active=!0,this.animation.play("battle_roundmask_open_animation"),f.AudioMgr.playSFX("sfx_battle_switchturn",f.AudioType.EAudio_Voice),this.round_Lable.string=c.stringFormat(s.LocalizationManagerInstancec.Get(144),n),this.setCampColor(a);break;case r.GameEnum.BattleMaskType.RoundMask:this.topMask_Node.active=!1,this.fullMask_Node.active=!1,this.roundMask_Node.active=!0,this.round_Move1_Sprite.node.active=!1,this.round_Move2_Sprite.node.active=!0,this.round_Lable.node.active=!1,f.AudioMgr.playSFX("sfx_battle_switchturn",f.AudioType.EAudio_Voice),this.animation.play("battle_roundmask_open_animation"),this.setCampColor(a)}},e.prototype.playAnimation=function(){this.animation.play("battle_roundmask_close_animation")},e.prototype.setCampColor=function(t){h.Logger.logModel(t,"\u8bbe\u7f6e\u989c\u8272"),t==l.GameDataManager.uid?(u.default.setSprite(this.round_Move2_Sprite,p.ResConfig.UI_TEXTURE.UI_ROUND_BLUE),u.default.setSprite(this.round_Move1_Sprite,p.ResConfig.UI_TEXTURE.UI_ROUND_BLUE)):(u.default.setSprite(this.round_Move2_Sprite,p.ResConfig.UI_TEXTURE.UI_ROUND_RED),u.default.setSprite(this.round_Move1_Sprite,p.ResConfig.UI_TEXTURE.UI_ROUND_RED))},i([_(cc.Node)],e.prototype,"skillMask_Node",void 0),i([_(cc.Node)],e.prototype,"fullMask_Node",void 0),i([_(cc.Node)],e.prototype,"manyfullLabel_Node",void 0),i([_(cc.Node),_(cc.Node)],e.prototype,"topMask_Node",void 0),i([_(cc.Node)],e.prototype,"roundMask_Node",void 0),i([_(cc.Label)],e.prototype,"round_Lable",void 0),i([_(cc.Sprite)],e.prototype,"round_Move1_Sprite",void 0),i([_(cc.Sprite)],e.prototype,"round_Move2_Sprite",void 0),i([_(cc.Animation)],e.prototype,"animation",void 0),i([d],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../Framework/Utils/Utils":"Utils","../../../Data/GameData":"GameData"}],UIConfigEnum:[function(t,e,n){"use strict";cc._RF.push(e,"1b2f7Zx49pJtbTcq4i7uewU","UIConfigEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.UIConfigEnum=void 0,function(t){(function(t){t.SceneLayer="SceneLayerValue",t.BackgroudLayer="BackgroudLayerValue",t.NormalLayer="NormalLayerValue",t.InfoLayer="InfoLayerValue",t.TipLayer="TipLayerValue",t.GuideLayer="GuideLayerValue",t.TopLayer="TopLayerValue"})(t.UILayer||(t.UILayer={}))}(n.UIConfigEnum||(n.UIConfigEnum={})),cc._RF.pop()},{}],UIFinder_Base:[function(t,e,n){"use strict";cc._RF.push(e,"ce161LEnuZIJ5eO1HpJzVsR","UIFinder_Base");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgnode=null,e}return o(e,t),i([c(cc.Node)],e.prototype,"bgnode",void 0),i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],UIFinder_UIBattleWindows:[function(t,e,n){"use strict";cc._RF.push(e,"6d555BqZbNCPqB98gjLE95t","UIFinder_UIBattleWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=t("../../../../Framework/Utils/Tool"),c=t("./UIBattleMask"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.eliminationContent=s.default.findChildByPath(this.node,"Center/Elimination"),this.eliminationLayout=this.eliminationContent.getComponent(cc.Layout),this.forbidContent=s.default.findChildByPath(this.node,"Center/ForbidContent"),this.effect_biankuang=s.default.findChildByPath(this.node,"Center/ForbidContent/effect_biankuang"),this.effect_biankuang.active=!1},i([p(cc.Node)],e.prototype,"skill_Animation_Node",void 0),i([p(c.default)],e.prototype,"maskScript",void 0),i([p(cc.Node)],e.prototype,"manyPvpTop",void 0),i([p(cc.Node)],e.prototype,"pvpTop",void 0),i([p(cc.Node)],e.prototype,"manyPvpBottom",void 0),i([p(cc.Node)],e.prototype,"pvpBottom",void 0),i([p(cc.Button)],e.prototype,"close_Button",void 0),i([p(cc.Node)],e.prototype,"pvp_Round",void 0),i([p(cc.Prefab)],e.prototype,"cellPrefab",void 0),i([p(cc.Prefab)],e.prototype,"forbidPrefab",void 0),i([p(cc.Node)],e.prototype,"my_skill_effectNode",void 0),i([p(cc.Node)],e.prototype,"other_skill_effectNode",void 0),i([p(cc.Node)],e.prototype,"many_skill_effectNode",void 0),i([p(cc.Button)],e.prototype,"back_Button",void 0),i([p(cc.Button)],e.prototype,"my_Shuffle_Button",void 0),i([p(cc.Button)],e.prototype,"my_Hammer_Button",void 0),i([p(cc.Button)],e.prototype,"other_Shuffle_Button",void 0),i([p(cc.Button)],e.prototype,"other_Hammer_Button",void 0),i([p(cc.Sprite)],e.prototype,"my_Head_Sprite",void 0),i([p(cc.Label)],e.prototype,"my_Name_Lable",void 0),i([p(cc.Label)],e.prototype,"my_Score_Lable",void 0),i([p(cc.Label)],e.prototype,"my_SkillNum_Lable",void 0),i([p(cc.Sprite)],e.prototype,"my_Skill_Sprite",void 0),i([p(cc.Sprite)],e.prototype,"my_Elimination_Sprite",void 0),i([p(cc.ProgressBar)],e.prototype,"my_Skill_ProgressBar",void 0),i([p(cc.Button)],e.prototype,"my_Skill_Button",void 0),i([p(cc.Node)],e.prototype,"my_Move_Node",void 0),i([p(cc.Sprite)],e.prototype,"other_Head_Sprite",void 0),i([p(cc.Label)],e.prototype,"other_Name_Lable",void 0),i([p(cc.Label)],e.prototype,"other_Score_Lable",void 0),i([p(cc.Label)],e.prototype,"other_SkillNum_Lable",void 0),i([p(cc.Sprite)],e.prototype,"other_Skill_Sprite",void 0),i([p(cc.Sprite)],e.prototype,"other_Elimination_Sprite",void 0),i([p(cc.ProgressBar)],e.prototype,"other_Skill_ProgressBar",void 0),i([p(cc.Button)],e.prototype,"other_Skill_Button",void 0),i([p(cc.Node)],e.prototype,"other_Move_Node",void 0),i([p(cc.ProgressBar)],e.prototype,"time_Round_ProgressBar",void 0),i([p(cc.Sprite)],e.prototype,"time_Bar_Sprite",void 0),i([p(cc.Label)],e.prototype,"time_Round_Lable",void 0),i([p(cc.Node)],e.prototype,"eliminationContent",void 0),i([p(cc.Layout)],e.prototype,"eliminationLayout",void 0),i([p(cc.Node)],e.prototype,"forbidContent",void 0),i([p(cc.Node)],e.prototype,"effect_biankuang",void 0),i([p(cc.Node)],e.prototype,"many_Head_Node",void 0),i([p(cc.Node)],e.prototype,"many_Move_Node",void 0),i([p(cc.Node)],e.prototype,"many_Round_Node",void 0),i([p(cc.Button)],e.prototype,"many_Shuffle_Button",void 0),i([p(cc.Button)],e.prototype,"many_Hammer_Button",void 0),i([p(cc.Label)],e.prototype,"many_SkillNum_Lable",void 0),i([p(cc.Sprite)],e.prototype,"many_Skill_Sprite",void 0),i([p(cc.ProgressBar)],e.prototype,"many_Skill_ProgressBar",void 0),i([p(cc.Button)],e.prototype,"many_Skill_Button",void 0),i([p(cc.ProgressBar)],e.prototype,"many_time_Round_ProgressBar",void 0),i([p(cc.Sprite)],e.prototype,"many_time_Bar_Sprite",void 0),i([p(cc.Label)],e.prototype,"many_time_Round_Lable",void 0),i([p(cc.Node)],e.prototype,"many_HeadTempNode",void 0),i([u],e)}(r.default);n.default=h,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base","../../../../Framework/Utils/Tool":"Tool","./UIBattleMask":"UIBattleMask"}],UIFinder_UIGameOverWindows:[function(t,e,n){"use strict";cc._RF.push(e,"38362cZxjpNZqJiEcannwBU","UIFinder_UIGameOverWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"back_Button",void 0),i([l(cc.Node)],e.prototype,"star_Node",void 0),i([l(cc.Sprite)],e.prototype,"winTips_Sprite",void 0),i([l(cc.Node)],e.prototype,"reward_Node",void 0),i([l(cc.Node)],e.prototype,"skill_Node",void 0),i([l(cc.Label)],e.prototype,"my_Name_Lable",void 0),i([l(cc.Label)],e.prototype,"my_Score_Lable",void 0),i([l(cc.Sprite)],e.prototype,"my_Head_Sprite",void 0),i([l(cc.Label)],e.prototype,"reward_trophy_Lable",void 0),i([l(cc.Label)],e.prototype,"reward_gold_Lable",void 0),i([l(cc.Sprite)],e.prototype,"skill_Sprite",void 0),i([l(cc.Label)],e.prototype,"other_Name_Lable",void 0),i([l(cc.Label)],e.prototype,"other_Score_Lable",void 0),i([l(cc.Sprite)],e.prototype,"other_Head_Sprite",void 0),i([l(cc.Node)],e.prototype,"pvp_Top_Node",void 0),i([l(cc.Node)],e.prototype,"many_Top_Node",void 0),i([l(cc.Node)],e.prototype,"pvp_Center_Node",void 0),i([l(cc.Node)],e.prototype,"many_Center_Node",void 0),i([l(cc.Sprite)],e.prototype,"many_WinTips_Sprite",void 0),i([l(cc.Label)],e.prototype,"my_ManyName_Lable",void 0),i([l(cc.Sprite)],e.prototype,"my_ManyHead_Sprite",void 0),i([l(cc.Node)],e.prototype,"my_ManyHead_Win_Node",void 0),i([l(cc.Node)],e.prototype,"my_ManyHead_Fail_Node",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIHelpWindows:[function(t,e,n){"use strict";cc._RF.push(e,"e2c469eB0JAEbcSm8mxuHne","UIFinder_UIHelpWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this;this.pageView.node.on(cc.Node.EventType.TOUCH_START,function(){return t.pageView.node.pauseSystemEvents(!0)})},i([l(cc.Button)],e.prototype,"close_Button",void 0),i([l(cc.PageView)],e.prototype,"pageView",void 0),i([l(cc.Button)],e.prototype,"left_Button",void 0),i([l(cc.Button)],e.prototype,"right_Button",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UILoadWindows:[function(t,e,n){"use strict";cc._RF.push(e,"6e166pxQfxF0Iy250+7fC2C","UIFinder_UILoadWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.ProgressBar)],e.prototype,"progressBar",void 0),i([l(cc.Label)],e.prototype,"bar_Lable",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIMainWindows:[function(t,e,n){"use strict";cc._RF.push(e,"421feYX7Q1DybO0O7m+v+It","UIFinder_UIMainWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Node)],e.prototype,"head_Icon",void 0),i([l(cc.Label)],e.prototype,"trophy_Lable",void 0),i([l(cc.Label)],e.prototype,"gold_Lable",void 0),i([l(cc.Button)],e.prototype,"set_Button",void 0),i([l(cc.Button)],e.prototype,"pk_Button",void 0),i([l(cc.Button)],e.prototype,"tournament_Button",void 0),i([l(cc.Button)],e.prototype,"private_Button",void 0),i([l(cc.Button)],e.prototype,"rank_Button",void 0),i([l(cc.Button)],e.prototype,"store_Button",void 0),i([l(cc.Label)],e.prototype,"task_Lable",void 0),i([l(cc.ProgressBar)],e.prototype,"task_Progress",void 0),i([l(cc.Sprite)],e.prototype,"task_Sprite",void 0),i([l(cc.Sprite)],e.prototype,"task_Reward_Sprite",void 0),i([l(cc.Label)],e.prototype,"task_Count",void 0),i([l(cc.Button)],e.prototype,"task_Reward_Button",void 0),i([l(cc.Node)],e.prototype,"task_Reward_TostNode",void 0),i([l(cc.Node)],e.prototype,"task_Reward_Node",void 0),i([l(cc.Node)],e.prototype,"task_Reward_ChildNode",void 0),i([l(cc.Animation)],e.prototype,"task_Animation",void 0),i([l(cc.Button)],e.prototype,"help_Button",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIMatchWindows:[function(t,e,n){"use strict";cc._RF.push(e,"4aadboy/EBGWpLnKidwsjOy","UIFinder_UIMatchWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"back_Button",void 0),i([l(cc.Label)],e.prototype,"tips_Lable",void 0),i([l(cc.Label)],e.prototype,"search_Lable",void 0),i([l(cc.Label)],e.prototype,"search_Many_Lable",void 0),i([l(cc.Node)],e.prototype,"single_Node",void 0),i([l(cc.Node)],e.prototype,"many_Node",void 0),i([l(cc.Node)],e.prototype,"manyPvpCenter",void 0),i([l(cc.Node)],e.prototype,"pvpCenter",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIRankListWindows:[function(t,e,n){"use strict";cc._RF.push(e,"2786a7yeqxF34JmjwLAxDmF","UIFinder_UIRankListWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"close_Button",void 0),i([l(cc.Node)],e.prototype,"rank_Node",void 0),i([l(cc.Label)],e.prototype,"sort_Lable",void 0),i([l(cc.Label)],e.prototype,"name_Lable",void 0),i([l(cc.Label)],e.prototype,"cup_Lable",void 0),i([l(cc.Node)],e.prototype,"headRank_Node",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UISettingWindows:[function(t,e,n){"use strict";cc._RF.push(e,"fcc2dBal5BMKZ5zycaZsa7X","UIFinder_UISettingWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"close_Button",void 0),i([l(cc.Button)],e.prototype,"exit_Button",void 0),i([l(cc.Toggle)],e.prototype,"bgMusic_Toggle",void 0),i([l(cc.Toggle)],e.prototype,"music_Toggle",void 0),i([l(cc.Sprite)],e.prototype,"bgMusic_Top_Sprite",void 0),i([l(cc.Sprite)],e.prototype,"bgMusic_Bottom_Sprite",void 0),i([l(cc.Sprite)],e.prototype,"music_Top_Sprite",void 0),i([l(cc.Sprite)],e.prototype,"music_Bottom_Sprite",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UISkillWindows:[function(t,e,n){"use strict";cc._RF.push(e,"766a8tFGPlIYYS1qNBgkEeZ","UIFinder_UISkillWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"back_Button",void 0),i([l(cc.Label)],e.prototype,"gold_Lable",void 0),i([l(cc.Label)],e.prototype,"pvpType_Lable",void 0),i([l(cc.Node)],e.prototype,"skill_Node",void 0),i([l(cc.Node)],e.prototype,"tips_Panel",void 0),i([l(cc.Button)],e.prototype,"close_Button",void 0),i([l(cc.Label)],e.prototype,"buy_Skill_Coin",void 0),i([l(cc.Sprite)],e.prototype,"skill_Sprite",void 0),i([l(cc.Button)],e.prototype,"skill_Buy_Button",void 0),i([l(cc.Label)],e.prototype,"skill_Buy_Lable",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIStoreWindows:[function(t,e,n){"use strict";cc._RF.push(e,"0c730WIWNlBF77Fe7TRa6yB","UIFinder_UIStoreWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Button)],e.prototype,"close_Button",void 0),i([l(cc.Label)],e.prototype,"diamond_Lable",void 0),i([l(cc.Node)],e.prototype,"store_Node",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UITestWindows:[function(t,e,n){"use strict";cc._RF.push(e,"c0d52tDVmhF6L/Dl9OJZ8hL","UIFinder_UITestWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UIFinder_UITestWindows=void 0;var r=t("./UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TestSprite=null,e.TestButton=null,e.TestContext=null,e}return o(e,t),i([l(cc.Sprite)],e.prototype,"TestSprite",void 0),i([l(cc.Button)],e.prototype,"TestButton",void 0),i([l(cc.Label)],e.prototype,"TestContext",void 0),i([c],e)}(r.default);n.UIFinder_UITestWindows=u,cc._RF.pop()},{"./UIFinder_Base":"UIFinder_Base"}],UIFinder_UITipsWindows:[function(t,e,n){"use strict";cc._RF.push(e,"c9834td86RDzIQvkdFpX7e9","UIFinder_UITipsWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Node)],e.prototype,"mask_Node",void 0),i([l(cc.Button)],e.prototype,"cancelButton",void 0),i([l(cc.Button)],e.prototype,"exitButton",void 0),i([l(cc.Button)],e.prototype,"sureButton",void 0),i([l(cc.Button)],e.prototype,"sureCenterButton",void 0),i([l(cc.Label)],e.prototype,"msg_Lable",void 0),i([l(cc.Node)],e.prototype,"center_Node",void 0),i([l(cc.Node)],e.prototype,"tip_Node",void 0),i([l(cc.Prefab)],e.prototype,"toastNode",void 0),i([l(cc.Node)],e.prototype,"load_Node",void 0),i([l(cc.Prefab)],e.prototype,"load_Prefab",void 0),i([c],e)}(r.default);n.default=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIFinder_UIWaitWindows:[function(t,e,n){"use strict";cc._RF.push(e,"8885eTBcMxMYZONcKD18ez8","UIFinder_UIWaitWindows");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UIFinder_UIWaitWindows=void 0;var r=t("../../../../Framework/UI/UIFinder/UIFinder_Base"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),i([l(cc.Node)],e.prototype,"loadNode",void 0),i([c],e)}(r.default);n.UIFinder_UIWaitWindows=u,cc._RF.pop()},{"../../../../Framework/UI/UIFinder/UIFinder_Base":"UIFinder_Base"}],UIGameOverController:[function(t,e,n){"use strict";cc._RF.push(e,"9aeaeVfq6dOVYHeEDvWf7MF","UIGameOverController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=t("../../../../Framework/UI/UIManager"),c=t("../UIMainWindows/UIMainController"),l=t("../../../Data/GameData"),u=t("../../../../Config/GameEnum"),p=t("../../../../Framework/Utils/Tool"),h=t("../../../../Config/ResConfig"),f=t("../../../Data/SkillData"),m=t("./UIHeadRankItem"),d=t("../../../../Framework/Utils/Logger"),_=t("../../../../Framework/Audio/AudioManager"),g=t("../../../SDK/SDKManager"),I=t("../../../SDK/GameSDKEnum"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.rankingDic=new Map,e.rankItemList=new Map,e.index=1,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIGameOverController"},e.prototype.GetUIResourcePath=function(){return"UI/View/UIGameOverWindows"},e.prototype.OnCreateModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),this.InitLoad()},e.prototype.InitLoad=function(){this.rankItemList.clear();for(var t=this.UIParam_Instance.my_ManyHead_Win_Node.childrenCount,e=0;e<t;e++){var n=this.UIParam_Instance.my_ManyHead_Win_Node.children[e].getComponent(m.default);this.rankItemList.set(e+1,n)}},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.InitGameOver.apply(this,e),g.SDKInstance.GameDataPoint(I.GameSDKEnum.PointType.Page_Open,g.SDKInstance.Page_PointData("UIGameOver",l.GameDataManager.gameMode))},e.prototype.OnAddListener=function(){this.UIParam_Instance.back_Button.node.on("click",this.OnClickBack,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.back_Button.node.off("click",this.OnClickBack,this)},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.OnClickBack=function(){l.GameDataManager.lastRoomId="",_.AudioMgr.playSFX("ui_common_click",_.AudioType.EAudio_UI),s.UIManagerInstance.CloseWindow(e),s.UIManagerInstance.OpenWindows(c.UIMainController),g.SDKInstance.GameDataPoint(I.GameSDKEnum.PointType.Click_Result_Back,g.SDKInstance.Click_PointData(l.GameDataManager.gameMode))},e.prototype.InitGameOver=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d.Logger.logModel(t,"\u6e38\u620f\u7ed3\u675f\u53cd\u9988\u6570\u636e"),this.gameOverModel=t[0];var n=t[1],a=t[2],o=t[3],i=t[4],r=t[5];this.gameOverModel==u.GameEnum.GameOverType.Active?this.OnActiveExit(n,a,o,i):this.OnPassiveExit(r,o)},e.prototype.OnActiveExit=function(t,e,n,a){l.GameDataManager.gameMode==u.GameEnum.PVPType.Tournament?this.OnManyPVPFail(a):this.OnPVPFail(t,e,n,a)},e.prototype.OnPassiveExit=function(t,e){this.rankingDic.clear(),t.ranking.sort(function(t,e){return e.score-t.score});for(var n=0;n<t.ranking.length;n++){var a=t.ranking[n];this.rankingDic.set(a.userId,a)}if(this.rankingList=t.ranking,d.Logger.logModel(this.rankingDic,"\u7ed3\u7b97\u6570\u636e"),this.rankingDic.has(l.GameDataManager.uid))if(a=this.rankingDic.get(l.GameDataManager.uid),l.GameDataManager.gameMode==u.GameEnum.PVPType.Tournament)a.isWinner?this.OnManyPVPWin(a.rewardCoin,a.rewardTrophy):this.OnManyPVPFail(a.costSkillId);else{var o=0;this.rankingDic.has(e)&&(o=this.rankingDic.get(e).score),a.isWinner?this.OnPVPWin(a.score,o,e,a.rewardCoin,a.rewardTrophy):this.OnPVPFail(a.score,o,e,a.costSkillId)}},e.prototype.OnManyPVPWin=function(t,e){var n=this;this.SetGameModel(!1,!0),p.default.setSprite(this.UIParam_Instance.many_WinTips_Sprite,h.ResConfig.UI_TEXTURE.UI_MANY_WIN),this.rankItemList.forEach(function(t,e){var a=n.rankingList[e-1];t.RefreshAnimationData(a.userId,e)}),this.UIParam_Instance.reward_gold_Lable.string=t+"",this.UIParam_Instance.reward_trophy_Lable.string=e+""},e.prototype.OnManyPVPFail=function(t){this.SetGameModel(!1,!1),p.default.setSprite(this.UIParam_Instance.many_WinTips_Sprite,h.ResConfig.UI_TEXTURE.UI_MANY_FAIL),p.default.setSprite(this.UIParam_Instance.skill_Sprite,f.SkillDataManager.getSkillTexture(t)),this.UIParam_Instance.my_ManyName_Lable.string=l.GameDataManager.playerName},e.prototype.OnPVPWin=function(t,e,n,a,o){this.SetGameModel(!0,!0),p.default.setSprite(this.UIParam_Instance.winTips_Sprite,h.ResConfig.UI_TEXTURE.UI_WIN),this.RefreshStarCount(t,e),this.UIParam_Instance.my_Name_Lable.string=l.GameDataManager.playerName,this.UIParam_Instance.my_Score_Lable.string=t+"",this.UIParam_Instance.other_Name_Lable.string=l.GameDataManager.getUserName(n),this.UIParam_Instance.other_Score_Lable.string=e+"",this.UIParam_Instance.reward_gold_Lable.string=a+"",this.UIParam_Instance.reward_trophy_Lable.string=o+"",_.AudioMgr.playSFX("sfx_battle_pointfly",_.AudioType.EAudio_Voice)},e.prototype.OnPVPFail=function(t,e,n,a){this.SetGameModel(!0,!1),p.default.setSprite(this.UIParam_Instance.winTips_Sprite,h.ResConfig.UI_TEXTURE.UI_FAIL),this.gameOverModel==u.GameEnum.GameOverType.Active?this.FailStarCount():this.RefreshStarCount(t,e),this.UIParam_Instance.my_Name_Lable.string=l.GameDataManager.playerName,this.UIParam_Instance.my_Score_Lable.string=t+"",this.UIParam_Instance.other_Name_Lable.string=l.GameDataManager.getUserName(n),this.UIParam_Instance.other_Score_Lable.string=e+"",p.default.setSprite(this.UIParam_Instance.skill_Sprite,f.SkillDataManager.getSkillTexture(a))},e.prototype.RefreshStarCount=function(t,e){var n=this;this.index=1;var a=Math.abs(t-e),o=Math.floor(.05*e);o>10&&(o=10);var i=Math.floor(a/o);t<e&&(i=3-i);for(var r=function(){var t=s.UIParam_Instance.star_Node.children[c],e=t.getChildByName("star"),a=t.getComponent(cc.Animation);e.active=!1,c<i&&a.scheduleOnce(function(){e.setScale(0),e.active=!0,a.play("star_animation"),_.AudioMgr.playSFX("sfx_result_star0"+n.index,_.AudioType.EAudio_Voice),n.index=n.index+1},.33*c)},s=this,c=0;c<this.UIParam_Instance.star_Node.childrenCount;c++)r()},e.prototype.FailStarCount=function(){for(var t=0;t<this.UIParam_Instance.star_Node.childrenCount;t++)this.UIParam_Instance.star_Node.children[t].getChildByName("star").active=!1},e.prototype.SetGameModel=function(t,e){this.UIParam_Instance.pvp_Center_Node.active=t,this.UIParam_Instance.pvp_Top_Node.active=t,this.UIParam_Instance.winTips_Sprite.node.active=t,this.UIParam_Instance.many_Top_Node.active=!t,this.UIParam_Instance.many_Center_Node.active=!t,this.UIParam_Instance.many_WinTips_Sprite.node.active=!t,this.UIParam_Instance.reward_Node.active=e,this.UIParam_Instance.skill_Node.active=!e,this.UIParam_Instance.my_ManyHead_Fail_Node.active=!e,this.UIParam_Instance.my_ManyHead_Win_Node.active=e},e}(i.UIBaseController);n.default=y,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../Data/GameData":"GameData","../../../Data/SkillData":"SkillData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIMainWindows/UIMainController":"UIMainController","./UIHeadRankItem":"UIHeadRankItem"}],UIHeadItem:[function(t,e,n){"use strict";cc._RF.push(e,"987e8UdUy9BB4pUy2UaIROU","UIHeadItem");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Config/ResConfig"),s=t("../../../../Framework/Utils/Tool"),c=t("../../../Data/GameData"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.name_Lable=s.default.findChildByPath(this.node,"lbl_Name","cc.Label"),this.head_Sprite=s.default.findChildByPath(this.node,"img_headmask/img_head","cc.Sprite"),this.score_Lable=s.default.findChildByPath(this.node,"Score/Num","cc.Label"),this.head_Line_Sprite=s.default.findChildByPath(this.node,"Icon","cc.Sprite"),this.score_up_Lable=s.default.findChildByPath(this.node,"lbl_Score","cc.Label"),this.position=this.score_up_Lable.node.position,this.name_Lable.string="",this.score_Lable.string="0",this.score_up_Lable.node.active=!1},e.prototype.RefreshHead=function(t){this.data=t,this.name_Lable&&(this.name_Lable.string=t.nickName,s.default.setSprite(this.head_Line_Sprite,r.ResConfig.UI_TEXTURE.UI_HEAD_RED_LINE)),this.uid=this.data.userId,this.score_Lable.string="0"},e.prototype.RefreshHeadAndScore=function(t,e){this.OnShowToast(t),this.score_Lable.string=t+"",this.name_Lable.string=c.GameDataManager.getUserName(e),this.uid=e,this.uid==c.GameDataManager.uid?s.default.setSprite(this.head_Line_Sprite,r.ResConfig.UI_TEXTURE.UI_HEAD_BULE_LINE):s.default.setSprite(this.head_Line_Sprite,r.ResConfig.UI_TEXTURE.UI_HEAD_RED_LINE)},e.prototype.RefeshMyHead=function(){this.name_Lable&&(this.name_Lable.string=c.GameDataManager.playerName,s.default.setSprite(this.head_Line_Sprite,r.ResConfig.UI_TEXTURE.UI_HEAD_BULE_LINE)),this.uid=c.GameDataManager.uid},e.prototype.RefreshScore=function(t,e){null!=t&&null!=t[this.uid]&&(this.OnShowToast(t[this.uid]),this.score_Lable.string=t[this.uid]+"",e.set(this.uid,t[this.uid]))},e.prototype.OnShowToast=function(t){var e=this,n=t-Number(this.score_Lable.string);n>0&&(this.score_up_Lable.node.active=!0,this.score_up_Lable.string="+"+n,cc.tween(this.score_up_Lable.node).to(.5,{position:new cc.Vec3(0,40,0),scale:2}).call(function(){e.score_up_Lable.node.setScale(1),e.score_up_Lable.node.position=e.position,e.score_up_Lable.node.active=!1}).start())},i([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../../Config/ResConfig":"ResConfig","../../../../Framework/Utils/Tool":"Tool","../../../Data/GameData":"GameData"}],UIHeadRankItem:[function(t,e,n){"use strict";cc._RF.push(e,"f5d29RdBDBLt4CaWn7pXZ7G","UIHeadRankItem");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Data/GameData"),s=t("../../../../Framework/Utils/Tool"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.name_Lable=s.default.findChildByPath(this.node,"Name","cc.Label"),this.head_Sprite=s.default.findChildByPath(this.node,"Bg/Icon","cc.Sprite")},e.prototype.RefreshAnimationData=function(t,e){var n=this;this.animation=this.node.getComponent(cc.Animation),this.node.active=!1,this.scheduleOnce(function(){n.name_Lable&&(n.name_Lable.string=r.GameDataManager.getUserName(t)),n.animation.play("leaderboard_animation"),n.node.active=!0},.5*e)},e.prototype.RefreshData=function(t){this.name_Lable&&(this.name_Lable.string=t)},e.prototype.RefreshMyInfo=function(){this.name_Lable&&(this.name_Lable.string=r.GameDataManager.playerName)},e.prototype.Reset=function(){this.name_Lable.string=""},i([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../../../Framework/Utils/Tool":"Tool","../../../Data/GameData":"GameData"}],UIHelpController:[function(t,e,n){"use strict";cc._RF.push(e,"7b35fHoF19DQ7DSUUEj3m+x","UIHelpController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UIHelpController=void 0;var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=t("../../../../Framework/UI/UIManager"),c=t("../../../../Framework/Audio/AudioManager"),l=t("../../../SDK/SDKManager"),u=t("../../../SDK/GameSDKEnum"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIHelpController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this)},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.OnInitShow(),l.SDKInstance.GameDataPoint(u.GameSDKEnum.PointType.Page_Open,l.SDKInstance.Page_PointData("UIHelp"))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.GuideLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UIHelpWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.UIParam_Instance.close_Button.node.on("click",this.OnClickClose,this),this.UIParam_Instance.left_Button.node.on("click",this.OnClickLeft,this),this.UIParam_Instance.right_Button.node.on("click",this.OnClickRight,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.close_Button.node.off("click",this.OnClickClose,this),this.UIParam_Instance.left_Button.node.off("click",this.OnClickLeft,this),this.UIParam_Instance.right_Button.node.off("click",this.OnClickRight,this)},e.prototype.OnClickClose=function(){c.AudioMgr.playSFX("ui_common_click",c.AudioType.EAudio_UI),s.UIManagerInstance.CloseWindow(e)},e.prototype.OnInitShow=function(){this.index=0,this.UIParam_Instance.pageView.setCurrentPageIndex(this.index),this.ShowLeftAndRight()},e.prototype.OnClickLeft=function(){this.index=this.index-1,this.index<=0&&(this.index=0),this.UIParam_Instance.pageView.setCurrentPageIndex(this.index),this.ShowLeftAndRight()},e.prototype.OnClickRight=function(){this.index=this.index+1,this.index>=4&&(this.index=4),this.UIParam_Instance.pageView.setCurrentPageIndex(this.index),this.ShowLeftAndRight()},e.prototype.ShowLeftAndRight=function(){this.index<=0?(this.UIParam_Instance.left_Button.node.active=!1,this.UIParam_Instance.right_Button.node.active=!0):this.index>=4?(this.UIParam_Instance.left_Button.node.active=!0,this.UIParam_Instance.right_Button.node.active=!1):(this.UIParam_Instance.left_Button.node.active=!0,this.UIParam_Instance.right_Button.node.active=!0)},e.prototype.OnDisable=function(){t.prototype.OnDisable.call(this),this.OnInitShow()},e.prototype.OnDestroy=function(){},e}(i.UIBaseController);n.UIHelpController=p,cc._RF.pop()},{"../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager"}],UILoadController:[function(t,e,n){"use strict";cc._RF.push(e,"098b4JNQB1FB5XjO18DXmpc","UILoadController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressValue=0,e.UIParam_Instance=null,e.isStratLoading=!1,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UILoadController"},e.prototype.GetUIResourcePath=function(){return"UI/View/UILoadWindows"},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.InfoLayer},enumerable:!1,configurable:!0}),e.prototype.OnCreateModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.SetProgressBarValue(0)},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),this.RefreshProgressBar()},e.prototype.OnAddListener=function(){},e.prototype.OnRemoveListener=function(){},e.prototype.AddProgressBarValue=function(t){this.SetProgressBarValue(this.progressValue+t)},e.prototype.SetProgressBarValue=function(t){t<0&&(t=0),t>1&&(t=1),this.progressValue=t,this.RefreshProgressBar()},e.prototype.GetProgressBarValue=function(){return this.progressValue},e.prototype.RefreshProgressBar=function(){this.isViewInited&&(this.UIParam_Instance.progressBar.progress=this.progressValue,this.UIParam_Instance.bar_Lable.string=Math.floor(100*this.progressValue)+"%")},e}(i.UIBaseController);n.default=s,cc._RF.pop()},{"../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum"}],UILocalization:[function(t,e,n){"use strict";cc._RF.push(e,"06a0fcFiopJpp2YlGhT1RcN","UILocalization");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UILocalization=void 0;var r=t("./LocalizationManager"),s=t("../Utils/Tool"),c=t("../../Config/ResConfig"),l=cc._decorator,u=l.ccclass,p=l.property,h=l.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LocalizationKey=1,e.autoChangeLocalization=!1,e.contextLable=null,e}return o(e,t),e.prototype.onLoad=function(){this.contextLable=this.node.getComponent(cc.Label)},e.prototype.start=function(){null!=this.contextLable&&(null==this.contextLable.font&&s.default.setFont(this.contextLable,c.ResConfig.UI_FONT.FONT),this.contextLable.string=r.LocalizationManagerInstancec.Get(this.LocalizationKey),this.autoChangeLocalization&&r.LocalizationManagerInstancec.RegistAutoChangeLanguage(this.contextLable,this.LocalizationKey))},e.prototype.onDestroy=function(){null!=this.contextLable&&this.autoChangeLocalization&&r.LocalizationManagerInstancec.UnRegistAutoChangeLanguage(this.contextLable),this.LocalizationKey=null,this.contextLable=null},i([p(cc.Integer)],e.prototype,"LocalizationKey",void 0),i([p(cc.Boolean)],e.prototype,"autoChangeLocalization",void 0),i([u,h(cc.Label)],e)}(cc.Component);n.UILocalization=f,cc._RF.pop()},{"../../Config/ResConfig":"ResConfig","../Utils/Tool":"Tool","./LocalizationManager":"LocalizationManager"}],UIMainController:[function(t,e,n){"use strict";cc._RF.push(e,"e698eU59yFJaaDjwj52yNy2","UIMainController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UIMainController=void 0;var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=t("../../../../Framework/UI/UIManager"),c=t("../UISkillWindows/UISkillController"),l=t("../../../../Config/GameEnum"),u=t("../UISettingWindows/UISettingController"),p=t("../UIRankListWindows/UIRankListController"),h=t("../../../Data/GameData"),f=t("../../../Data/TableData"),m=t("../../../../Framework/Localization/LocalizationManager"),d=t("../../../../Framework/Net/Net"),_=t("../../../../NetWork/NetWorkMsgID"),g=t("../../../../Framework/Resources/LoaderManager"),I=t("../../../../Config/ResConfig"),y=t("../../../../Framework/Event/EventManager"),E=t("../../../../Framework/Event/EventMessages"),v=t("../../../../Framework/Net/NetListenerRegister"),M=t("../../../../Framework/Utils/Logger"),S=t("../../../Data/SkillData"),C=t("../../../../Framework/Utils/Utils"),P=t("../../../../Framework/Utils/Tool"),O=t("../UITipsWindows/UITipsController"),U=t("../../../../Framework/Audio/AudioManager"),T=t("../UIHelpWindows/UIHelpController"),b=t("../UIWaitWindows/UIWaitController"),D=t("../../../SDK/SDKManager"),R=t("../../../SDK/GameSDKEnum"),k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.isOpenReward=!1,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIMainController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this)},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.GetMyHeadIcon(),this.OnRefreshTrophyAndGold(),this.OnRefreshTask(),this.OnPopNetRoom(),this.OnPopHelp(),this.CheckNetState()},e.prototype.CheckNetState=function(){d.NetInstance.connected||h.GameDataManager.OnNetWorkConnectDisconnectEvent()},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.BackgroudLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UIMainWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.OnRefreshTrophyAndGold_handel=this.OnRefreshTrophyAndGold.bind(this),this.OnRefreshTask_handel=this.OnRefreshTask.bind(this),v.NetListenerRegisterInstance.RegistScListener(_.NetWorkMsgID.TASK_REWARD_RESPONSE,this.OnRespReceiveReward.bind(this)),y.EventManager.AddListener(E.EventMessages.COIN_DATA_REFRESH,this.OnRefreshTrophyAndGold_handel),y.EventManager.AddListener(E.EventMessages.TASK_REFRESH,this.OnRefreshTask_handel),this.UIParam_Instance.pk_Button.node.on("click",this.OnClick1V1Play,this),this.UIParam_Instance.tournament_Button.node.on("click",this.OnClickTournamentPlay,this),this.UIParam_Instance.private_Button.node.on("click",this.OnClickPrivatePlay,this),this.UIParam_Instance.set_Button.node.on("click",this.OnClickSetting,this),this.UIParam_Instance.rank_Button.node.on("click",this.OnClickRank,this),this.UIParam_Instance.store_Button.node.on("click",this.OnClickStore,this),this.UIParam_Instance.task_Reward_Button.node.on("click",this.OnClickReceiveReward,this),this.UIParam_Instance.help_Button.node.on("click",this.OnClickHelp,this),this.UIParam_Instance.bgnode.on(cc.Node.EventType.TOUCH_START,this.OnCloseReward,this)},e.prototype.OnRemoveListener=function(){y.EventManager.RemoveListener(E.EventMessages.COIN_DATA_REFRESH,this.OnRefreshTrophyAndGold_handel),y.EventManager.RemoveListener(E.EventMessages.TASK_REFRESH,this.OnRefreshTask_handel),this.UIParam_Instance.pk_Button.node.off("click",this.OnClick1V1Play,this),this.UIParam_Instance.tournament_Button.node.off("click",this.OnClickTournamentPlay,this),this.UIParam_Instance.private_Button.node.off("click",this.OnClickPrivatePlay,this),this.UIParam_Instance.set_Button.node.off("click",this.OnClickSetting,this),this.UIParam_Instance.rank_Button.node.off("click",this.OnClickRank,this),this.UIParam_Instance.store_Button.node.off("click",this.OnClickStore,this),this.UIParam_Instance.task_Reward_Button.node.off("click",this.OnClickReceiveReward,this),this.UIParam_Instance.help_Button.node.off("click",this.OnClickHelp,this),this.UIParam_Instance.bgnode.off(cc.Node.EventType.TOUCH_START,this.OnCloseReward,this)},e.prototype.OnCloseReward=function(){this.isOpenReward=!1,this.UIParam_Instance.task_Reward_Node.active=!1},e.prototype.OnClickHelp=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(T.UIHelpController),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Howtoplay,D.SDKInstance.Click_PointData("click_howtoplay"))},e.prototype.OnClickReceiveReward=function(){var t=this;if(U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Task,D.SDKInstance.Click_PointData(this.currentTaskData.Id)),this.currentTaskData.progress>=this.taskData.CompleteNum){console.log("\u5956\u52b1\u9886\u53d6");var e={};e.taskId=this.currentTaskData.Id,e.userId=h.GameDataManager.uid,d.NetInstance.sendMessage(_.NetWorkMsgID.TASK_REWARD_REQUEST,e),s.UIManagerInstance.OpenWindows(b.default),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Protocol_Req,D.SDKInstance.Protocol_PointData(_.NetWorkMsgID.TASK_REWARD_REQUEST,e))}else if(this.isOpenReward)this.isOpenReward=!1,this.UIParam_Instance.task_Reward_Node.active=!1;else{this.isOpenReward=!0,this.UIParam_Instance.task_Reward_Node.active=!0,this.UIParam_Instance.task_Reward_ChildNode.destroyAllChildren();var n=this.taskData.GoldReward;n&&g.LoaderMgr.loadPrefab(I.ResConfig.UI_ITEM.UI_REWARDITEM).then(function(e){if(null!=e){var a=cc.instantiate(e);a.setParent(t.UIParam_Instance.task_Reward_ChildNode),a.getChildByName("Num").getComponent(cc.Label).string=n+"";var o=a.getComponent(cc.Sprite);P.default.setSprite(o,f.TableDataManager.goldIconPath)}});var a=this.taskData.SkillRewardID;a&&g.LoaderMgr.loadPrefab(I.ResConfig.UI_ITEM.UI_REWARDITEM).then(function(e){if(null!=e){var n=cc.instantiate(e);n.setParent(t.UIParam_Instance.task_Reward_ChildNode),n.getChildByName("Num").getComponent(cc.Label).string=t.taskData.SkillRewardNum+"";var o=n.getComponent(cc.Sprite);P.default.setSprite(o,S.SkillDataManager.getSkillTexture(a))}})}},e.prototype.OnRespReceiveReward=function(t){M.Logger.logModel(t,"\u4efb\u52a1\u5956\u52b1\u63a5\u53d7"),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Protocol_Resp,D.SDKInstance.Protocol_PointData(_.NetWorkMsgID.TASK_REWARD_RESPONSE,t)),0==t.errorCode?(this.OnReceiveRewardShow(t.coin,t.skillCount),h.GameDataManager.goldNum=t.coin,S.SkillDataManager.ServerSetSkillData(t.skillCount),h.GameDataManager.setCurrentTaskInfoData(t.nextTask),this.OnRefreshTrophyAndGold(),this.OnRefreshTask()):1028==t.errorCode&&h.GameDataManager.OpenHeadTips(t.errorCode),s.UIManagerInstance.CloseWindow(b.default)},e.prototype.OnReceiveRewardShow=function(t,e){var n=this,a=0,o=t-h.GameDataManager.goldNum;o>0&&(a+=1,g.LoaderMgr.loadPrefab(I.ResConfig.UI_ITEM.UI_TASKREWARDITEM).then(function(t){if(null!=t){var e=cc.instantiate(t);e.setParent(n.UIParam_Instance.task_Reward_TostNode),e.position=new cc.Vec3(0,0,0);var i=e.getChildByName("RewardItem").getComponent(cc.Sprite);e.getChildByName("Num").getComponent(cc.Label).string="+"+o,P.default.setSprite(i,f.TableDataManager.goldIconPath),cc.tween(e).to(a,{position:new cc.Vec3(0,100,0)}).to(1,{opacity:0}).call(function(){e.destroy()}).start()}}));var i=function(){var t=Number(r),o=e[r]-S.SkillDataManager.getSkillCount(t);o>0&&(a+=1,g.LoaderMgr.loadPrefab(I.ResConfig.UI_ITEM.UI_TASKREWARDITEM).then(function(e){if(null!=e){var i=cc.instantiate(e);i.setParent(n.UIParam_Instance.task_Reward_TostNode),i.position=new cc.Vec3(0,0,0);var r=i.getChildByName("RewardItem").getComponent(cc.Sprite);i.getChildByName("Num").getComponent(cc.Label).string="+"+o,P.default.setSprite(r,S.SkillDataManager.getSkillTexture(t)),cc.tween(i).to(a,{position:new cc.Vec3(0,100,0)}).to(1,{opacity:0}).call(function(){i.destroy()}).start()}}))};for(var r in e)i()},e.prototype.OnClick1V1Play=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(c.UISkillController,l.GameEnum.PVPType.PVPOne),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_1v1,D.SDKInstance.Click_PointData(l.GameEnum.PVPType.PVPOne))},e.prototype.OnClickTournamentPlay=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(c.UISkillController,l.GameEnum.PVPType.Tournament),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Tournament,D.SDKInstance.Click_PointData(l.GameEnum.PVPType.Tournament))},e.prototype.OnClickPrivatePlay=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(O.UITipsController,l.GameEnum.TipType.Head,160),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Brawl,D.SDKInstance.Click_PointData(l.GameEnum.PVPType.Private))},e.prototype.OnClickSetting=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(u.UISettingController),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Setting,D.SDKInstance.Click_PointData("click_set"))},e.prototype.OnClickRank=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),h.GameDataManager.rankList.length>0?s.UIManagerInstance.OpenWindows(p.UIRankListController):h.GameDataManager.ResqRankList(),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Leaderboard,D.SDKInstance.Click_PointData("click_Leaderboard"))},e.prototype.OnClickStore=function(){U.AudioMgr.playSFX("ui_common_click",U.AudioType.EAudio_UI),h.GameDataManager.ResqStore(),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Click_Main_Store,D.SDKInstance.Click_PointData("click_store"))},e.prototype.OnPopNetRoom=function(){M.Logger.logModel("UIMainController..OnPopNetRoom lastRoomId = "+h.GameDataManager.lastRoomId),h.GameDataManager.lastRoomId&&s.UIManagerInstance.OpenWindows(O.UITipsController,l.GameEnum.TipType.Nomal,150,function(){var t={};t.roomId=h.GameDataManager.lastRoomId,t.userId=h.GameDataManager.uid,d.NetInstance.sendMessage(_.NetWorkMsgID.CALLBACK_ROOM_REQUEST,t),M.Logger.logModel(t,"\u91cd\u65b0\u8fdb\u623f\u95f4"),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Protocol_Req,D.SDKInstance.Protocol_PointData(_.NetWorkMsgID.CALLBACK_ROOM_REQUEST,t))},function(){var t={};t.userId=h.GameDataManager.uid,d.NetInstance.sendMessage(_.NetWorkMsgID.CALLBACK_ROOM_GIVEUP_REQUEST,t),D.SDKInstance.GameDataPoint(R.GameSDKEnum.PointType.Protocol_Req,D.SDKInstance.Protocol_PointData(_.NetWorkMsgID.CALLBACK_ROOM_GIVEUP_REQUEST,t))})},e.prototype.OnPopHelp=function(){h.GameDataManager.isFristEnterGame&&(this.OnClickHelp(),h.GameDataManager.isFristEnterGame=!1)},e.prototype.OnRefreshTrophyAndGold=function(){this.UIParam_Instance.gold_Lable.string=h.GameDataManager.goldNum+"",this.UIParam_Instance.trophy_Lable.string=h.GameDataManager.trophyNum+""},e.prototype.OnRefreshTask=function(){this.isOpenReward=!1,this.UIParam_Instance.task_Reward_Node.active=!1,this.currentTaskData=h.GameDataManager.currentTaskInfo,this.taskData=f.TableDataManager.GetCurrentTask(this.currentTaskData.Id),this.UIParam_Instance.task_Lable.string=C.stringFormat(m.LocalizationManagerInstancec.Get(this.taskData.Desc),this.taskData.CompleteNum),this.UIParam_Instance.task_Count.string=this.currentTaskData.progress+"/"+this.taskData.CompleteNum,P.default.setSprite(this.UIParam_Instance.task_Reward_Sprite,this.taskData.RewardIcon),P.default.setSprite(this.UIParam_Instance.task_Sprite,this.taskData.Icon),this.UIParam_Instance.task_Progress.progress=this.currentTaskData.progress/this.taskData.CompleteNum,this.UIParam_Instance.task_Progress.progress>=1?this.UIParam_Instance.task_Animation.play("task_finish"):this.UIParam_Instance.task_Animation.stop("task_finish")},e.prototype.GetMyHeadIcon=function(){},e.prototype.OnDestroy=function(){},e}(i.UIBaseController);n.UIMainController=k,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/Net/Net":"Net","../../../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../../../Framework/Resources/LoaderManager":"LoaderManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../Framework/Utils/Utils":"Utils","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../Data/SkillData":"SkillData","../../../Data/TableData":"TableData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIHelpWindows/UIHelpController":"UIHelpController","../UIRankListWindows/UIRankListController":"UIRankListController","../UISettingWindows/UISettingController":"UISettingController","../UISkillWindows/UISkillController":"UISkillController","../UITipsWindows/UITipsController":"UITipsController","../UIWaitWindows/UIWaitController":"UIWaitController"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"bb3a9UnOmJMRak9RQqYdiSf","UIManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.UIManagerInstance=n.UIManager=void 0;var r=t("../Resources/LoaderManager"),s=t("../Singleton/Singleton"),c=t("./UIBase/UIConfigEnum"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiRootNode=null,e.uiContentNodes=new Array,e.uiLayerCache=new Map,e.uiCache=new Map,e.isLock=!1,e}return o(e,t),e.prototype.OnInit=function(){this.uiRootNode=cc.director.getScene().getChildByName("UIRoot"),null!=this.uiRootNode?(cc.game.addPersistRootNode(this.uiRootNode),this.InitUILayer()):console.error("uiRootNode (CC.Node) == NULL!!!!!!!!!!!!!!!!")},e.prototype.InitUILayer=function(){for(var t in c.UIConfigEnum.UILayer){var e=c.UIConfigEnum.UILayer[t],n=new cc.Node(e);this.uiRootNode.addChild(n),n.setPosition(cc.Vec2.ZERO),n.setContentSize(cc.view.getDesignResolutionSize()),this.uiContentNodes.push(n),this.uiLayerCache.set(e,n)}},e.prototype.GetUILayerNode=function(t){return this.uiLayerCache.has(t)?this.uiLayerCache.get(t):cc.director.getScene().getComponentInChildren(cc.Canvas).node},e.prototype.GetWindows2Type=function(t){return this.GetWindows(t.prototype.GetUIControllerName())},e.prototype.GetWindows=function(t,e){if(void 0===e&&(e=null),this.uiCache.has(t)){var n=this.uiCache.get(t);return null!=e&&n.view_active!=e?null:n}return null},e.prototype.IsOpenWindows=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cc.log("UIManager OpenWindows windowName = ",t.prototype.GetUIControllerName());var a=this.GetWindows(t.prototype.GetUIControllerName());return null!=a&&a.activate},e.prototype.DeactivateWindow=function(t){t.OnDisable(),t.OnDisableEffect(),t.OnDisableSound()},e.prototype.ActivateWindow=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.OnEnable.apply(t,e),t.OnEnableEffect(),t.OnEnableSound()},e.prototype.InnerOpenWindow=function(t){for(var e=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var o=t.GetUIResourcePath(),s=null!=t.gameObject,c=o&&!s;c?t.IsLoading||(t.IsLoading=!0,t.CreateModel.apply(t,n),r.LoaderMgr.loadPrefab(o).then(function(a){null!=a&&(t.OnLoadUIContainerComplate(a),t.CreateView(),t.IsLoading=!1,e.ActivateWindow.apply(e,i([t],n)))})):this.ActivateWindow.apply(this,i([t],n))},e.prototype.InnerCloseWindow=function(t){this.DeactivateWindow(t)},e.prototype.OpenWindows=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this.isLock){var a=t.prototype.GetUIControllerName(),o=this.GetWindows(a);null==o&&(o=new t,this.uiCache.set(a,o)),o.activate||this.InnerOpenWindow.apply(this,i([o],e))}},e.prototype.CloseWindow=function(t){var e=t.prototype.GetUIControllerName(),n=this.GetWindows(e,!0);null!=n&&null!=n.gameObject&&n.isOpenCompleted&&!n.IsCloseing&&this.InnerCloseWindow(n)},e.prototype.resetUIRoot=function(){},e.prototype.refreshUIRoot=function(){},e.prototype.GetContentNodes=function(){return this.uiContentNodes},e.prototype.setLock=function(t){this.isLock=t},e}(s.Singleton);n.UIManager=l,n.UIManagerInstance=l.GetInstance(l),cc._RF.pop()},{"../Resources/LoaderManager":"LoaderManager","../Singleton/Singleton":"Singleton","./UIBase/UIConfigEnum":"UIConfigEnum"}],UIMatchController:[function(t,e,n){"use strict";cc._RF.push(e,"234dcvYvKxIDLTaFSQBsfkF","UIMatchController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UIMatchController=void 0;var i=t("../../../../Config/GameEnum"),r=t("../../../../Framework/Net/NetListenerRegister"),s=t("../../../../Framework/UI/UIBase/UIBaseController"),c=t("../../../../Framework/UI/UIBase/UIConfigEnum"),l=t("../../../../Framework/UI/UIManager"),u=t("../../../../NetWork/NetWorkMsgID"),p=t("../../../Data/GameData"),h=t("../../../../Framework/Event/EventManager"),f=t("../../../../Framework/Localization/LocalizationManager"),m=t("../../../Data/TableData"),d=t("./UIPlayerInfo"),_=t("../../../../Framework/Utils/Utils"),g=t("../../../../Framework/Audio/AudioManager"),I=t("../UIWaitWindows/UIWaitController"),y=t("../../../../Framework/Event/EventMessages"),E=t("../../../SDK/SDKManager"),v=t("../../../SDK/GameSDKEnum"),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.tips_ID=0,e.playerInfoDic=new Map,e.manyPlayerInfoDic=new Map,e.temp=0,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIMatchController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),this.OnGetNodeMatch()},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.matchType=e[0],this.OnMatchModel(),this.RefreshTips(),this.isRangeTips=!0,E.SDKInstance.GameDataPoint(v.GameSDKEnum.PointType.Page_Open,E.SDKInstance.Page_PointData("UIMatch",this.matchType))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return c.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UIMatchWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.OnMatchSucess_handel=this.OnMatchSuccess.bind(this),this.UIParam_Instance.back_Button.node.on("click",this.OnClickBack,this),h.EventManager.AddListener(y.EventMessages.GAME_MATCH_SUCCESS,this.OnMatchSucess_handel)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.back_Button.node.off("click",this.OnClickBack,this),h.EventManager.RemoveListener(y.EventMessages.GAME_MATCH_SUCCESS,this.OnMatchSucess_handel)},e.prototype.OnUpdate=function(){this.isRangeTips&&(this.temp+=1,this.temp>300&&(this.temp=0,this.isRangeTips=!1,this.RefreshTips()))},e.prototype.OnGetNodeMatch=function(){this.playerInfoDic.clear(),this.manyPlayerInfoDic.clear();for(var t=this.UIParam_Instance.single_Node.childrenCount,e=this.UIParam_Instance.many_Node.childrenCount,n=0;n<t;n++){var a=this.UIParam_Instance.single_Node.children[n].getComponent(d.default);this.playerInfoDic.set(n+1,a)}for(n=0;n<e;n++)a=this.UIParam_Instance.many_Node.children[n].getComponent(d.default),this.manyPlayerInfoDic.set(n+1,a)},e.prototype.OnRefreshReset=function(){this.playerInfoDic.forEach(function(t){t.Reset()}),this.manyPlayerInfoDic.forEach(function(t){t.Reset()}),this.UIParam_Instance.search_Many_Lable.string=_.stringFormat(f.LocalizationManagerInstancec.Get(125),"0"),this.UIParam_Instance.search_Lable.string=f.LocalizationManagerInstancec.Get(126)},e.prototype.OnMatchModel=function(){switch(this.OnRefreshReset(),p.GameDataManager.gameMode){case i.GameEnum.PVPType.PVPOne:this.UIParam_Instance.pvpCenter.active=!0,this.UIParam_Instance.manyPvpCenter.active=!1,this.UIParam_Instance.search_Lable.node.active=!0,this.UIParam_Instance.search_Many_Lable.node.active=!1,this.playerInfoDic.forEach(function(t){t.PlayAnimation()});break;case i.GameEnum.PVPType.Tournament:this.UIParam_Instance.pvpCenter.active=!1,this.UIParam_Instance.manyPvpCenter.active=!0,this.UIParam_Instance.search_Lable.node.active=!1,this.UIParam_Instance.search_Many_Lable.node.active=!0,this.manyPlayerInfoDic.has(2)&&this.manyPlayerInfoDic.get(2).PlayAnimation();break;case i.GameEnum.PVPType.Private:}this.OnRefreshMyInfo(),g.AudioMgr.playSFX("sfx_match_search",g.AudioType.EAudio_VoiceLoop),l.UIManagerInstance.CloseWindow(I.default)},e.prototype.OnClickBack=function(){l.UIManagerInstance.CloseWindow(e)},e.prototype.OnMatchSuccess=function(t){var e=this;if(null!=t&&null!=t.result){var n=1;for(var a in t.result)t.result[a].userId!=p.GameDataManager.uid&&(this.matchType==i.GameEnum.PVPType.Tournament?(n+=1,this.OnRefreshManyInfo(n,t.result[a])):this.OnRefreshOtherInfo(t.result[a]))}if(this.matchType==i.GameEnum.PVPType.Tournament){var o=1;this.scheduleCallBack=function(){o+=1,this.manyPlayerInfoDic.has(o)&&this.manyPlayerInfoDic.get(o).PlayInfo(),this.UIParam_Instance.search_Many_Lable.string=_.stringFormat(f.LocalizationManagerInstancec.Get(125),o)},this.UIParam_Instance.schedule(function(){e.scheduleCallBack()},(m.TableDataManager.matchDelayTime-.5)/5,5),this.UIParam_Instance.scheduleOnce(function(){g.AudioMgr.stopEffect()},m.TableDataManager.matchDelayTime-.5)}else g.AudioMgr.stopEffect(),this.UIParam_Instance.search_Lable.string=f.LocalizationManagerInstancec.Get(126);this.isRangeTips=!1},e.prototype.OnRefreshMyInfo=function(){this.UIParam_Instance.search_Lable.string=f.LocalizationManagerInstancec.Get(142),this.UIParam_Instance.search_Many_Lable.string=_.stringFormat(f.LocalizationManagerInstancec.Get(125),"0"),this.playerInfoDic.has(1)&&this.playerInfoDic.get(1).RefreshMyInfo(),this.manyPlayerInfoDic.has(1)&&this.manyPlayerInfoDic.get(1).RefreshMyInfo()},e.prototype.OnRefreshOtherInfo=function(t){this.playerInfoDic.has(2)&&this.playerInfoDic.get(2).RefreshInfo(t)},e.prototype.OnRefreshManyInfo=function(t,e){this.manyPlayerInfoDic.has(t)&&this.manyPlayerInfoDic.get(t).SetInfo(e)},e.prototype.RefreshTips=function(){this.tips_ID=m.TableDataManager.GetRangeTipsContent(),this.UIParam_Instance.tips_Lable.string=f.LocalizationManagerInstancec.Get(this.tips_ID)},e.prototype.SetAvatarLocationList=function(){},e.prototype.OnDisable=function(){t.prototype.OnDisable.call(this),this.UIParam_Instance.unschedule(this.scheduleCallBack),this.OnRefreshReset()},e.prototype.OnDestroy=function(){r.NetListenerRegisterInstance.UnRegistScListener(u.NetWorkMsgID.MATCH_RESULT_RESPONSE),this.playerInfoDic.clear(),this.manyPlayerInfoDic.clear()},e}(s.UIBaseController);n.UIMatchController=M,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Utils":"Utils","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../Data/TableData":"TableData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIWaitWindows/UIWaitController":"UIWaitController","./UIPlayerInfo":"UIPlayerInfo"}],UIPlayerInfo:[function(t,e,n){"use strict";cc._RF.push(e,"5578biv2QRC6YJeCEG3Jo3w","UIPlayerInfo");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Data/GameData"),s=t("../../../../Framework/Utils/Tool"),c=t("../../../Data/TableData"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.trophy_Node=s.default.findChildByPath(this.node,"Trophy"),this.nameLable=s.default.findChildByPath(this.node,"Name","cc.Label"),this.count=s.default.findChildByPath(this.node,"Trophy/num","cc.Label"),this.head_Sprite=s.default.findChildByPath(this.node,"IconBg/Icon","cc.Sprite"),this.search_Sprite=s.default.findChildByPath(this.node,"SearchIcon","cc.Sprite"),this.search_Animation=this.node.getComponent(cc.Animation),this.count.string="",this.nameLable.string="",this.search_Sprite.node.active=!1,this.trophy_Node.active=!1,this.head_Sprite.node.active=!1},e.prototype.SetInfo=function(t){this.info=t},e.prototype.PlayInfo=function(){var t=this;this.PlayAnimation(),this.scheduleOnce(function(){t.info&&t.nameLable&&(t.trophy_Node.active=!0,t.nameLable.string=t.info.nickName,t.count.string=t.info.trophy+"",t.search_Sprite.node.active=!1,t.head_Sprite.node.active=!0,t.StopAnimation())},c.TableDataManager.matchDelayTime/5)},e.prototype.RefreshInfo=function(t){this.nameLable&&(this.trophy_Node.active=!0,this.nameLable.string=t.nickName,this.count.string=t.trophy+"",this.search_Sprite.node.active=!1,this.head_Sprite.node.active=!0,this.StopAnimation())},e.prototype.RefreshMyInfo=function(){this.nameLable&&(this.trophy_Node.active=!0,this.nameLable.string=r.GameDataManager.playerName,this.count.string=r.GameDataManager.trophyNum+"",this.search_Sprite.node.active=!1,this.head_Sprite.node.active=!0,this.StopAnimation())},e.prototype.Reset=function(){this.nameLable&&(this.count.string="",this.nameLable.string="",this.trophy_Node.active=!1,this.search_Sprite.node.active=!1,this.head_Sprite.node.active=!1)},e.prototype.PlayAnimation=function(){this.search_Sprite.node.active=!0,this.search_Animation&&this.search_Animation.play("headMatch_animation")},e.prototype.StopAnimation=function(){this.search_Animation&&this.search_Animation.stop("headMatch_animation")},i([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../../Framework/Utils/Tool":"Tool","../../../Data/GameData":"GameData","../../../Data/TableData":"TableData"}],UIRankItem:[function(t,e,n){"use strict";cc._RF.push(e,"510823CGQlNxZeoxyvrYYIW","UIRankItem");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.RefreshData=function(t,e){this.sort_Lable.string=t+"",this.name_Lable.string=e.info.nickName,this.cup_Lable.string=e.extData+""},i([c(cc.Label)],e.prototype,"sort_Lable",void 0),i([c(cc.Label)],e.prototype,"name_Lable",void 0),i([c(cc.Label)],e.prototype,"cup_Lable",void 0),i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],UIRankListController:[function(t,e,n){"use strict";cc._RF.push(e,"b9467/g065FXaH1RqTp8DRP","UIRankListController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UIRankListController=void 0;var i=t("../../../../Config/ResConfig"),r=t("../../../../Framework/Resources/LoaderManager"),s=t("../../../../Framework/UI/UIBase/UIBaseController"),c=t("../../../../Framework/UI/UIBase/UIConfigEnum"),l=t("../../../../Framework/UI/UIManager"),u=t("./UIRankItem"),p=t("../../../Data/GameData"),h=t("../../../Data/TableData"),f=t("../UIGameOverWindows/UIHeadRankItem"),m=t("../../../../Framework/Audio/AudioManager"),d=t("../../../SDK/SDKManager"),_=t("../../../SDK/GameSDKEnum"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.rankItemList=new Array,e.headItemDic=new Map,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIRankListController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),this.GetRankList()},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.RefreshRankList(),d.SDKInstance.GameDataPoint(_.GameSDKEnum.PointType.Page_Open,d.SDKInstance.Page_PointData("UIRankList"))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return c.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UIRankListWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.UIParam_Instance.close_Button.node.on("click",this.OnClickClose,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.close_Button.node.off("click",this.OnClickClose,this)},e.prototype.OnClickClose=function(){m.AudioMgr.playSFX("ui_common_click",m.AudioType.EAudio_UI),l.UIManagerInstance.CloseWindow(e)},e.prototype.GetRankList=function(){var t=this;this.UIParam_Instance.rank_Node.destroyAllChildren(),this.headItemDic.clear(),this.rankItemList.length=0,r.LoaderMgr.loadPrefab(i.ResConfig.UI_ITEM.UI_RANKITEM).then(function(e){if(null!=e){for(var n=0;n<h.TableDataManager.rankListCount;n++){var a=cc.instantiate(e);a.setParent(t.UIParam_Instance.rank_Node);var o=a.getComponent(u.default);t.rankItemList.push(o)}t.RefreshRankList()}});var e=this.UIParam_Instance.headRank_Node.childrenCount;if(e>0)for(var n=0;n<e;n++){var a=this.UIParam_Instance.headRank_Node.children[n].getComponent(f.default);this.headItemDic.set(n+1,a)}},e.prototype.OnReset=function(){this.headItemDic.forEach(function(t){t.Reset()})},e.prototype.RefreshRankList=function(){this.currentMySort="-";for(var t=p.GameDataManager.rankList,e=t.length-1,n=0;n<this.rankItemList.length;n++){var a=this.rankItemList[n];if(e>=n){a.node.active=!0;var o=t[n];o.info.userId==p.GameDataManager.uid&&(this.currentMySort=n+1+""),a.RefreshData(n+1,o)}else a.node.active=!1}this.RefreshMyRankInfo(),this.headItemDic.forEach(function(e,n){t[n-1]&&e.RefreshData(t[n-1].info.nickName)})},e.prototype.RefreshMyRankInfo=function(){this.UIParam_Instance.sort_Lable.string=this.currentMySort,this.UIParam_Instance.name_Lable.string=p.GameDataManager.playerName,this.UIParam_Instance.cup_Lable.string=p.GameDataManager.trophyNum+""},e.prototype.OnDisable=function(){t.prototype.OnDisable.call(this),this.OnReset()},e.prototype.OnDestroy=function(){this.rankItemList=null},e}(s.UIBaseController);n.UIRankListController=g,cc._RF.pop()},{"../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Resources/LoaderManager":"LoaderManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../Data/GameData":"GameData","../../../Data/TableData":"TableData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIGameOverWindows/UIHeadRankItem":"UIHeadRankItem","./UIRankItem":"UIRankItem"}],UIScale:[function(t,e,n){"use strict";cc._RF.push(e,"22d30fQMtVEl4Zyh17qCkuH","UIScale");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fitScale=!0,e.fitPosition=!1,e}return o(e,t),e.prototype.start=function(){var t=cc.view.getVisibleSize().height/cc.view.getDesignResolutionSize().height,e=cc.view.getVisibleSize().width/cc.view.getDesignResolutionSize().width,n=Math.abs(t-e);if(this.fitScale&&this.node.setScale(this.node.scale+n),this.fitPosition){var a=this.node.convertToWorldSpaceAR(cc.v2(0,0));if(t>e){var o=a.y*(1+n);this.node.y=this.node.convertToNodeSpaceAR(cc.v2(0,o)).y}else{var i=a.x*(1+n);this.node.x=this.node.convertToNodeSpaceAR(cc.v2(i,0)).x}}},i([c],e.prototype,"fitScale",void 0),i([c],e.prototype,"fitPosition",void 0),i([s,l("Extends/UIScale")],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],UISettingController:[function(t,e,n){"use strict";cc._RF.push(e,"40d47/IZONN1YwUV4ahvVRp","UISettingController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UISettingController=void 0;var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=t("../../../../Framework/UI/UIManager"),c=t("../UITipsWindows/UITipsController"),l=t("../../../../Framework/Audio/AudioManager"),u=t("../../../../Framework/Utils/Tool"),p=t("../../../../Config/ResConfig"),h=t("../../../../Config/GameEnum"),f=t("../../../Data/GameData"),m=t("../../../SDK/SDKManager"),d=t("../../../SDK/GameSDKEnum"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.isMusicOpen=!1,e.isMusicSound=!1,e.offsetX=0,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UISettingController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this);var e=this.UIParam_Instance.music_Top_Sprite.node.getContentSize().width,n=this.UIParam_Instance.music_Bottom_Sprite.node.getContentSize().width;this.offsetX=(n-e)/2},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.InitSetting(),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Page_Open,m.SDKInstance.Page_PointData("UISetting"))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UISettingWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.UIParam_Instance.close_Button.node.on("click",this.OnClickClose,this),this.UIParam_Instance.exit_Button.node.on("click",this.OnClickExit,this),this.UIParam_Instance.bgMusic_Toggle.node.on("toggle",this.OnClickBGMusic,this),this.UIParam_Instance.music_Toggle.node.on("toggle",this.OnClickMusic,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.close_Button.node.off("click",this.OnClickClose,this),this.UIParam_Instance.exit_Button.node.off("click",this.OnClickExit,this),this.UIParam_Instance.bgMusic_Toggle.node.off("toggle",this.OnClickBGMusic,this),this.UIParam_Instance.music_Toggle.node.off("toggle",this.OnClickMusic,this)},e.prototype.OnClickClose=function(){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),s.UIManagerInstance.CloseWindow(e)},e.prototype.InitSetting=function(){var t=l.AudioMgr.getBGMVolume(),e=l.AudioMgr.getSFXVolume();t>.5?(this.UIParam_Instance.bgMusic_Toggle.isChecked=!0,u.default.setSprite(this.UIParam_Instance.bgMusic_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_LIGHT),u.default.setSprite(this.UIParam_Instance.bgMusic_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_LIGHT),this.UIParam_Instance.bgMusic_Top_Sprite.node.position=new cc.Vec3(this.offsetX,0,0)):(this.UIParam_Instance.bgMusic_Toggle.isChecked=!1,u.default.setSprite(this.UIParam_Instance.bgMusic_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_DRAK),u.default.setSprite(this.UIParam_Instance.bgMusic_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_DRAK),this.UIParam_Instance.bgMusic_Top_Sprite.node.position=new cc.Vec3(-this.offsetX,0,0)),e>.5?(this.UIParam_Instance.music_Toggle.isChecked=!0,u.default.setSprite(this.UIParam_Instance.music_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_LIGHT),u.default.setSprite(this.UIParam_Instance.music_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_LIGHT),this.UIParam_Instance.music_Top_Sprite.node.position=new cc.Vec3(this.offsetX,0,0)):(this.UIParam_Instance.music_Toggle.isChecked=!1,u.default.setSprite(this.UIParam_Instance.music_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_DRAK),u.default.setSprite(this.UIParam_Instance.music_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_DRAK),this.UIParam_Instance.music_Top_Sprite.node.position=new cc.Vec3(-this.offsetX,0,0))},e.prototype.OnClickExit=function(){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),s.UIManagerInstance.OpenWindows(c.UITipsController,h.GameEnum.TipType.Nomal,116,function(){f.GameDataManager.GameExit()},function(){}),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Click_Set_Quit,m.SDKInstance.Click_PointData("exit"))},e.prototype.OnClickBGMusic=function(t){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),t.isChecked?(l.AudioMgr.setBGMVolume(1,!0),l.AudioMgr.playBGM("sfx_common_bgm",l.AudioType.EAudio_BGM),u.default.setSprite(this.UIParam_Instance.bgMusic_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_LIGHT),u.default.setSprite(this.UIParam_Instance.bgMusic_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_LIGHT),this.UIParam_Instance.bgMusic_Top_Sprite.node.position=new cc.Vec3(this.offsetX,0,0),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Click_Set_Music,m.SDKInstance.Click_PointData(!0))):(l.AudioMgr.setBGMVolume(0,!0),u.default.setSprite(this.UIParam_Instance.bgMusic_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_DRAK),u.default.setSprite(this.UIParam_Instance.bgMusic_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_DRAK),this.UIParam_Instance.bgMusic_Top_Sprite.node.position=new cc.Vec3(-this.offsetX,0,0),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Click_Set_Music,m.SDKInstance.Click_PointData(!1))),l.AudioMgr.save()},e.prototype.OnClickMusic=function(t){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),t.isChecked?(l.AudioMgr.setSFXVolume(1),u.default.setSprite(this.UIParam_Instance.music_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_LIGHT),u.default.setSprite(this.UIParam_Instance.music_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_LIGHT),this.UIParam_Instance.music_Top_Sprite.node.position=new cc.Vec3(this.offsetX,0,0),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Click_Set_Sound,m.SDKInstance.Click_PointData(!0))):(l.AudioMgr.setSFXVolume(0),u.default.setSprite(this.UIParam_Instance.music_Top_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_TOP_DRAK),u.default.setSprite(this.UIParam_Instance.music_Bottom_Sprite,p.ResConfig.UI_TEXTURE.UI_SET_BOTTOM_DRAK),this.UIParam_Instance.music_Top_Sprite.node.position=new cc.Vec3(-this.offsetX,0,0),m.SDKInstance.GameDataPoint(d.GameSDKEnum.PointType.Click_Set_Sound,m.SDKInstance.Click_PointData(!1))),l.AudioMgr.save()},e.prototype.OnDestroy=function(){},e}(i.UIBaseController);n.UISettingController=_,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Tool":"Tool","../../../Data/GameData":"GameData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UITipsWindows/UITipsController":"UITipsController"}],UISkillController:[function(t,e,n){"use strict";cc._RF.push(e,"6341b2+D2xEh5EYsvh5tCog","UISkillController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UISkillController=void 0;var i=t("../../../../Config/GameEnum"),r=t("../../../../Config/ResConfig"),s=t("../../../../Framework/Resources/LoaderManager"),c=t("../../../../Framework/UI/UIBase/UIBaseController"),l=t("../../../../Framework/UI/UIBase/UIConfigEnum"),u=t("../../../../Framework/UI/UIManager"),p=t("../../../Data/SkillData"),h=t("./UISkillItem"),f=t("../UIMatchWindows/UIMatchController"),m=t("../../../../Framework/Net/NetListenerRegister"),d=t("../../../../NetWork/NetWorkMsgID"),_=t("../../../Data/GameData"),g=t("../../../../Framework/Event/EventManager"),I=t("../../../../Framework/Event/EventMessages"),y=t("../../../../Framework/Net/Net"),E=t("../../../../Framework/Utils/Logger"),v=t("../../../../Framework/Utils/Utils"),M=t("../../../../Framework/Localization/LocalizationManager"),S=t("../../../Data/TableData"),C=t("../../../../Framework/Utils/Tool"),P=t("../UITipsWindows/UITipsController"),O=t("../../../../Framework/Audio/AudioManager"),U=t("../UIStoreWindows/UIStoreController"),T=t("../UIWaitWindows/UIWaitController"),b=t("../../../SDK/SDKManager"),D=t("../../../SDK/GameSDKEnum"),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.skillList=new Map,e.isPlay=!1,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UISkillController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),this.OnCreatSillItem()},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.OnShowSkillType(e[0]),this.OnRefreshSillItem(),this.OnRefreshData(),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Page_Open,b.SDKInstance.Page_PointData("UISkill",this.pvpType))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return l.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UISkillWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.OnRefreshData_handel=this.OnRefreshData.bind(this),this.UIParam_Instance.back_Button.node.on("click",this.OnClickBack,this),this.UIParam_Instance.close_Button.node.on("click",this.OnClickClose,this),this.UIParam_Instance.skill_Buy_Button.node.on("click",this.OnBatchBuySkill,this),m.NetListenerRegisterInstance.RegistScListener(d.NetWorkMsgID.MATCH_PVPONE_RESPONSE,this.GameMatchFinish.bind(this)),m.NetListenerRegisterInstance.RegistScListener(d.NetWorkMsgID.Buy_TIP_RESPONSE,this.OnRespBuySuccess.bind(this)),g.EventManager.AddListener(I.EventMessages.COIN_DATA_REFRESH,this.OnRefreshData_handel)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.back_Button.node.off("click",this.OnClickBack,this),this.UIParam_Instance.close_Button.node.off("click",this.OnClickClose,this),this.UIParam_Instance.skill_Buy_Button.node.off("click",this.OnBatchBuySkill,this),m.NetListenerRegisterInstance.UnRegistScListener(d.NetWorkMsgID.MATCH_PVPONE_RESPONSE),m.NetListenerRegisterInstance.UnRegistScListener(d.NetWorkMsgID.Buy_TIP_RESPONSE),g.EventManager.RemoveListener(I.EventMessages.COIN_DATA_REFRESH,this.OnRefreshData_handel)},e.prototype.OnRefreshData=function(){this.UIParam_Instance.gold_Lable.string=_.GameDataManager.goldNum+""},e.prototype.OnClickBack=function(){O.AudioMgr.playSFX("ui_common_click",O.AudioType.EAudio_UI),u.UIManagerInstance.CloseWindow(e)},e.prototype.OnClickClose=function(){O.AudioMgr.playSFX("ui_common_click",O.AudioType.EAudio_UI),this.UIParam_Instance.tips_Panel.active=!1},e.prototype.OnBatchBuySkill=function(){if(O.AudioMgr.playSFX("ui_common_click",O.AudioType.EAudio_UI),this.currentSkillData&&_.GameDataManager.goldNum>=5*this.currentSkillData.Price){var t={count:5};t.skillId=this.currentSkillData.ID,t.userId=_.GameDataManager.uid,y.NetInstance.sendMessage(d.NetWorkMsgID.Buy_TIP_REQUEST,t),u.UIManagerInstance.OpenWindows(T.default),this.isPlay=!1}else this.UIParam_Instance.tips_Panel.active=!1,u.UIManagerInstance.OpenWindows(U.UIStoreController);b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Click_Skill_Buy5,b.SDKInstance.ClickSkill_PointData(_.GameDataManager.gameMode,this.currentSkillData.ID))},e.prototype.OnShowSkillType=function(t){switch(this.UIParam_Instance.tips_Panel.active=!1,this.pvpType=t,t){case i.GameEnum.PVPType.PVPOne:this.UIParam_Instance.pvpType_Lable.string="1V1";break;case i.GameEnum.PVPType.Tournament:this.UIParam_Instance.pvpType_Lable.string="Tournament";break;case i.GameEnum.PVPType.Private:this.UIParam_Instance.pvpType_Lable.string="Private"}_.GameDataManager.gameMode=t},e.prototype.OnCreatSillItem=function(){var t=this,e=p.SkillDataManager.getSkillSize();s.LoaderMgr.loadPrefab(r.ResConfig.UI_ITEM.UI_SKLLITEM).then(function(n){if(null!=n)for(var a=0;a<e;a++){var o=cc.instantiate(n);o.setParent(t.UIParam_Instance.skill_Node);var i=o.getComponent(h.default),r=p.SkillDataManager.getID(a);t.skillList.set(r,i),i.Init(r,t.pvpType,t)}})},e.prototype.OnRefreshSillItem=function(){var t=this;this.skillList.forEach(function(e,n){e.Init(n,t.pvpType,t)})},e.prototype.OnOpenBuySkillTip=function(t){b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Click_Skill_MutiBuy,b.SDKInstance.ClickSkill_PointData(this.pvpType,t)),this.UIParam_Instance.tips_Panel.active=!0;var e=p.SkillDataManager.getSkillData(t);this.UIParam_Instance.buy_Skill_Coin.string=5*e.Price+"",this.UIParam_Instance.skill_Buy_Lable.string=v.stringFormat(M.LocalizationManagerInstancec.Get(123),S.TableDataManager.multiBuyNum),C.default.setSprite(this.UIParam_Instance.skill_Sprite,p.SkillDataManager.getSkillTexture(t)),this.currentSkillData=e},e.prototype.OnSetCurrentData=function(t){this.currentSkillData=p.SkillDataManager.getSkillData(t)},e.prototype.OnRespBuySuccess=function(t){if(b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(d.NetWorkMsgID.Buy_TIP_RESPONSE,t)),u.UIManagerInstance.CloseWindow(T.default),E.Logger.logModel(t,"\u8d2d\u4e70\u6280\u80fd"),0==t.errorCode){if(_.GameDataManager.goldNum=t.coin,p.SkillDataManager.ServerSetSkillData(t.skillCount),this.OnRefreshData(),this.OnRefreshSillItem(),this.isPlay&&null!=this.currentSkillData){var e={};e.gameMode=this.pvpType,e.skillId=this.currentSkillData.ID,e.gameId=_.GameDataManager.gameId,e.userId=_.GameDataManager.uid,y.NetInstance.sendMessage(d.NetWorkMsgID.MATCH_PVPONE_REQUEST,e),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(d.NetWorkMsgID.MATCH_PVPONE_REQUEST,e))}this.UIParam_Instance.tips_Panel.active=!1}else E.Logger.logError("\u8d2d\u4e70\u5931\u8d25",t.errorCode)},e.prototype.GameMatchFinish=function(t){b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Resp,b.SDKInstance.Protocol_PointData(d.NetWorkMsgID.MATCH_PVPONE_RESPONSE,t)),u.UIManagerInstance.CloseWindow(T.default),E.Logger.logModel(t,"\u662f\u5426\u6210\u529f\u8fdb\u5165\u5339\u914d\u754c\u9762"),null!=t&&(0==t.errorCode?(u.UIManagerInstance.CloseWindow(P.UITipsController),u.UIManagerInstance.OpenWindows(f.UIMatchController,this.pvpType)):1031==t.errorCode?u.UIManagerInstance.OpenWindows(P.UITipsController,i.GameEnum.TipType.Nomal,149,function(){var t={};t.userId=_.GameDataManager.uid,y.NetInstance.sendMessage(d.NetWorkMsgID.CALLBACK_ROOM_GIVEUP_REQUEST,t),b.SDKInstance.GameDataPoint(D.GameSDKEnum.PointType.Protocol_Req,b.SDKInstance.Protocol_PointData(d.NetWorkMsgID.CALLBACK_ROOM_GIVEUP_REQUEST,t)),E.Logger.logModel(t,"\u9000\u51fa\u6e38\u620f\u623f\u95f4")},function(){}):(u.UIManagerInstance.OpenWindows(P.UITipsController,i.GameEnum.TipType.Head,t.errorCode),E.Logger.logError("\u5f00\u542f\u5339\u914d\u5931\u8d25",t.errorCode)))},e.prototype.OnDestorySkillItem=function(){null!=this.UIParam_Instance.skill_Node&&this.UIParam_Instance.skill_Node.destroyAllChildren()},e.prototype.OnDestroy=function(){this.OnDestorySkillItem()},e}(c.UIBaseController);n.UISkillController=R,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/Net/Net":"Net","../../../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../../../Framework/Resources/LoaderManager":"LoaderManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../Framework/Utils/Utils":"Utils","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../Data/SkillData":"SkillData","../../../Data/TableData":"TableData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIMatchWindows/UIMatchController":"UIMatchController","../UIStoreWindows/UIStoreController":"UIStoreController","../UITipsWindows/UITipsController":"UITipsController","../UIWaitWindows/UIWaitController":"UIWaitController","./UISkillItem":"UISkillItem"}],UISkillItem:[function(t,e,n){"use strict";cc._RF.push(e,"9de0cAzggtBZbZi6+82asUR","UISkillItem");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../Framework/UI/UIManager"),s=t("../../../Data/GameData"),c=t("../../../Data/SkillData"),l=t("../../../../Framework/Net/Net"),u=t("../../../../NetWork/NetWorkMsgID"),p=t("../UIStoreWindows/UIStoreController"),h=t("../../../../Framework/Utils/Logger"),f=t("../../../../Framework/Utils/Tool"),m=t("../../../../Framework/Event/EventManager"),d=t("../../../../Framework/Event/EventMessages"),_=t("../../../../Framework/Audio/AudioManager"),g=t("../UIWaitWindows/UIWaitController"),I=t("../../../SDK/SDKManager"),y=t("../../../SDK/GameSDKEnum"),E=cc._decorator,v=E.ccclass,M=E.property,S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEnable=function(){this.play_Button.node.on("click",this.PlayEnter,this),this.playBuy_Button.node.on("click",this.PayEnter,this),this.buy_Button.node.on("click",this.BuySkill,this),this.skill_Button.node.on("click",this.OnOpenClickSkill,this),this.clickSkill_handel=this.OnCloseClickSkill.bind(this),m.EventManager.AddListener(d.EventMessages.SKILLICON_CLICK,this.clickSkill_handel)},e.prototype.onDisable=function(){this.play_Button.node.off("click",this.PlayEnter,this),this.playBuy_Button.node.off("click",this.PayEnter,this),this.buy_Button.node.off("click",this.BuySkill,this),this.skill_Button.node.off("click",this.OnOpenClickSkill,this),m.EventManager.RemoveListener(d.EventMessages.SKILLICON_CLICK,this.clickSkill_handel)},e.prototype.Init=function(t,e,n){this.id=t,this.type=e,this.skillController=n,this.RefreshData()},e.prototype.OnCloseClickSkill=function(t){t!=this.id&&(this.bottom_Node.active=!1,this.skill_animation.stop(),this.bg_Node.setPosition(0,0,0))},e.prototype.OnOpenClickSkill=function(){if(I.SDKInstance.GameDataPoint(y.GameSDKEnum.PointType.Click_Skill_Icon,I.SDKInstance.ClickSkill_PointData(s.GameDataManager.gameMode,this.id)),_.AudioMgr.playSFX("ui_common_click",_.AudioType.EAudio_UI),this.bottom_Node.active=!0,this.skill_animation){var t=this.skill_animation.getAnimationState("skillItem_up_animation"),e=this.skill_animation.getAnimationState("skillItem_loop_animation");t.isPlaying||e.isPlaying||(this.skill_animation.play("skillItem_up_animation"),this.skill_animation.on("finished",function(){this.skill_animation.play("skillItem_loop_animation")}.bind(this)))}null!=this.dataTable&&this.dataTable.Price>0&&this.skillCount<=0?(this.playBuy_Button.node.active=!0,this.play_Button.node.active=!1,this.price_Lable.string=this.dataTable.Price+""):(this.playBuy_Button.node.active=!1,this.play_Button.node.active=!0),m.EventManager.Brocast(d.EventMessages.SKILLICON_CLICK,this.id)},e.prototype.RefreshData=function(){this.bottom_Node.active=!1,this.dataTable=c.SkillDataManager.getSkillData(this.id),this.skillCount=c.SkillDataManager.getSkillCount(this.id),this.skillCount>0?(this.left_Node.active=!1,this.skillNum_Lable.node.active=!0,this.skillNum_Lable.string=this.skillCount+""):(this.left_Node.active=!0,this.skillNum_Lable.node.active=!1),f.default.setSprite(this.skill_Sprite,this.dataTable.Icon),this.skill_animation.stop(),this.bg_Node.setPosition(0,0,0)},e.prototype.PlayEnter=function(){I.SDKInstance.GameDataPoint(y.GameSDKEnum.PointType.Click_Skill_Buy,I.SDKInstance.ClickSkill_PointData(s.GameDataManager.gameMode,this.id)),_.AudioMgr.playSFX("ui_common_click",_.AudioType.EAudio_UI);var t={};t.gameMode=this.type,t.skillId=this.id,t.gameId=s.GameDataManager.gameId,t.userId=s.GameDataManager.uid,l.NetInstance.sendMessage(u.NetWorkMsgID.MATCH_PVPONE_REQUEST,t),this.skillController.isPlay=!1,r.UIManagerInstance.OpenWindows(g.default),I.SDKInstance.GameDataPoint(y.GameSDKEnum.PointType.Protocol_Req,I.SDKInstance.Protocol_PointData(u.NetWorkMsgID.MATCH_PVPONE_REQUEST,t))},e.prototype.PayEnter=function(){if(I.SDKInstance.GameDataPoint(y.GameSDKEnum.PointType.Click_Skill_Play,I.SDKInstance.ClickSkill_PointData(s.GameDataManager.gameMode,this.id)),_.AudioMgr.playSFX("ui_common_click",_.AudioType.EAudio_UI),s.GameDataManager.goldNum>=this.dataTable.Price){var t={count:1};t.skillId=this.id,t.userId=s.GameDataManager.uid,l.NetInstance.sendMessage(u.NetWorkMsgID.Buy_TIP_REQUEST,t),this.skillController.OnSetCurrentData(this.id),this.skillController.isPlay=!0,h.Logger.logModel(t,"\u8d2d\u4e70\u6280\u80fd\u8fdb\u5165"),r.UIManagerInstance.OpenWindows(g.default),I.SDKInstance.GameDataPoint(y.GameSDKEnum.PointType.Protocol_Req,I.SDKInstance.Protocol_PointData(u.NetWorkMsgID.Buy_TIP_REQUEST,t))}else r.UIManagerInstance.OpenWindows(p.UIStoreController)},e.prototype.BuySkill=function(){null!=this.skillController&&this.skillCount<=0&&this.skillController.OnOpenBuySkillTip(this.id)},i([M(cc.Node)],e.prototype,"bg_Node",void 0),i([M(cc.Button)],e.prototype,"skill_Button",void 0),i([M(cc.Sprite)],e.prototype,"skill_Sprite",void 0),i([M(cc.Node)],e.prototype,"bottom_Node",void 0),i([M(cc.Node)],e.prototype,"left_Node",void 0),i([M(cc.Label)],e.prototype,"skillNum_Lable",void 0),i([M(cc.Button)],e.prototype,"buy_Button",void 0),i([M(cc.Button)],e.prototype,"play_Button",void 0),i([M(cc.Button)],e.prototype,"playBuy_Button",void 0),i([M(cc.Label)],e.prototype,"price_Lable",void 0),i([M(cc.Animation)],e.prototype,"skill_animation",void 0),i([v],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Net/Net":"Net","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../Data/SkillData":"SkillData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","../UIStoreWindows/UIStoreController":"UIStoreController","../UIWaitWindows/UIWaitController":"UIWaitController"}],UIStoreController:[function(t,e,n){"use strict";cc._RF.push(e,"572dbRNPG9Lwp1T2iH4Wdl0","UIStoreController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UIStoreController=void 0;var i=t("../../../../Config/ResConfig"),r=t("../../../../Framework/Resources/LoaderManager"),s=t("../../../../Framework/UI/UIBase/UIBaseController"),c=t("../../../../Framework/UI/UIBase/UIConfigEnum"),l=t("../../../../Framework/UI/UIManager"),u=t("./UIStoreItem"),p=t("../../../Data/GameData"),h=t("../../../Data/TableData"),f=t("../../../../Framework/Net/NetListenerRegister"),m=t("../../../../NetWork/NetWorkMsgID"),d=t("../../../../Framework/Event/EventManager"),_=t("../../../../Framework/Event/EventMessages"),g=t("../../../../Framework/Audio/AudioManager"),I=t("../../../../Framework/Utils/Logger"),y=t("../../../SDK/SDKManager"),E=t("../../../SDK/GameSDKEnum"),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIStoreController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this),f.NetListenerRegisterInstance.RegistScListener(m.NetWorkMsgID.GAME_SHOP_BUY_RESPONSE,this.OnRespStoreBuy.bind(this)),this.OnLoadStore()},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.OnRefreshDiamond(),y.SDKInstance.GameDataPoint(E.GameSDKEnum.PointType.Page_Open,y.SDKInstance.Page_PointData("UIStore"))},Object.defineProperty(e.prototype,"UILayer",{get:function(){return c.UIConfigEnum.UILayer.NormalLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UIStoreWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.OnRefreshDiamond_handel=this.OnRefreshDiamond.bind(this),d.EventManager.AddListener(_.EventMessages.DIAMOND_REFRESH,this.OnRefreshDiamond_handel),this.UIParam_Instance.close_Button.node.on("click",this.OnClickClose,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.close_Button.node.off("click",this.OnClickClose,this),d.EventManager.RemoveListener(_.EventMessages.DIAMOND_REFRESH,this.OnRefreshDiamond_handel)},e.prototype.OnClickClose=function(){g.AudioMgr.playSFX("ui_common_click",g.AudioType.EAudio_UI),l.UIManagerInstance.CloseWindow(e)},e.prototype.OnRefreshDiamond=function(){this.UIParam_Instance.diamond_Lable.string=p.GameDataManager.diamondNum+""},e.prototype.OnLoadStore=function(){var t=this,e=h.TableDataManager.getStoreCount();r.LoaderMgr.loadPrefab(i.ResConfig.UI_ITEM.UI_STOREITEM).then(function(n){if(null!=n)for(var a=0;a<e;a++){var o=cc.instantiate(n);o.setParent(t.UIParam_Instance.store_Node);var i=o.getComponent(u.default),r=h.TableDataManager.getStoreID(a),s=h.TableDataManager.getStoreData(r);i.Init(s)}})},e.prototype.OnRespStoreBuy=function(t){y.SDKInstance.GameDataPoint(E.GameSDKEnum.PointType.Protocol_Resp,y.SDKInstance.Protocol_PointData(m.NetWorkMsgID.GAME_SHOP_BUY_RESPONSE,t)),I.Logger.logModel(t,"\u8d2d\u4e70\u6210\u529f"),0==t.errorCode&&(p.GameDataManager.diamondNum=t.diamond,this.OnRefreshDiamond())},e.prototype.OnDestroy=function(){f.NetListenerRegisterInstance.UnRegistScListener(m.NetWorkMsgID.GAME_SHOP_BUY_RESPONSE)},e}(s.UIBaseController);n.UIStoreController=v,cc._RF.pop()},{"../../../../Config/ResConfig":"ResConfig","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Event/EventManager":"EventManager","../../../../Framework/Event/EventMessages":"EventMessages","../../../../Framework/Net/NetListenerRegister":"NetListenerRegister","../../../../Framework/Resources/LoaderManager":"LoaderManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../Data/TableData":"TableData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","./UIStoreItem":"UIStoreItem"}],UIStoreItem:[function(t,e,n){"use strict";cc._RF.push(e,"b33f4mmYEtBgKf9Waj+r4u8","UIStoreItem");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Data/GameData"),s=t("../../../../Framework/Utils/Tool"),c=t("../../../../Framework/Net/Net"),l=t("../../../../NetWork/NetWorkMsgID"),u=t("../../../../Framework/Utils/Logger"),p=t("../../../../Framework/UI/UIManager"),h=t("./UIStoreController"),f=t("../../../SDK/SDKManager"),m=t("../../../SDK/GameSDKEnum"),d=cc._decorator,_=d.ccclass,g=d.property,I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Init=function(t){null!=t&&(this.reward_Lable.string=t.GoldReward+"",this.price_Lable.string=t.Price+""),this.data=t,s.default.setSprite(this.icon_Sprite,t.Icon)},e.prototype.onEnable=function(){this.buy_Button.node.on("click",this.OnClickBuy,this)},e.prototype.onDisable=function(){this.buy_Button.node.off("click",this.OnClickBuy,this)},e.prototype.OnClickBuy=function(){if(this.data.Price<=r.GameDataManager.diamondNum){var t={};t.userId=r.GameDataManager.uid,t.goodsId=this.data.ID,c.NetInstance.sendMessage(l.NetWorkMsgID.GAME_SHOP_BUY_REQUEST,t),u.Logger.logModel(t,"\u7269\u54c1\u8d2d\u4e70"),f.SDKInstance.GameDataPoint(m.GameSDKEnum.PointType.Protocol_Req,f.SDKInstance.Protocol_PointData(l.NetWorkMsgID.GAME_SHOP_BUY_REQUEST,t))}else f.SDKInstance.showPayPage(),p.UIManagerInstance.CloseWindow(h.UIStoreController);f.SDKInstance.GameDataPoint(m.GameSDKEnum.PointType.Click_Store_Buy,f.SDKInstance.Click_PointData(this.data.ID))},i([g(cc.Button)],e.prototype,"buy_Button",void 0),i([g(cc.Label)],e.prototype,"reward_Lable",void 0),i([g(cc.Label)],e.prototype,"price_Lable",void 0),i([g(cc.Sprite)],e.prototype,"icon_Sprite",void 0),i([_],e)}(cc.Component);n.default=I,cc._RF.pop()},{"../../../../Framework/Net/Net":"Net","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger","../../../../Framework/Utils/Tool":"Tool","../../../../NetWork/NetWorkMsgID":"NetWorkMsgID","../../../Data/GameData":"GameData","../../../SDK/GameSDKEnum":"GameSDKEnum","../../../SDK/SDKManager":"SDKManager","./UIStoreController":"UIStoreController"}],UITipsController:[function(t,e,n){"use strict";cc._RF.push(e,"e154bx7jvhA6ZiLkpreOwE9","UITipsController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UITipsController=void 0;var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=t("../../../../Framework/Localization/LocalizationManager"),c=t("../../../../Config/GameEnum"),l=t("../../../../Framework/Audio/AudioManager"),u=t("../../../../Framework/UI/UIManager"),p=t("../../../../Framework/Utils/Logger"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIParam_Instance=null,e.toastPools=new Array,e.isToast=!0,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UITipsController"},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this)},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(t.prototype.OnEnable.apply(this,e),this.tipType=e[0],this.key=e[1],p.Logger.logModel(e,"\u7f51\u7edc\u94fe\u63a5"),this.tipType){case c.GameEnum.TipType.Nomal:this.UIParam_Instance.center_Node.active=!0,this.UIParam_Instance.tip_Node.active=!1,this.UIParam_Instance.mask_Node.active=!0,this.UIParam_Instance.load_Node.active=!1,this.UIParam_Instance.sureButton.node.active=!0,this.UIParam_Instance.cancelButton.node.active=!0,this.UIParam_Instance.exitButton.node.active=!1,this.UIParam_Instance.sureCenterButton.node.active=!1,this.sureCallBack=e[2],this.cancelCallBack=e[3],this.UIParam_Instance.msg_Lable.string=s.LocalizationManagerInstancec.Get(this.key);break;case c.GameEnum.TipType.Nomal_Exit:this.UIParam_Instance.center_Node.active=!0,this.UIParam_Instance.tip_Node.active=!1,this.UIParam_Instance.mask_Node.active=!0,this.UIParam_Instance.load_Node.active=!1,this.UIParam_Instance.sureButton.node.active=!1,this.UIParam_Instance.cancelButton.node.active=!1,this.UIParam_Instance.exitButton.node.active=!0,this.UIParam_Instance.sureCenterButton.node.active=!1,this.UIParam_Instance.msg_Lable.string=s.LocalizationManagerInstancec.Get(this.key),this.sureCallBack=e[2];break;case c.GameEnum.TipType.Nomal_Sure:this.UIParam_Instance.center_Node.active=!0,this.UIParam_Instance.tip_Node.active=!1,this.UIParam_Instance.mask_Node.active=!0,this.UIParam_Instance.load_Node.active=!1,this.UIParam_Instance.sureButton.node.active=!1,this.UIParam_Instance.cancelButton.node.active=!1,this.UIParam_Instance.exitButton.node.active=!1,this.UIParam_Instance.sureCenterButton.node.active=!0,this.UIParam_Instance.msg_Lable.string=s.LocalizationManagerInstancec.Get(this.key),this.sureCallBack=e[2];break;case c.GameEnum.TipType.Head:this.UIParam_Instance.center_Node.active=!1,this.UIParam_Instance.tip_Node.active=!0,this.UIParam_Instance.mask_Node.active=!1,this.UIParam_Instance.load_Node.active=!1,this.isToast&&this.OnShowToast(this.key)}},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.TopLayer},enumerable:!1,configurable:!0}),e.prototype.GetUIResourcePath=function(){return"UI/View/UITipsWindows"},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnAddListener=function(){this.UIParam_Instance.sureButton.node.on("click",this.OnClickSure,this),this.UIParam_Instance.cancelButton.node.on("click",this.OnClickCancel,this),this.UIParam_Instance.exitButton.node.on("click",this.OnClickSure,this),this.UIParam_Instance.sureCenterButton.node.on("click",this.OnClickSure,this)},e.prototype.OnRemoveListener=function(){this.UIParam_Instance.sureButton.node.off("click",this.OnClickSure,this),this.UIParam_Instance.cancelButton.node.off("click",this.OnClickCancel,this),this.UIParam_Instance.exitButton.node.off("click",this.OnClickSure,this),this.UIParam_Instance.sureCenterButton.node.off("click",this.OnClickSure,this)},e.prototype.OnClickSure=function(){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),null!=this.sureCallBack&&this.sureCallBack(),u.UIManagerInstance.CloseWindow(e)},e.prototype.OnClickCancel=function(){l.AudioMgr.playSFX("ui_common_click",l.AudioType.EAudio_UI),null!=this.cancelCallBack&&this.cancelCallBack(),u.UIManagerInstance.CloseWindow(e)},e.prototype.OnShowLoad=function(){this.UIParam_Instance.load_Node.destroyAllChildren();var t=cc.instantiate(this.UIParam_Instance.load_Prefab);t.setParent(this.UIParam_Instance.load_Node),t.setPosition(0,0);var e=t.getComponent(cc.Animation);e&&e.play()},e.prototype.OnShowToast=function(t){var n=this;this.isToast=!1;var a=this.toastPools.shift();a||((a=cc.instantiate(this.UIParam_Instance.toastNode)).setParent(this.UIParam_Instance.tip_Node),a.setPosition(0,-70)),a.getComponent(cc.Label).string=s.LocalizationManagerInstancec.Get(t),a.setPosition(0,-200),a.setScale(1,1,1),cc.tween(a).to(.5,{position:new cc.Vec3(0,200,0)}).delay(1).to(1,{position:new cc.Vec3(0,300,0),scale:0}).call(function(){n.isToast=!0,n.toastPools.push(a),u.UIManagerInstance.CloseWindow(e)}).start()},e}(i.UIBaseController);n.UITipsController=h,cc._RF.pop()},{"../../../../Config/GameEnum":"GameEnum","../../../../Framework/Audio/AudioManager":"AudioManager","../../../../Framework/Localization/LocalizationManager":"LocalizationManager","../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum","../../../../Framework/UI/UIManager":"UIManager","../../../../Framework/Utils/Logger":"Logger"}],UIWaitController:[function(t,e,n){"use strict";cc._RF.push(e,"da1eeYF9hVHwLDnS4cd6S7J","UIWaitController");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../Framework/UI/UIBase/UIBaseController"),r=t("../../../../Framework/UI/UIBase/UIConfigEnum"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotation=0,e.isAngle=!0,e.UIParam_Instance=null,e}return o(e,t),e.prototype.GetUIControllerName=function(){return"UIWaitController"},e.prototype.GetUIResourcePath=function(){return"UI/View/UIWaitWindows"},Object.defineProperty(e.prototype,"UILayer",{get:function(){return r.UIConfigEnum.UILayer.TipLayer},enumerable:!1,configurable:!0}),e.prototype.OnCreateModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.OnInitUIFinder=function(){this.UIParam_Instance=this.UIParam_BaseInstance},e.prototype.OnCreateView=function(){t.prototype.OnCreateView.call(this)},e.prototype.OnUpdate=function(t){this.isAngle&&(this.rotation=this.rotation-200*t,this.rotation<=-360&&(this.rotation=0),this.UIParam_Instance.loadNode.angle=this.rotation)},e.prototype.OnEnable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.OnEnable.apply(this,e),this.rotation=0,this.UIParam_Instance.loadNode.angle=0,this.isAngle=!0},e.prototype.OnDisable=function(){t.prototype.OnDisable.call(this),this.rotation=0,this.UIParam_Instance.loadNode.angle=0,this.isAngle=!1},e}(i.UIBaseController);n.default=s,cc._RF.pop()},{"../../../../Framework/UI/UIBase/UIBaseController":"UIBaseController","../../../../Framework/UI/UIBase/UIConfigEnum":"UIConfigEnum"}],UIWindow:[function(t,e,n){"use strict";cc._RF.push(e,"53408RdLFdLJ4E2ZNrcJGUK","UIWindow"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],URLVariables:[function(t,e,n){"use strict";cc._RF.push(e,"4ee5cTnWFBL8qvScQlv+tK7","URLVariables"),Object.defineProperty(n,"__esModule",{value:!0}),n.URLVariables=void 0;var a=function(){function t(){this.variables=null}return t.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,n=/[?&]?([^=]+)=([^&]*)/g;e=n.exec(t);){var a=decodeURIComponent(e[1]),o=decodeURIComponent(e[2]);if(a in this.variables!=0){var i=this.variables[a];i instanceof Array?i.push(o):this.variables[a]=[i,o]}else this.variables[a]=o}},t.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var n in t)e.push(this.encodeValue(n,t[n]));return e.join("&")},t.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},t.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},t}();n.URLVariables=a,cc._RF.pop()},{}],UpdateManager:[function(t,e,n){"use strict";cc._RF.push(e,"57afdrW7wlOA5hO329N5oDB","UpdateManager");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UpdateManagerInstance=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.OnInit=function(){this.updateHandlerList=new Map,this.lateUpdateHandlerList=new Map},e.prototype.Update=function(t){this.updateHandlerList.forEach(function(e,n){if(null!=n)for(var a=0,o=e.length;a<o;a++){var i=e[a];null!=i&&i.call(n,t)}})},e.prototype.LateUpdate=function(t){this.lateUpdateHandlerList.forEach(function(e,n){if(null!=n)for(var a=0,o=e.length;a<o;a++){var i=e[a];null!=i&&i.call(n,t)}})},e.prototype.AddUpdate=function(t,e){if(null!=t&&null!=e){this.updateHandlerList.has(t)||this.updateHandlerList.set(t,new Array);var n=this.updateHandlerList.get(t);-1==n.indexOf(e)&&n.push(e)}},e.prototype.AddLateUpdate=function(t,e){if(null!=t&&null!=e){this.lateUpdateHandlerList.has(t)||this.lateUpdateHandlerList.set(t,new Array);var n=this.lateUpdateHandlerList.get(t);-1==n.indexOf(e)&&n.push(e)}},e.prototype.RemoveUpdate=function(t,e){if(null!=t&&null!=e&&this.updateHandlerList.has(t)){var n=this.updateHandlerList.get(t),a=n.indexOf(e);-1!=a&&n.splice(a,1),n.length<=0&&this.updateHandlerList.delete(t)}},e.prototype.RemoveLateUpdate=function(t,e){if(null!=t&&null!=e&&this.lateUpdateHandlerList.has(t)){var n=this.lateUpdateHandlerList.get(t),a=n.indexOf(e);-1!=a&&n.splice(a,1),n.length<=0&&this.lateUpdateHandlerList.delete(t)}},e}(t("../Singleton/Singleton").Singleton);n.default=i,n.UpdateManagerInstance=i.GetInstance(i),cc._RF.pop()},{"../Singleton/Singleton":"Singleton"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"4f871pxiEJPJbU045pUU++i","Utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.getNumber=n.ParseBoolList=n.ParseIntToBool=n.ParseBool=n.ParseFloatList=n.ParseInt32List=n.LogTime=n.IsEmptyObject=n.toColorString=n.destroyBreathAction=n.createBreathAction=n.getDictString=n.getSign=n.getTabStr=n.getPrintDictStr=n.range=n.randInt=n.getDiskRandValue=n.getUrlStr=n.deepCopy=n.getDictFromStr=n.getListFromStr=n.tableStringToObject=n.stringReplacePos=n.stringTrim=n.stringRightTrim=n.stringLeftTrim=n.stringReplace=n.stringFormat=n.stringAddNumSuffix=n.listReverse=n.listMinNum=n.listMaxNum=n.listChoice=n.listSample=n.towListUnion=n.towListSubtracions=n.towListSubtraction=n.towListIntersect=n.deleteListRepeat=n.shuffle=n.removeChildByTag=n.getChildByTag=n.addChildByTag=n.getRandomFloatNum=n.getRandomIntNum=n.registerClass=n.isPrototype=n.is=n.getQualifiedClassName=void 0,n.parseHtmlText=n.applyTransitionEffect=void 0;var a=t("../Config/Config"),o=t("./TweenFunc"),i=t("./TweenUtil"),r=t("./MD5"),s=t("../Extends/html-text-parser");function c(t,e){var n=t.children;if(null!==n)for(var a=0;a<n.length;a++){var o=n[a];if(o&&o.tag&&o.tag===e)return o}return null}function l(t){for(var e=[],n={},a="",o=t.length,i=0;i<o;i++){var r=t[i];a="string"==typeof r?"_str":"",n[a+=r]||(e.push(r),n[a]=1)}return e}function u(t){return JSON.parse(JSON.stringify(t))}function p(t,e){return Math.floor(Math.random()*(e+1-t)+t)}function h(t){for(var e="";t--;)e+="\t";return e}function f(t){var e=Object.keys(t),n=e.length;e.sort();for(var a="",o=0;o<n;o++){var i=e[o],r=t[i],s=Object.prototype.toString.call(r).slice("[object ".length,-1);"Array"==s?r=r.join(""):"Object"==s&&(r=f(r)),a+=i+"="+r+"&"}return a}function m(t){return"true"==t||"TRUE"==t}n.getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var n=t.prototype?t.prototype:Object.getPrototypeOf(t);if(n.hasOwnProperty("__class__"))return n.__class__;var a=n.constructor.toString().trim(),o=a.indexOf("("),i=a.substring(9,o);return Object.defineProperty(n,"__class__",{value:i,enumerable:!1,writable:!0}),i},n.is=function(t,e){if(!t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t),a=n?n.__types__:null;return!!a&&-1!==a.indexOf(e)},n.isPrototype=function(t,e){return!(!t||"object"!=typeof t&&!t.prototype||!t.hasOwnProperty(e))},n.registerClass=function(t,e,n){var a=t.prototype;a.__class__=e;var o=[e];n&&(o=o.concat(n));var i=a.__types__;if(a.__types__)for(var r=i.length,s=0;s<r;s++){var c=i[s];-1==o.indexOf(c)&&o.push(c)}a.__types__=o},n.getRandomIntNum=function(t,e){var n=e-t,a=Math.random();return t+Math.round(a*n)},n.getRandomFloatNum=function(t,e){var n=e-t;return t+Math.random()*n},n.addChildByTag=function(t,e,n,a){cc.isValid(t)?cc.isValid(e)?(a=void 0===a?e.zIndex:a,e.tag=n,t.addChild(e,a)):cc.error("addChildByTag: child is null!"):cc.error("addChildByTag: parent is null!")},n.getChildByTag=c,n.removeChildByTag=function(t,e,n){if(t){var a=c(t,e);a?(n=void 0===n||n,t.removeChild(a,n)):cc.warn("removeChildByTag: child is null!")}else cc.error("removeChildByTag: node is null!")},n.shuffle=function(t){for(var e,n,a=t.length;a;)e=[t[n=Math.random()*a-->>>0],t[a]],t[a]=e[0],t[n]=e[1];return t},n.deleteListRepeat=l,n.towListIntersect=function(t,e){for(var n=[],a=t.length,o=0;o<a;o++){var i=t[o];e.InArray(i)&&n.push(i)}return n},n.towListSubtraction=function(t,e){for(var n=[],a=t.length,o=0;o<a;o++){var i=t[o];e.InArray(i)||n.push(i)}return n},n.towListSubtracions=function(t,e){for(var n=u(t),a=0;a<e.length;a++){var o=e[a],i=n.indexOf(o);-1!=i&&n.splice(i,1)}return n},n.towListUnion=function(t,e){return l(t.concat(e))},n.listSample=function(t,e){var n=[],a=t.slice(),o=a.length;if(o<=e)return a;for(var i=0;i<e;i++){var r=Math.floor(Math.random()*(o-i));n.push(a[r]),a.splice(r,1)}return n},n.listChoice=function(t){var e=t.length;return e<1?null:t[Math.floor(Math.random()*e)]},n.listMaxNum=function(t){return Math.max.apply(null,t)},n.listMinNum=function(t){return Math.min.apply(null,t)},n.listReverse=function(t){for(var e=t.length,n=[],a=0;a<e;a++)n.push(t.pop());return n},n.stringAddNumSuffix=function(t,e,n){var a=""+e;if(n){var o=a.length;a=o<n?Array(n-o+1).join("0")+e:a}return[t,a].join("")},n.stringFormat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.replace(/\{(\d+)\}/g,function(t,n){return e[n-1]||t})},n.stringReplace=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var a=t,o=e.length,i=1;i<=o;i++)a=a.replace(new RegExp("\\{"+i+"\\}","g"),e[i-1]);return a},n.stringLeftTrim=function(t){return t.replace(/(^\s*)/g,"")},n.stringRightTrim=function(t){return t.replace(/(\s*$)/g,"")},n.stringTrim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},n.stringReplacePos=function(t,e,n){return t.substr(0,e-1)+n+t.substring(e,t.length)},n.tableStringToObject=function(t){for(var e=(t=t.replace(/\{|}/g,"")).split(","),n={},a=0;a<e.length;a++){var o=e[a].split("=");o.length>0&&(n[o[0]]=o[1])}return n},n.getListFromStr=function(t){return t.split(";")},n.getDictFromStr=function(t,e){var n={},a=t.split(";"),o=e.split(";"),i=a.length,r=o.length,s=i;i!==r&&(s=i<r?i:r,cc.log("GetDictFromStr length of (%s) not equal to (%s)",t,e));for(var c=0;c<s;c++)n[a[c]]=o[c];return n},n.deepCopy=u,n.getUrlStr=function(t){if(!t)return"";var e="?";for(var n in t)e+=n+"="+t[n]+"&";return e.substring(0,e.length-1)},n.getDiskRandValue=function(t,e,n){if(!n)for(var a in n=0,e)n+=e[a];var o=t.length;if(!o)return cc.error("getDiskRandValue curIDList empty"),null;if(o!=e.length)return cc.error("getDiskRandValue (%s) != (%s)",t,e),null;var i=p(1,n),r=e.map(function(e,n){return[e,t[n]]});r.sort(function(t,e){return t[0]>e[0]?1:-1});var s=0;for(a=0;a<o;a++)if(!((s+=r[a][0])<i))return r[a][1];return cc.error("curIDList:%s,%s,%s,%s not find value",t,e,i,r),null},n.randInt=p,n.range=function(){for(var t,e,n,a,o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(o=[],1==(a=i.length)?(t=0,e=i[0],n=1):2==a?(t=i[0],e=i[1],n=1):(t=i[0],e=i[1],n=i[2]),n<0)for(;t>e;t+=n)o.push(t);else for(;t<e;t+=n)o.push(t);return o},n.getPrintDictStr=function t(e,n){var a,o,i,r,s;n=null!=n?n:0;var c="{\n";for(a in e){if(o=e[a],r="","Object"==(i=Object.prototype.toString.call(o).slice("[object ".length,-1)))r=o.hasOwnProperty("JS_Name")?"("+o.toString()+"),\n":t(o,n+1);else if("Function"==i)r=o.constructor.name+",\n";else{s="";try{s=JSON.stringify(o)}catch(l){s="### cyclic object value:"+o.toString()}r=s+",\n"}c+="\t"+h(n)+JSON.stringify(a)+":"+r}return c+=h(n)+"}",n&&(c+=","),c+"\n"},n.getTabStr=h,n.getSign=function(t,e){var n=Object.keys(t);n.sort();for(var a="",o=n.length,i=0,s="";i<o;i++)if("Head"!=(s=n[i])){var c=t[s],l=Object.prototype.toString.call(c).slice("[object ".length,-1);"Array"==l?c=c.join(""):"Object"==l&&(c=f(c)),a+=s+"="+c+"&"}return a+=e,(new r.MD5).hex_md5(a).toUpperCase()},n.getDictString=f,n.createBreathAction=function(t){var e=cc.repeatForever(cc.sequence(cc.scaleTo(.6,1.1),cc.scaleTo(.6,.9)));t.runAction(e)},n.destroyBreathAction=function(t){t.stopAllActions()},n.toColorString=function(t){t<0&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e},n.IsEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.LogTime=function(){var t=new Date;return"["+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()+"]"},n.ParseInt32List=function(t){var e=new Array;for(var n in t)e.push(parseInt(t[n]));return e},n.ParseFloatList=function(t){var e=new Array;for(var n in t)e.push(parseFloat(t[n]));return e},n.ParseBool=m,n.ParseIntToBool=function(t){return Math.abs(t)>0},n.ParseBoolList=function(t){var e=new Array;for(var n in t)e.push(m(t[n]));return e},n.getNumber=function(t){switch(t){case 0:return"\u96f6";case 1:return"\u4e00";case 2:return"\u4e8c";case 3:return"\u4e09";case 4:return"\u56db";case 5:return"\u4e94";case 6:return"\u516d";case 7:return"\u4e03";case 8:return"\u516b";case 9:return"\u4e5d"}},n.applyTransitionEffect=function(t,e){if(!e||e.transType!=a.Config.UI_ANIM_TYPE.None)switch((e=e||{transType:a.Config.UI_ANIM_TYPE.FadeIn,duration:.5,tweenFunc:o.TweenFunc.Linear}).transType){case a.Config.UI_ANIM_TYPE.FadeIn:i.TweenUtil.from({node:t,duration:e.duration||1,opacity:0,tweenFunc:e.tweenFunc||o.TweenFunc.Linear});break;case a.Config.UI_ANIM_TYPE.RightIn:i.TweenUtil.from({node:t,duration:e.duration||1,x:-(cc.view.getFrameSize().width+t.width/2),tweenFunc:e.tweenFunc||o.TweenFunc.Linear});break;case a.Config.UI_ANIM_TYPE.LeftIn:i.TweenUtil.from({node:t,duration:e.duration||1,x:cc.view.getFrameSize().width+t.width/2,tweenFunc:e.tweenFunc||o.TweenFunc.Linear})}};var d=null;n.parseHtmlText=function(t){return null==d&&(d=new s.HtmlTextParser),d.parse(t)},cc._RF.pop()},{"../Config/Config":"Config","../Extends/html-text-parser":"html-text-parser","./MD5":"MD5","./TweenFunc":"TweenFunc","./TweenUtil":"TweenUtil"}],WeiButEffect:[function(t,e,n){"use strict";cc._RF.push(e,"7e938LwW5pHiYdiIzvHrSU/","WeiButEffect");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../Framework/Utils/Tool"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.factor=.5,e.amount=5,e.explosionRadius=100,e.time0=0,e.ctrlPoints=[],e.particles=[],e}var n;return o(e,t),n=e,e.prototype.PlayEffect=function(){this.targetPos=r.default.getNodePos(this.target,this.EffectTuowei);for(var t=Math.max(1,this.amount),e=0;e<t;e++)this.prefab&&this.GenerateParticle(this.prefab);this.time0=(new Date).getTime()/1e3},e.prototype.GenerateParticle=function(t){var e=cc.instantiate(t);if(e.parent=this.parent.parent,e.position=this.parent.position,e.position=r.default.getNodePos(e,this.EffectTuowei),e.parent=this.EffectTuowei,e.active=!0,this.particles.push(e),this.amount>1){var n=2*Math.random()*Math.PI,a=Math.random()*this.explosionRadius*this.explosionRadius,o=Math.sqrt(a)*Math.cos(n)+e.position.x,i=Math.sqrt(a)*Math.sin(n)+e.position.y;this.ctrlPoints.push(cc.v3(o,i,0))}else this.ctrlPoints.push(e.position.clone());this.beginPos=cc.v3(e.position.x,e.position.y,0)},e.prototype.update=function(){if(this.target){var t=((new Date).getTime()/1e3-this.time0)/Math.max(.1,this.factor);t>1&&(t=1,this.OnFinish());for(var e=0;e<this.ctrlPoints.length;e++){var n=this.ctrlPoints[e],a=cc.v3(),o=cc.v3();cc.Vec3.lerp(a,this.beginPos,n,t),cc.Vec3.lerp(o,n,this.targetPos,t);var i=cc.v3();cc.Vec3.lerp(i,a,o,t),this.particles[e].position=i}}else this.OnFinish()},e.prototype.OnFinish=function(){this.node.destroy();for(var t=0,e=this.particles;t<e.length;t++)e[t].destroy();null!=this.onFinish&&this.onFinish.apply(null)},e.CreateEffect=function(t,e,a,o,i,r,s){void 0===r&&(r=200),void 0===s&&(s=null);var c=new cc.Node;c.parent=t;var l=c.addComponent(n);return l.parent=e,l.prefab=o,l.EffectTuowei=t,l.amount=i,l.target=a,l.onFinish=s,l.explosionRadius=r,l.PlayEffect(),l},n=i([c],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../Framework/Utils/Tool":"Tool"}],YaahlanSDK:[function(t,e,n){"use strict";cc._RF.push(e,"fede2NO6CdHMpM2XO9k4Z1D","YaahlanSDK");var a,o=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YaahlanSDK=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e){return this._sdkType=t,this._gameType=e,console.log("platform init result: "+!!window.mm),!!window.mm},e.prototype.getSDKChannel=function(){return this._sdkType},e.prototype.getUserInfo=function(t){window.mm.build({common:["app","getUserInfo",{},function(e){t(e)}]})},e.prototype.getGameInfo=function(t){this.getStorageItem({path:this.getGameType(),key:"gameJson"},function(e){console.log("==sdk:getGameInfo==string: "+e);var n=JSON.parse(e);console.log("==sdk:getGameInfo====json: ",n);for(var a={token:n.token||"",roomId:n.roomId,ws:"ws://"+n.webSocketUrl,teamInfo:{}},o=0,i=n.usersInfo;o<i.length;o++){var r=i[o];r.userId&&(a.teamInfo[r.userId]={uid:r.userId,gender:r.gender,age:r.age,avatar:r.avatar,isRobot:r.isRobot,tid:r.teamId})}t(a)})},e.prototype.getJWT=function(t){this.getNativeVersion()<1101?this.requestByNative("/yaahlan/game/auth/token",{},"post",function(e){e&&200===e.ec||t(""),t(e.data&&e.data.token||"")}):window.mm.build({common:["app","getJWT",{},function(e){null!=t&&t(e)}]})},e.prototype.getNativeVersion=function(){var t=navigator.userAgent.match(/momoWebView.*?\/(\d+\.\d+\.\d+).*? /);return t&&t[1]?parseInt(t[1].split(".").join("")):0},e.prototype.gameStart=function(t){this.gameReport(t)},e.prototype.gameEnd=function(t){var e={playerList:t};this.sendMessageToParent("result",e)},e.prototype.gameReport=function(t){var e={playerList:t};this.sendMessageToParent("progress",e)},e.prototype.sendMessageToParent=function(t,e){var n={type:t,data:e};console.log("=====sendMessageToParent===="+t,n),window.parent.postMessage(JSON.stringify(n),"*")},e.prototype.loading=function(t){100==t&&this.closeLoading()},e.prototype.closeLoading=function(){window.mm.build({common:["game","closeLoading",{gameType:this.getGameType()},function(){}]})},e.prototype.closeWebView=function(t){void 0===t&&(t=1),window.mm.ui.close(t,1,!0)},e.prototype.getLocale=function(t){var e,n=(null===(e=navigator.userAgent.match(/lan\/(\w+?) /))||void 0===e?void 0:e[1])||"en";(location.hostname.includes("localhost")||location.hostname.includes("172"))&&(n="zh"),t(n)},e.prototype.getUserCharacter=function(t){var e;t((null===(e=navigator.userAgent.match(/character\/(\w+)/))||void 0===e?void 0:e[1])||"")},e.prototype.getStatusBarHeight=function(t){window.mm.storage.getItem({path:"yaahlan-common",key:"statusBarHeight"},function(e){e?t(Number(e)):window.mm.build({common:["ui","getStatusBarHeight",{},function(e){try{var n=0;n="data"in e&&"string"==typeof e.data?JSON.parse(e.data).height/window.devicePixelRatio:e.height/window.devicePixelRatio,window.mm.storage.setItem({path:"yaahlan-task",key:"statusBarHeight",value:""+n}),t(n)}catch(e){console.log(">>>>> getStatusBarHeight error: ",e),t(0)}}]})})},e.prototype.getHeightAndWidth=function(){var t=window.innerWidth,e=window.innerHeight;return new cc.Vec2(t,e)},e.prototype.initGameUIPosition=function(t,e){e()},e.prototype.showToast=function(t){window.mm.ui.showMessage({status:2,message:t})},e.prototype.getStorageItem=function(t,e){window.mm.storage.getItem({path:t.path,key:t.key},function(t){e(t)})},e.prototype.setStorageItem=function(t){window.mm.storage.setItem({path:t.path,key:t.key,value:t.value})},e.prototype.showUserProfile=function(t){window.mm.build({common:["game","showUserInfoToast",{userId:t},function(){}]})},e.prototype.showPayPage=function(){window.mm.build({common:["app","showPayPage",{},function(){}]})},e.prototype.getRequestHost=function(){var t=location.hostname;return"www.yaahlan.fun"===t||"s.immomo.com"===t?"https://melon-gateway-os.immomo.com":"https://melon-gateway-stage.immomo.com"},e.prototype.requestByNative=function(t,e,n,a){var o=this.getRequestHost();window.mm.http.request({url:""+o+t,data:e,method:n},function(t){if(setTimeout(function(){console.log(">>>>>> requestByNative",t)},2e3),"object"==typeof t)a(t);else{var e="";try{e=t.match(/"data":"(.*)"/)[1],a(e?JSON.parse(e):null)}catch(n){a(null)}}})},e.prototype.reportByNative=function(t,e,n){var a={eventName:t,logData:JSON.stringify(e)};this.requestByNative("/yaahlan/game-match/momo/dm/dmEventLog",a,"post",n)},e}(t("./SDKBase").SDKBase);n.YaahlanSDK=i,cc._RF.pop()},{"./SDKBase":"SDKBase"}],easeConst:[function(t,e,n){"use strict";cc._RF.push(e,"e5de94bhjBNC6vp7DAW/Z2a","easeConst"),Object.defineProperty(n,"__esModule",{value:!0}),n.animEase=void 0;var a=[cc.easeIn(3),cc.easeOut(3),cc.easeInOut(3),cc.easeExponentialIn(),cc.easeExponentialOut(),cc.easeExponentialInOut(),cc.easeSineIn(),cc.easeSineOut(),cc.easeSineInOut(),cc.easeElasticIn(3),cc.easeElasticOut(3),cc.easeElasticInOut(3),cc.easeBounceIn(),cc.easeBounceOut(),cc.easeBounceInOut(),cc.easeBackIn(),cc.easeBackOut(),cc.easeBackInOut(),cc.easeQuadraticActionIn(),cc.easeQuadraticActionOut(),cc.easeQuadraticActionInOut(),cc.easeQuarticActionIn(),cc.easeQuarticActionOut(),cc.easeQuarticActionInOut(),cc.easeQuinticActionIn(),cc.easeQuinticActionOut(),cc.easeQuinticActionInOut(),cc.easeCircleActionIn(),cc.easeCircleActionOut(),cc.easeCircleActionInOut(),cc.easeCubicActionIn(),cc.easeCubicActionOut(),cc.easeCubicActionInOut(),cc.easeBezierAction(.5,.1,1.5,1)];n.animEase=cc.Enum({easeIn:-1,easeOut:-1,easeInOut:-1,easeExponentialIn:-1,easeExponentialOut:-1,easeExponentialInOut:-1,easeSineIn:-1,easeSineOut:-1,easeSineInOut:-1,easeElasticIn:-1,easeElasticOut:-1,easeElasticInOut:-1,easeBounceIn:-1,easeBounceOut:-1,easeBounceInOut:-1,easeBackIn:-1,easeBackOut:-1,easeBackInOut:-1,easeQuadraticActionIn:-1,easeQuadraticActionOut:-1,easeQuadraticActionInOut:-1,easeQuarticActionIn:-1,easeQuarticActionOut:-1,easeQuarticActionInOut:-1,easeQuinticActionIn:-1,easeQuinticActionOut:-1,easeQuinticActionInOut:-1,easeCircleActionIn:-1,easeCircleActionOut:-1,easeCircleActionInOut:-1,easeCubicActionIn:-1,easeCubicActionOut:-1,easeCubicActionInOut:-1,easeBezierAction:-1,normal:-1});var o={easeMap:a,animEase:n.animEase};n.default=o,cc._RF.pop()},{}],extend:[function(t,e,n){"use strict";cc._RF.push(e,"247e6o6akxFrYkhoe9T+kpt","extend"),Object.defineProperty(n,"__esModule",{value:!0}),n.extend=void 0,n.extend=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var a=0;a<e.length;a+=1){var o=e[a];for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t},cc._RF.pop()},{}],handler:[function(t,e,n){"use strict";cc._RF.push(e,"12db6u77ElLNZXndb0mMUA1","handler");var a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],r=0,s=i.length;r<s;r++,o++)a[o]=i[r];return a};Object.defineProperty(n,"__esModule",{value:!0}),n.genHandler=n.handler=void 0;var o=[],i=function(){function t(){this.cb=null,this.host=null,this.args=null,this.times=0,this.is_persist=!1}return t.prototype.init=function(t,e){void 0===e&&(e=null);for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];this.cb=t,this.host=e,this.args=n,this.times=0,this.is_persist=!1},t.prototype.exec=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.is_persist&&this.times>0&&(this.args=[],cc.log("handler exec",this.times,"times, clear prev args")),this.args=this.args.concat(t),this.cb.apply(this.host,this.args),this.times++,this.is_persist||this.release()},t.prototype.retain=function(){this.is_persist=!0},t.prototype.release=function(){},t}();n.handler=i,n.genHandler=function(t,e){void 0===e&&(e=null);for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=o.length<0?o.pop():new i;return s.init.apply(s,a([t,e],n)),s},cc._RF.pop()},{}],"html-text-parser":[function(t,e,n){"use strict";cc._RF.push(e,"8b2bbvCUu1DXqs8mrRob4oO","html-text-parser"),Object.defineProperty(n,"__esModule",{value:!0}),n.HtmlTextParser=void 0;var a=/^(click)(\s)*=/,o=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=/,i=function(){function t(){this._specialSymbolArray=[],this._resultObjectArray=[],this._stack=[],this._specialSymbolArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"])}return t.prototype.parse=function(t){this._resultObjectArray=[],this._stack=[];for(var e=0,n=t.length;e<n;){var a=t.indexOf("<",e);if(a<0)this._stack.pop(),this._processResult(t.substring(e)),e=n;else{this._processResult(t.substring(e,a));var o=t.indexOf(">",e);-1===o?o=a:"/"===t.charAt(a+1)?this._stack.pop():this._addToStack(t.substring(a+1,o)),e=o+1}}return this._resultObjectArray},t.prototype._attributeToObject=function(t){var e,n,a,i,r={},s=(t=t.trim()).match(/^(color|size)(\s)*=/);if(s){if(e=s[0],""===(t=t.substring(e.length).trim()))return r;switch(n=t.indexOf(" "),e[0]){case"c":r.color=n>-1?t.substring(0,n).trim():t;break;case"s":r.size=parseInt(t)}return n>-1&&(i=t.substring(n+1).trim(),a=this._processEventHandler(i),r.event=a),r}if((s=t.match(/^(br(\s)*\/)/))&&s[0].length>0&&(e=s[0].trim()).startsWith("br")&&"/"===e[e.length-1])return r.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),r;if((s=t.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&s[0].length>0&&(e=s[0].trim()).startsWith("img")&&"/"===e[e.length-1]){var c;s=t.match(o);for(var l=!1;s;)e=(t=t.substring(t.indexOf(s[0]))).substr(0,s[0].length),p=(n=(c=t.substring(e.length).trim()).indexOf(" "))>-1?c.substr(0,n):c,e=(e=e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),t=c.substring(n).trim(),"src"===e?(r.isImage=!0,p.endsWith("/")&&(p=p.substring(0,p.length-1)),0===p.indexOf("'")?(l=!0,p=p.substring(1,p.length-1)):0===p.indexOf('"')&&(l=!0,p=p.substring(1,p.length-1)),r.src=p):"height"===e?r.imageHeight=parseInt(p):"width"===e?r.imageWidth=parseInt(p):"click"===e&&(r.event=this._processEventHandler(e+"="+p)),s=t.match(o);return l&&r.isImage&&this._resultObjectArray.push({text:"",style:r}),{}}if(s=t.match(/^(outline(\s)*[^>]*)/)){var u={color:"#ffffff",width:1};if(t=s[0].substring("outline".length).trim()){var p,h=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=/;for(s=t.match(h);s;)e=(t=t.substring(t.indexOf(s[0]))).substr(0,s[0].length),p=(n=(c=t.substring(e.length).trim()).indexOf(" "))>-1?c.substr(0,n):c,e=(e=e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),t=c.substring(n).trim(),"click"===e?r.event=this._processEventHandler(e+"="+p):"color"===e?u.color=p:"width"===e&&(u.width=parseInt(p)),s=t.match(h)}r.outline=u}if((s=t.match(/^(on|u|b|i)(\s)*/))&&s[0].length>0){switch(e=s[0],t=t.substring(e.length).trim(),e[0]){case"u":r.underline=!0;break;case"i":r.italic=!0;break;case"b":r.bold=!0}if(""===t)return r;a=this._processEventHandler(t),r.event=a}return r},t.prototype._processEventHandler=function(t){for(var e=0,n={},o=t.match(a),i=!1;o;){var r=o[0],s="";if(i=!1,'"'===(t=t.substring(r.length).trim()).charAt(0))(e=t.indexOf('"',1))>-1&&(s=t.substring(1,e).trim(),i=!0),e++;else if("'"===t.charAt(0))(e=t.indexOf("'",1))>-1&&(s=t.substring(1,e).trim(),i=!0),e++;else{var c=t.match(/(\S)+/);e=(s=c?c[0]:"").length}i&&(n[r=r.substring(0,r.length-1).trim()]=s),o=(t=t.substring(e).trim()).match(a)}return n},t.prototype._addToStack=function(t){var e=this._attributeToObject(t);if(0===this._stack.length)this._stack.push(e);else{if(e.isNewLine||e.isImage)return;var n=this._stack[this._stack.length-1];for(var a in n)e[a]||(e[a]=n[a]);this._stack.push(e)}},t.prototype._processResult=function(t){""!==t&&(t=this._escapeSpecialSymbol(t),this._stack.length>0?this._resultObjectArray.push({text:t,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:t}))},t.prototype._escapeSpecialSymbol=function(t){for(var e=0;e<this._specialSymbolArray.length;++e){var n=this._specialSymbolArray[e][0],a=this._specialSymbolArray[e][1];t=t.replace(n,a)}return t},t}();n.HtmlTextParser=i,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"afd11YTFJ9K0K4Zi7dmqAMk","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","GameConfig","GameEnum","ITable","ResConfig","Struct","AudioManager","SoundManager","easeConst","Config","LinkList","Queue","Stack","TableManager","EventManager","EventMessages","Events","Actions","CCTweenEase","ResolutionAutoFit","RigidBodyCollisionEx","Shake","Toast","Tween","UIScale","html-text-parser","Iterfaces","LanguageConfig","LocalizationManager","UILocalization","Base64Util","ByteArray","Http","HttpClient","Net","NetHeartManager","NetListenerRegister","NetReconnectManager","PacketBuffer","Socket","SocketManager","URLVariables","PlatformSDK","SDKBase","SDKEnum","YaahlanSDK","AppPool","GameObjectPool","Pool","PoolNodeManager","LoaderManager","ResourcesManager","BaseScene","ISceneConfig","SceneManager","Singleton","TimerManager","AdaptaterManager","UIBaseController","UIConfigEnum","UIWindow","UIFinder_Base","UIFinder_UITestWindows","UIManager","UpdateManager","LocalStorageUtils","Logger","MD5","MathUtils","NativeApi","PopUpUtil","RegUtils","SystemTicker","TextureForWebGLByURLToImg","TimeUtil","Tool","TweenFunc","TweenUtil","Utils","extend","handler","GameLaunch","EliminationData","GameData","SkillData","TableData","TimeData","WeiButEffect","IBattleMessage","IGameMessage","ILogInMessage","IMatchMessage","GameBaseSDK","GameSDKEnum","GameYaahlanSDK","SDKManager","BattleScene","HomeScene","LaunchScene","AnimPos","EliminationEffect","EliminationCell","UIBattleController","UIBattleMask","UIFinder_UIBattleWindows","UIHeadItem","UIFinder_UIGameOverWindows","UIGameOverController","UIHeadRankItem","UIFinder_UIHelpWindows","UIHelpController","UIFinder_UILoadWindows","UILoadController","UIFinder_UIMainWindows","UIMainController","UIFinder_UIMatchWindows","UIMatchController","UIPlayerInfo","UIFinder_UIRankListWindows","UIRankItem","UIRankListController","UIFinder_UISettingWindows","UISettingController","UIFinder_UISkillWindows","UISkillController","UISkillItem","UIFinder_UIStoreWindows","UIStoreController","UIStoreItem","UIFinder_UITipsWindows","UITipsController","UIFinder_UIWaitWindows","UIWaitController","NetWorkMsgID","IHeartMessage","IMessage","ITestMessage"]);